(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractObject3D}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8),uuid__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(519);let AbstractObject3D=class AbstractObject3D{constructor(rendererService,parent){this.rendererService=rendererService,this.parent=parent,this.scaleX=1,this.scaleY=1,this.scaleZ=1,this.name=Object(uuid__WEBPACK_IMPORTED_MODULE_3__.a)(),this.layer=0,this.changed=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.EventEmitter,this.childlren=[]}ngOnChanges(changes){if(!this.object)return;let modified=!1;["rotateX","rotateY","rotateZ"].some(propName=>propName in changes)&&(this.applyRotation(),modified=!0),["translateX","translateY","translateZ"].some(propName=>propName in changes)&&(this.applyTranslation(),modified=!0),["scaleX","scaleY","scaleZ"].some(propName=>propName in changes)&&(this.applyScale(),modified=!0),modified&&(this.changed.emit(),this.rendererService.render())}ngOnDestroy(){this.object&&this.object.parent&&(this.parent.removeChild(this),this.rendererService&&this.rendererService.render())}ngOnInit(){this.object=this.newObject3DInstance(),this.layer&&this.object.layers.set(this.layer),this.applyTranslation(),this.applyRotation(),this.applyScale(),this.afterInit()}updateParent(){this.parent&&(this.parent.addChild(this),this.rendererService.render())}applyRotation(){this.object.rotation.set(this.rotateX||0,this.rotateY||0,this.rotateZ||0,"XYZ")}applyTranslation(){this.object.position.set(this.translateX||0,this.translateY||0,this.translateZ||0)}applyScale(){this.object.scale.set(this.scaleX||0,this.scaleY||0,this.scaleZ||0)}addChild(object){this.object&&(this.childlren.push(object),this.object.add(object.getObject()),this.rendererService&&this.rendererService.render())}afterInit(){}removeChild(object){if(this.object&&object){const index=this.childlren.indexOf(object,0);index>-1&&this.childlren.splice(index,1),this.object.remove(object.getObject())}}getObject(){return this.object}ngAfterViewInit(){this.updateParent()}findByName(name){return this.recursionByName(this,name)}recursionByName(currentNode,name){if(currentNode.object&&currentNode.name===name)return currentNode;let node;return currentNode.childlren.some(child=>node=this.recursionByName(child,name)),node}getChildren(){return this.childlren}removeChildByName(name){this.childlren=this.childlren.filter(i=>i.name!==name)}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],AbstractObject3D.prototype,"rotateX",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],AbstractObject3D.prototype,"rotateY",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],AbstractObject3D.prototype,"rotateZ",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],AbstractObject3D.prototype,"translateX",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],AbstractObject3D.prototype,"translateY",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],AbstractObject3D.prototype,"translateZ",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AbstractObject3D.prototype,"scaleX",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AbstractObject3D.prototype,"scaleY",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AbstractObject3D.prototype,"scaleZ",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",String)],AbstractObject3D.prototype,"name",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AbstractObject3D.prototype,"layer",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Output)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AbstractObject3D.prototype,"changed",void 0),AbstractObject3D=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Directive)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__.a)?_a:Object,AbstractObject3D])],AbstractObject3D)},116:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(305),__webpack_require__(307),__webpack_require__(306);var _empty_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(224);__webpack_require__.d(__webpack_exports__,"a",(function(){return _empty_component__WEBPACK_IMPORTED_MODULE_3__.a}))},117:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractCamera}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);let AbstractCamera=class AbstractCamera{constructor(rendererService){this.rendererService=rendererService,this.zAxisUp=!1}ngOnInit(){this.createCamera(),this.layer?this.camera.layers.enable(this.layer):this.camera.layers.enableAll(),this.applyZAxisUp(),this.applyPosition(),this.rendererService.setCamera(this)}ngOnChanges(changes){let mustRerender=!1;["positionX","positionY","positionZ"].some(propName=>propName in changes)&&(this.applyPosition(),mustRerender=!0),mustRerender&&this.rendererService.render()}applyPosition(){this.camera&&this.camera.position.set(this.positionX||0,this.positionY||0,this.positionZ||0)}applyZAxisUp(){this.camera&&this.zAxisUp&&this.camera.up.set(0,0,1)}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],AbstractCamera.prototype,"positionX",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],AbstractCamera.prototype,"positionY",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],AbstractCamera.prototype,"positionZ",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AbstractCamera.prototype,"zAxisUp",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],AbstractCamera.prototype,"layer",void 0),AbstractCamera=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Directive)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__.a)?_a:Object])],AbstractCamera)},12:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return appliedMaterial})),__webpack_require__.d(__webpack_exports__,"b",(function(){return fix_center.a})),__webpack_require__.d(__webpack_exports__,"d",(function(){return scaleToFit})),__webpack_require__.d(__webpack_exports__,"c",(function(){return provideParent}));var three_module=__webpack_require__(2);function appliedMaterial(materialColor,materialName,depthWrite){const props={color:materialColor instanceof three_module.m?materialColor:new three_module.m(materialColor),side:three_module.q,depthWrite:void 0===depthWrite||depthWrite};return"lamb"===materialName?new three_module.Z(props):"basic"===materialName?new three_module.X(props):new three_module.ab(props)}var fix_center=__webpack_require__(397);function scaleToFit(group,max){const box=function calculateSize(group){const box=(new three_module.g).setFromObject(group);return new three_module.Mb(box.max.x-box.min.x,box.max.y-box.min.y,box.max.z-box.min.z)}(group),scaleX=max.x/box.x,scaleY=max.y/box.y,scaleZ=max.z/box.z;group.scale.set(scaleX<1?scaleX:1,scaleY<1?scaleY:1,scaleZ<1?scaleZ:1)}var core=__webpack_require__(0),abstract_object_3d=__webpack_require__(10);function provideParent(component,parentType){return{provide:parentType||abstract_object_3d.a,useExisting:Object(core.forwardRef)(()=>component)}}},1280:function(module,exports,__webpack_require__){"use strict";__webpack_require__(17),__webpack_require__(97),__webpack_require__(79),__webpack_require__(1281),__webpack_require__(1282),__webpack_require__(26),__webpack_require__(80);var _clientApi=__webpack_require__(102),_clientLogger=__webpack_require__(68),_configFilename=__webpack_require__(1283);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_configFilename.args||_configFilename.argTypes)&&_clientLogger.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify({args:_configFilename.args,argTypes:_configFilename.argTypes})),_configFilename.decorators&&_configFilename.decorators.forEach((function(decorator){return(0,_clientApi.addDecorator)(decorator,!1)})),_configFilename.loaders&&_configFilename.loaders.forEach((function(loader){return(0,_clientApi.addLoader)(loader,!1)})),(_configFilename.parameters||_configFilename.globals||_configFilename.globalTypes)&&(0,_clientApi.addParameters)(_objectSpread(_objectSpread({},_configFilename.parameters),{},{globals:_configFilename.globals,globalTypes:_configFilename.globalTypes}),!1),_configFilename.argTypesEnhancers&&_configFilename.argTypesEnhancers.forEach((function(enhancer){return(0,_clientApi.addArgTypesEnhancer)(enhancer)}))},1283:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"parameters",(function(){return parameters}));var parameters={layout:"fullscreen",style:{height:"50px"}}},1284:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(24).configure)([__webpack_require__(1285)],module,!1)}).call(this,__webpack_require__(209)(module))},1285:function(module,exports,__webpack_require__){var map={"./stories/all-in-one/infrastructure.stories.ts":1286,"./stories/all-in-one/virtual-city.stories.ts":1437,"./stories/dagre-layout/dagre-dynamic.stories.ts":1406,"./stories/dagre-layout/dagre-icons.stories.ts":1407,"./stories/dagre-layout/dagre-loop.stories.ts":1408,"./stories/dagre-layout/dagre-route.stories.ts":1409,"./stories/dagre-layout/dagre-sample.stories.ts":1410,"./stories/dynamic/editor.stories.ts":1411,"./stories/dynamic/for-loop.stories.ts":1412,"./stories/dynamic/ng-content.stories.ts":1413,"./stories/dynamic/routing.stories.ts":1414,"./stories/effect/blur.stories.ts":1415,"./stories/effect/dashed-draw.stories.ts":1416,"./stories/effect/depth-of-field.stories.ts":1417,"./stories/effect/dot-screen.stories.ts":1418,"./stories/effect/fog.stories.ts":1419,"./stories/other/animate.stories.ts":1420,"./stories/other/connector.stories.ts":1421,"./stories/other/loader.stories.ts":1422,"./stories/other/mesh.stories.ts":1423,"./stories/other/object.stories.mdx":1424,"./stories/other/object.stories.ts":1425,"./stories/other/performance.stories.ts":1438,"./stories/other/raycaster.stories.ts":1426,"./stories/other/server.stories.ts":1427,"./stories/other/video.stories.ts":1428,"./stories/ux/intro.stories.ts":1429,"./stories/ux/loader.stories.ts":1430,"./stories/ux/text.stories.ts":1431};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1285},1286:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Infrastructure",(function(){return Infrastructure}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(83),_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(50),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(21),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(63);let StorybookInfrastructureComponent=class StorybookInfrastructureComponent{constructor(animationService){this.animationService=animationService,this.animationIncrement=-.002,this.animationService.start()}};StorybookInfrastructureComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_6__.a)('\n<atft-empty [translateZ]="0.5" [translateY]="-40">\n\n  <atft-layer-actor [width]="180" [height]="45" [translateY]="30" label="On-Premise">\n  </atft-layer-actor>\n  <atft-layer-actor [width]="180" [height]="45" [translateY]="90" label="Security">\n  </atft-layer-actor>\n  <atft-layer-actor [width]="180" [height]="45" [translateY]="140" label="Frontend">\n  </atft-layer-actor>\n  <atft-layer-actor [width]="180" [height]="45" [translateY]="190" label="Backend">\n  </atft-layer-actor>\n  <atft-layer-actor [width]="180" [height]="45" [translateY]="240" label="Storage">\n  </atft-layer-actor>\n\n  <atft-empty>\n    \x3c!-- Servers / Nodes: --\x3e\n    <atft-server-compact-actor #ad1 label="Active Directory" [translateY]="30" [translateX]="-60" [icon]="icon">\n    </atft-server-compact-actor>\n    <atft-server-compact-actor #ad2 label="Active Directory (Replica)" [translateY]="90" [translateX]="-60" icon="video_settings">\n    </atft-server-compact-actor>\n    <atft-workstation-actor #ws1 [label]="label" [translateY]="30" [translateX]="0"\n       videoSrc="https://raw.githubusercontent.com/makimenko/files/master/angular-template-for-threejs/videos/ui/retro_futuristic_ui_360p.mp4">\n    </atft-workstation-actor>\n\n    <atft-server-compact-actor #lb label="Load Balancer" [translateY]="90" [translateX]="-0" icon="a:sitemap-solid">\n    </atft-server-compact-actor>\n    <atft-server-icon-actor label="Firewall" [translateY]="90" [translateX]="20" icon="lock">\n    </atft-server-icon-actor>\n    <atft-server-icon-actor label="Auto-Scaling" [translateY]="90" [translateX]="40" icon="a:external-link-alt-solid">\n    </atft-server-icon-actor>\n\n    <atft-server-stand-actor #fs1 label="Frontend Server 1" [translateY]="140" [translateX]="-40" icon="a:grid-world">\n    </atft-server-stand-actor>\n    <atft-server-stand-actor #fs2 label="Frontend Server 2" [translateY]="140" [translateX]="40" icon="connected_tv">\n    </atft-server-stand-actor>\n    <atft-server-icon-actor label="Application Insights" [translateY]="140" [translateX]="0" [icon]="icon">\n    </atft-server-icon-actor>\n\n    <atft-server-stand-actor #bs1 label="Backend Server 1" [translateY]="190" [translateX]="-40" icon="account_tree">\n    </atft-server-stand-actor>\n    <atft-server-stand-actor #bs2 label="Backend Server 2" [translateY]="190" [translateX]="40" icon="account_tree">\n    </atft-server-stand-actor>\n    <atft-server-icon-actor label="Cloud Bursting Enabled" [translateY]="190" [translateX]="0" icon="a:upload">\n    </atft-server-icon-actor>\n\n    <atft-server-barrel-actor #db1 label="DB Cluster 1" [translateY]="240" [translateX]="-40" icon="settings_backup_restore">\n    </atft-server-barrel-actor>\n    <atft-server-barrel-actor #db2 label="DB Cluster 2" [translateY]="240" [translateX]="40" icon="settings_backup_restore">\n    </atft-server-barrel-actor>\n    <atft-server-icon-actor label="In-Memory Cache Enabled" [translateY]="240" [translateX]="0" icon="a:border-none-solid">\n    </atft-server-icon-actor>\n\n    \x3c!-- Connectors / Edges: --\x3e\n    <atft-empty [translateZ]="0.1">\n      <atft-line-connector [source]="ad1" [target]="ad2" materialColor="#ffffff" [translateZ]="1" [animated]="true">\n      </atft-line-connector>\n      <atft-line-connector [source]="ad2" [target]="lb" materialColor="#ffffff" [translateZ]="1" [animated]="true">\n      </atft-line-connector>\n      <atft-line-connector [source]="ws1" [target]="lb" materialColor="#ffffff" [translateZ]="1" [animated]="true">\n      </atft-line-connector>\n\n      <atft-line-connector [source]="lb" [target]="fs1" materialColor="#ffffff" [translateZ]="1" [animated]="true">\n      </atft-line-connector>\n      <atft-line-connector [source]="lb" [target]="fs2" materialColor="#ff1111" [translateZ]="1" [animated]="true">\n      </atft-line-connector>\n\n\n      <atft-line-connector [source]="fs1" [target]="bs1" materialColor="#ffffff" [translateZ]="1" [animated]="true">\n          [transparent]="true" [animated]="true">\n      </atft-line-connector>\n      <atft-line-connector [source]="fs2" [target]="bs2" materialColor="#ffffff" [translateZ]="1" [animated]="true">\n      </atft-line-connector>\n\n      <atft-line-connector [source]="bs1" [target]="db1" materialColor="#ffffff" [translateZ]="1" [animated]="true">\n      </atft-line-connector>\n      <atft-line-connector [source]="bs2" [target]="db2" materialColor="#ffffff" [translateZ]="1" [animated]="true">\n      </atft-line-connector>\n\n     </atft-empty>\n   </atft-empty>\n</atft-empty>\n  ')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_4__.a&&_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_4__.a)?_a:Object])],StorybookInfrastructureComponent),__webpack_exports__.default={title:"All-in-One/Infrastructure",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_5__.a,_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.a]})],args:{icon:"a:idea",label:"Workstation"},argTypes:{icon:{description:"Please choose SVG file from assets",control:{type:"select",options:["a:idea","a:upload","a:grid-world","md:alarm_on","alarm_off"]}},label:{description:"Please choose title of workstation",control:{type:"text"}}}};const Infrastructure=args=>({component:StorybookInfrastructureComponent,props:args});Infrastructure.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookInfrastructureComponent,\n  props: args\n})"}},Infrastructure.parameters)},1406:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Dynamic",(function(){return Dynamic}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(83),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63),_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(45);let StorybookLoopComponent=class StorybookLoopComponent{constructor(animationService){this.animationService=animationService,this.animationService.start()}};StorybookLoopComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)('\n    <atft-dagre-layout>\n      <atft-dagre-yaml-parser [yaml]="yaml" svgLocation="https://raw.githubusercontent.com/material-icons/material-icons/master/svg/">\n      </atft-dagre-yaml-parser>\n    </atft-dagre-layout>\n')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a)?_a:Object])],StorybookLoopComponent),__webpack_exports__.default={title:"Dagre Layout/Dynamic",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__.a,_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.a]})],args:{yaml:"compositions:\n  - name: data\n    label: Data Layer\n    composition: backend\n  - name: backend\n    label: Backend\n    border: frame\nnodes:\n  - name: user\n    model: user\n  - name: workstation\n    type: workstation\n  - name: spa\n    type: compact\n    icon: connected_tv\n  - name: api\n    composition: backend\n    icon: video_settings\n  - name: db1\n    label: PostgreSQL\n    composition: data\n    type: barrel\n  - name: db2\n    label: MongoDB\n    composition: data\nedges:\n  - from: user\n    to: workstation\n  - from: workstation\n    to: spa\n  - from: spa\n    to: api\n    type: sequence\n  - from: api\n    to: db2\n    type: association\n  - from: api\n    to: db1\n    type: message\n    color: 0xff0000\n"}};const Dynamic=args=>({component:StorybookLoopComponent,props:args});Dynamic.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookLoopComponent,\n  props: args\n})"}},Dynamic.parameters)},1407:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Icons",(function(){return Icons}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(83),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63),_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(45);let StorybookIconsComponent=class StorybookIconsComponent{constructor(animationService){this.animationService=animationService,this.animationService.start()}};StorybookIconsComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)('\n    <atft-dagre-layout>\n\n      <atft-dagre-node name="md1">\n        <atft-server-icon-actor icon="md:alarm_on" label="Material Design"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="md2">\n        <atft-server-icon-actor icon="md:anchor" label="Material Design"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="md3">\n        <atft-server-icon-actor icon="md:camera" label="Material Design"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-edge from="md1" to="md2"></atft-dagre-edge>\n      <atft-dagre-edge from="md2" to="md3"></atft-dagre-edge>\n\n      <atft-dagre-node name="a1">\n        <atft-server-icon-actor icon="a:idea" label="Site Assets"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="a2">\n        <atft-server-icon-actor icon="a:upload" label="Site Assets"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="a3">\n        <atft-server-icon-actor icon="a:users-solid" label="Site Assets"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-edge from="a1" to="a2"></atft-dagre-edge>\n      <atft-dagre-edge from="a2" to="a3"></atft-dagre-edge>\n\n\n      <atft-dagre-node name="az1">\n        <atft-server-icon-actor icon="az:Key-Vaults" label="Azure Cloud Icons"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="az2">\n        <atft-server-icon-actor icon="az:App-Services" label="Azure Cloud Icons"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="az3">\n        <atft-server-icon-actor icon="az:Service-Bus" label="Azure Cloud Icons"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-edge from="az1" to="az2"></atft-dagre-edge>\n      <atft-dagre-edge from="az2" to="az3"></atft-dagre-edge>\n\n\n      <atft-dagre-node name="g1">\n        <atft-server-icon-actor icon="g:AppEngine" label="Google Cloud Icons"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="g2">\n        <atft-server-icon-actor icon="g:Stackdriver" label="Google Cloud Icons"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="g3">\n        <atft-server-icon-actor icon="g:persistent-disk" label="Google Cloud Icons"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-edge from="g1" to="g2"></atft-dagre-edge>\n      <atft-dagre-edge from="g2" to="g3"></atft-dagre-edge>\n\n      <atft-dagre-node name="aws1">\n        <atft-server-icon-actor icon="aws:DynamoDB" label="AWS Icons"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="aws2">\n        <atft-server-icon-actor icon="aws:Direct-Connect-Gateway" label="AWS Icons"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="aws3">\n        <atft-server-icon-actor icon="aws:EC2_C5n-Instance" label="AWS Icons"></atft-server-icon-actor>\n      </atft-dagre-node>\n      <atft-dagre-edge from="aws1" to="aws2"></atft-dagre-edge>\n      <atft-dagre-edge from="aws2" to="aws3"></atft-dagre-edge>\n\n    </atft-dagre-layout>\n')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a)?_a:Object])],StorybookIconsComponent),__webpack_exports__.default={title:"Dagre Layout/Icons",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__.a,_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.a]})]};const Icons=args=>({component:StorybookIconsComponent,props:args});Icons.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookIconsComponent,\n  props: args\n})"}},Icons.parameters)},1408:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Loop",(function(){return Loop}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(83),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63),_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(45);let StorybookLoopComponent=class StorybookLoopComponent{constructor(animationService){this.animationService=animationService,this.numDatabases=1,this.animationService.start()}fakeArray(length){if(length>=0)return new Array(length)}};StorybookLoopComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)('\n    <atft-dagre-layout>\n      <atft-dagre-node *ngFor="let x of fakeArray(numDatabases)" composition="data">\n        <atft-model-actor model="fingerprint" label="db"></atft-model-actor>\n      </atft-dagre-node>\n\n      <atft-dagre-composition name="data" label="Data"></atft-dagre-composition>\n    </atft-dagre-layout>\n')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a)?_a:Object])],StorybookLoopComponent),__webpack_exports__.default={title:"Dagre Layout/Loop",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__.a,_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.a]})],args:{numDatabases:0}};const Loop=args=>({component:StorybookLoopComponent,props:args});Loop.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookLoopComponent,\n  props: args\n})"}},Loop.parameters)},1409:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"RouterSample",(function(){return RouterSample}));var _a,_b,SpaDetailsPageComponent_1,_c,_d,ApiDetailsPageComponent_1,_e,_f,NoDetailsPageComponent_1,_g,_h,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(83),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63),_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(45),_projects_atft_src_lib_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(12),_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(20),_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(38),_angular_router__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(156),_angular_platform_browser__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(222),_angular_common__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(9);let StorybookRouterMainComponent=class StorybookRouterMainComponent{constructor(animationService,router){this.animationService=animationService,this.router=router,this.animationService.start()}showSpaDetails(){console.log("*****************************"),this.router.navigate(["spaDetails"])}showApiDetails(){console.log("*****************************"),this.router.navigate(["apiDetails"])}};StorybookRouterMainComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)('\n    <atft-dagre-layout>\n        <atft-dagre-node name="spa">\n            <atft-server-stand-actor label="spa" (actorClick)="showSpaDetails()"></atft-server-stand-actor>\n        </atft-dagre-node>\n        <atft-dagre-node name="api">\n            <atft-server-stand-actor label="api" (actorClick)="showApiDetails()"></atft-server-stand-actor>\n        </atft-dagre-node>\n\n        <atft-dagre-edge from="spa" to="api"></atft-dagre-edge>\n\n        <router-outlet></router-outlet>\n    </atft-dagre-layout>\n')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a)?_a:Object,"function"==typeof(_b=void 0!==_angular_router__WEBPACK_IMPORTED_MODULE_10__.a&&_angular_router__WEBPACK_IMPORTED_MODULE_10__.a)?_b:Object])],StorybookRouterMainComponent);let SpaDetailsPageComponent=SpaDetailsPageComponent_1=class SpaDetailsPageComponent extends _projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_8__.c{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,console.log("SpaDetailsPageComponent.constructor",parent)}};SpaDetailsPageComponent=SpaDetailsPageComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-spa-details-page",providers:[Object(_projects_atft_src_lib_util__WEBPACK_IMPORTED_MODULE_7__.c)(SpaDetailsPageComponent_1)],template:'\n    <atft-dagre-node name="ad">\n      <atft-server-compact-actor label="Active Directory"></atft-server-compact-actor>\n    </atft-dagre-node>\n    <atft-dagre-edge from="spa" to="ad"></atft-dagre-edge>\n  '}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_c=void 0!==_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_9__.a&&_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_9__.a)?_c:Object,"function"==typeof(_d=void 0!==_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_8__.b&&_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_8__.b)?_d:Object])],SpaDetailsPageComponent);let ApiDetailsPageComponent=ApiDetailsPageComponent_1=class ApiDetailsPageComponent extends _projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_8__.c{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,console.log("ApiDetailsPageComponent.constructor",parent)}};ApiDetailsPageComponent=ApiDetailsPageComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-api-details-page",providers:[Object(_projects_atft_src_lib_util__WEBPACK_IMPORTED_MODULE_7__.c)(ApiDetailsPageComponent_1)],template:'\n    <atft-dagre-node name="db1">\n      <atft-server-barrel-actor label="PostgreSQL"></atft-server-barrel-actor>\n    </atft-dagre-node>\n    <atft-dagre-node name="db2">\n      <atft-server-barrel-actor label="MongoDB"></atft-server-barrel-actor>\n    </atft-dagre-node>\n    <atft-dagre-edge from="api" to="db1"></atft-dagre-edge>\n    <atft-dagre-edge from="api" to="db2"></atft-dagre-edge>\n  '}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_e=void 0!==_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_9__.a&&_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_9__.a)?_e:Object,"function"==typeof(_f=void 0!==_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_8__.b&&_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_8__.b)?_f:Object])],ApiDetailsPageComponent);let NoDetailsPageComponent=NoDetailsPageComponent_1=class NoDetailsPageComponent extends _projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_8__.c{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,console.log("NoDetailsPageComponent.constructor",parent)}};NoDetailsPageComponent=NoDetailsPageComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-no-details-page",providers:[Object(_projects_atft_src_lib_util__WEBPACK_IMPORTED_MODULE_7__.c)(NoDetailsPageComponent_1)],template:"\n\n  "}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_g=void 0!==_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_9__.a&&_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_9__.a)?_g:Object,"function"==typeof(_h=void 0!==_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_8__.b&&_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_8__.b)?_h:Object])],NoDetailsPageComponent);const routes=[{path:"",redirectTo:"/noDetails",pathMatch:"full"},{path:"noDetails",component:NoDetailsPageComponent},{path:"spaDetails",component:SpaDetailsPageComponent},{path:"apiDetails",component:ApiDetailsPageComponent},{path:"**",redirectTo:"noDetails"}];let StoryRoutingModule=class StoryRoutingModule{};StoryRoutingModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({imports:[_angular_router__WEBPACK_IMPORTED_MODULE_10__.b.forRoot(routes)],exports:[_angular_router__WEBPACK_IMPORTED_MODULE_10__.b]})],StoryRoutingModule);let StoryModule=class StoryModule{};StoryModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[StorybookRouterMainComponent,SpaDetailsPageComponent,ApiDetailsPageComponent,NoDetailsPageComponent],imports:[_angular_platform_browser__WEBPACK_IMPORTED_MODULE_11__.BrowserModule,StoryRoutingModule,_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__.a,_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.a],providers:[{provide:_angular_common__WEBPACK_IMPORTED_MODULE_12__.a,useValue:"/"}],bootstrap:[StorybookRouterMainComponent]})],StoryModule),__webpack_exports__.default={title:"Dagre Layout/Router Sample",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__.a,_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.a,StoryModule]})]};const RouterSample=args=>({component:StorybookRouterMainComponent,props:args});RouterSample.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookRouterMainComponent,\n  props: args\n})"}},RouterSample.parameters)},1410:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Simple",(function(){return Simple})),__webpack_require__.d(__webpack_exports__,"Composition",(function(){return Composition}));var _a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(83),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63),_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(45);let StorybookDagreComponent=class StorybookDagreComponent{constructor(animationService){this.animationService=animationService,this.animationService.start()}};StorybookDagreComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)('\n    <atft-dagre-layout [align]="align" [rankdir]="rankdir" [ranker]="ranker"\n      [nodesep]="nodesep" [edgesep]="edgesep" [ranksep]="ranksep"\n      [marginx]="marginx" [marginy]="marginy">\n\n      <atft-dagre-node name="spa" >\n        <atft-server-compact-actor label="SPA"></atft-server-compact-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="api" >\n        <atft-server-stand-actor label="API"></atft-server-stand-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="kv">\n        <atft-server-compact-actor label="Key Vault"></atft-server-compact-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="db1">\n        <atft-server-barrel-actor  label="PostgreSQL"></atft-server-barrel-actor>\n      </atft-dagre-node>\n      <atft-dagre-node name="db2">\n        <atft-server-barrel-actor  label="MongoDB"></atft-server-barrel-actor>\n      </atft-dagre-node>\n\n      <atft-dagre-edge from="spa" to="api"></atft-dagre-edge>\n      <atft-dagre-edge from="api" to="db1"></atft-dagre-edge>\n      <atft-dagre-edge from="api" to="db2"></atft-dagre-edge>\n      <atft-dagre-edge from="api" to="kv"></atft-dagre-edge>\n\n    </atft-dagre-layout>\n')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a)?_a:Object])],StorybookDagreComponent);let StorybookDagreCompositionComponent=class StorybookDagreCompositionComponent{constructor(animationService){this.animationService=animationService,this.animationService.start()}};StorybookDagreCompositionComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)('\n    <atft-dagre-layout [align]="align" [rankdir]="rankdir" [ranker]="ranker"\n      [nodesep]="nodesep" [edgesep]="edgesep" [ranksep]="ranksep"\n      [marginx]="marginx" [marginy]="marginy">\n\n      <atft-dagre-composition name="presentation" label="Presentation tier"></atft-dagre-composition>\n      <atft-dagre-composition name="application" label="Application tier"></atft-dagre-composition>\n      <atft-dagre-composition name="data" label="Data tier" border="frame"></atft-dagre-composition>\n\n      <atft-dagre-node name="spa" composition="presentation">\n        <atft-server-compact-actor label="spa"></atft-server-compact-actor>\n      </atft-dagre-node>\n\n      <atft-dagre-node name="api" composition="application">\n        <atft-server-stand-actor label="api" icon="video_settings"\n        ></atft-server-stand-actor>\n      </atft-dagre-node>\n\n      <atft-dagre-node name="db1" composition="data">\n        <atft-server-barrel-actor label="PostgreSQL"></atft-server-barrel-actor>\n      </atft-dagre-node>\n\n      <atft-dagre-node name="db2" composition="data">\n        <atft-server-barrel-actor label="MongoDB"></atft-server-barrel-actor>\n      </atft-dagre-node>\n\n      <atft-dagre-edge from="spa" to="api"></atft-dagre-edge>\n      <atft-dagre-edge from="api" to="db1"></atft-dagre-edge>\n      <atft-dagre-edge from="api" to="db2"></atft-dagre-edge>\n\n    </atft-dagre-layout>\n\n')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_b=void 0!==_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_6__.a)?_b:Object])],StorybookDagreCompositionComponent),__webpack_exports__.default={title:"Dagre Layout/Sample",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__.a,_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.a]})],args:{align:"DR",rankdir:"TB",nodesep:20,edgesep:1,ranksep:20,marginx:0,marginy:0,ranker:"network-simplex"},argTypes:{align:{description:"Alignment for rank nodes. Can be UL, UR, DL, or DR, where U = up, D = down, L = left, and R = right.",control:{type:"select",options:["UL","UR","DL","DR"]}},rankdir:{description:"Direction for rank nodes. Can be TB, BT, LR, or RL, where V = top, B = bottom, L = left, and R = right.",control:{type:"select",options:["TB","BT","LR","RL"]}},ranker:{description:"Type of algorithm to assigns a rank to each node in the input graph. Possible values: network-simplex, tight-tree or longest-path",control:{type:"select",options:["network-simplex","tight-tree","longest-path"]}}}};const Simple=args=>({component:StorybookDagreComponent,props:args}),Composition=args=>({component:StorybookDagreCompositionComponent,props:args});Simple.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookDagreComponent,\n  props: args\n})"}},Simple.parameters),Composition.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookDagreCompositionComponent,\n  props: args\n})"}},Composition.parameters)},1411:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Editor",(function(){return Editor}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(83),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21);let StorybookEditorComponent=class StorybookEditorComponent{constructor(resolver){this.resolver=resolver,this.x=0,this.y=0}onGridEnter(event){this.x=event.array[0],this.y=event.array[1]}onGridClick(event){console.log("StorybookEditorComponent.onGridClick",event);const factory=this.resolver.resolveComponentFactory(_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.b),componentRef=this.gridcontainer.createComponent(factory);componentRef.instance.label=this.label,componentRef.instance.icon=this.icon,componentRef.instance.translateX=this.x,componentRef.instance.translateY=this.y}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ViewChild)("gridcontainer",{read:_angular_core__WEBPACK_IMPORTED_MODULE_1__.ViewContainerRef}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],StorybookEditorComponent.prototype,"gridcontainer",void 0),StorybookEditorComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:'\n    <atft-renderer-canvas>\n      <atft-orthographic-camera [zAxisUp]="true" [positionX]=50 [positionY]=-50 [positionZ]=50 [zoom]="8"\n                                atft-raycaster-camera atft-raycaster-enable>\n      </atft-orthographic-camera>\n      <atft-scene name="scene" background="0xa0a0a0">\n        <atft-fog color="#a0a0a0" near="80" far="500"></atft-fog>\n        <atft-plane-mesh name="ground" [height]="2000" [width]="2000" materialColor="#999999" [depthWrite]="true" [castShadow]="false"\n                         [receiveShadow]="true" heightSegments="10" widthSegments="10" [translateZ]="-0.1">\n        </atft-plane-mesh>\n        <atft-hemisphere-light name="hemi-light" skyColor="#ffffff" groundColor="#ffffff" [intensity]="0.5"\n                               [translateX]="-20" [translateY]="-20" [translateZ]="100">\n        </atft-hemisphere-light>\n        <atft-point-light name="point-light" [intensity]="0.2" [translateX]="-50" [translateY]="-50" [translateZ]="50"\n                          [castShadow]="true"></atft-point-light>\n\n        <atft-grid-actor iterationsX="30" iterationsY="20" offset="1.1" (gridEnter)="onGridEnter($event)" (gridClick)="onGridClick($event)">\n          <atft-frame-mesh [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                           [translateX]="x" [translateY]="y">\n          </atft-frame-mesh>\n          <template #gridcontainer>\n          </template>\n        </atft-grid-actor>\n\n      </atft-scene>\n    </atft-renderer-canvas>\n  '}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_angular_core__WEBPACK_IMPORTED_MODULE_1__.ComponentFactoryResolver&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.ComponentFactoryResolver)?_a:Object])],StorybookEditorComponent),__webpack_exports__.default={title:"Dynamic/Editor",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__.a,_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.a],entryComponents:[_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.b]})],args:{icon:"a:idea",label:"Workstation"},argTypes:{icon:{description:"Please choose SVG file from assets",control:{type:"select",options:["a:idea","a:upload","a:grid-world","md:alarm_on","alarm_off"]}},label:{description:"Please choose title of workstation",control:{type:"text"}}}};const Editor=args=>({component:StorybookEditorComponent,props:args});Editor.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookEditorComponent,\n  props: args\n})"}},Editor.parameters)},1412:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ForLoop",(function(){return ForLoop}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61);let StorybookDynamicComponent=class StorybookDynamicComponent{fakeArray(length){if(length>=0){const arr=new Array(length);for(let i=0;i<arr.length;i++)arr[i]=10*i;return arr}}};StorybookDynamicComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n      <atft-empty name="emptyObj">\n        <div>\n            <atft-sphere-mesh *ngFor="let x of fakeArray(numObjects)" [radius]="4" [translateY]="x" name="dynamicObj"\n                widthSegments="64" hightSegments="64">\n            </atft-sphere-mesh>\n        </div>\n      </atft-empty>\n  ')})],StorybookDynamicComponent),__webpack_exports__.default={title:"Dynamic/For Loop",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__.a]})],args:{numObjects:2},argTypes:{numObjects:{control:{type:"range",min:0,max:5,step:1}}}};const ForLoop=args=>({component:StorybookDynamicComponent,props:args});ForLoop.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookDynamicComponent,\n  props: args\n})"}},ForLoop.parameters)},1413:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NgContent",(function(){return NgContent}));var StorybookWrapperComponent_1,_a,_b,StorybookEmbeddedComponent_1,_c,_d,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_projects_atft_src_lib_object_abstract_object_3d__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),_projects_atft_src_lib_object_helper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(116),_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(38),_projects_atft_src_lib_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(12),_projects_atft_src_lib_object_content_projection_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(251);let StorybookWrapperComponent=StorybookWrapperComponent_1=class StorybookWrapperComponent extends _projects_atft_src_lib_object_content_projection_component__WEBPACK_IMPORTED_MODULE_8__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,console.log("StorybookWrapperComponent.constructor",parent)}};StorybookWrapperComponent=StorybookWrapperComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-storybook-wrapper",providers:[Object(_projects_atft_src_lib_util__WEBPACK_IMPORTED_MODULE_7__.c)(StorybookWrapperComponent_1)],template:'\n    <atft-orbit-controls rotateSpeed=1 zoomSpeed=1.2>\n      <atft-renderer-canvas>\n        <atft-perspective-camera positionX=10 [positionY]=50 [positionZ]=50></atft-perspective-camera>\n        <atft-scene #contentProjection>\n          <atft-axes-helper [size]=200></atft-axes-helper>\n          <atft-grid-helper [size]=100 [divisions]=10></atft-grid-helper>\n          <atft-point-light [intensity]="0.9" [distance]="1000" [translateX]=50 [translateY]=50\n                            [translateZ]=50></atft-point-light>\n          \x3c!-- Why it\'s not working? --\x3e\n          <ng-content></ng-content>\n        </atft-scene>\n      </atft-renderer-canvas>\n    </atft-orbit-controls>\n  '}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_6__.a)?_a:Object,"function"==typeof(_b=void 0!==_projects_atft_src_lib_object_abstract_object_3d__WEBPACK_IMPORTED_MODULE_4__.a&&_projects_atft_src_lib_object_abstract_object_3d__WEBPACK_IMPORTED_MODULE_4__.a)?_b:Object])],StorybookWrapperComponent);let StorybookEmbeddedComponent=StorybookEmbeddedComponent_1=class StorybookEmbeddedComponent extends _projects_atft_src_lib_object_helper__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,console.log("StorybookEmbeddedComponent.constructor",parent)}};StorybookEmbeddedComponent=StorybookEmbeddedComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-storybook-embedded",providers:[Object(_projects_atft_src_lib_util__WEBPACK_IMPORTED_MODULE_7__.c)(StorybookEmbeddedComponent_1)],template:'\n    <app-storybook-wrapper>\n      <atft-cylinder-mesh [radiusTop]="2" [radiusBottom]="3" [height]="10" [radialSegments]="36" [heightSegments]="1"\n                          material="lamb" materialColor="#ff0000" [translateZ]="10">\n      </atft-cylinder-mesh>\n    </app-storybook-wrapper>\n  '}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_c=void 0!==_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_6__.a)?_c:Object,"function"==typeof(_d=void 0!==_projects_atft_src_lib_object_abstract_object_3d__WEBPACK_IMPORTED_MODULE_4__.a&&_projects_atft_src_lib_object_abstract_object_3d__WEBPACK_IMPORTED_MODULE_4__.a)?_d:Object])],StorybookEmbeddedComponent),__webpack_exports__.default={title:"Dynamic/Ng Content",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__.a],declarations:[StorybookEmbeddedComponent,StorybookWrapperComponent]})]};const NgContent=args=>({component:StorybookEmbeddedComponent,props:args});NgContent.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookEmbeddedComponent,\n  props: args\n})"}},NgContent.parameters)},1414:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Routing",(function(){return Routing}));var _a,FirstPageComponent_1,_b,_c,SecondPageComponent_1,_d,_e,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_angular_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(156),_angular_platform_browser__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(222),_angular_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(63),_projects_atft_src_lib_object_helper__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(116),_projects_atft_src_lib_util__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(12),_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(38),_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(20);let MainComponent=class MainComponent{constructor(router){this.router=router}chooseFirst(){console.log("Choose first"),this.router.navigate(["first"])}chooseSecond(){console.log("Choose second"),this.router.navigate(["second"])}};MainComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-main",template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_7__.a)('\n    <atft-empty name="main">\n      <atft-empty name="selector">\n        <atft-box-mesh name="box1" atft-raycaster-group (click)="chooseFirst()" [height]="20" [width]="20" [depth]="20" [translateZ]="10">\n        </atft-box-mesh>\n        <atft-box-mesh name="box2" atft-raycaster-group (click)="chooseSecond()" [height]="20" [width]="20" [depth]="20" [translateZ]="10" [translateX]="30">\n        </atft-box-mesh>\n      </atft-empty>\n      <router-outlet></router-outlet>\n    </atft-empty>\n')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_angular_router__WEBPACK_IMPORTED_MODULE_4__.a&&_angular_router__WEBPACK_IMPORTED_MODULE_4__.a)?_a:Object])],MainComponent);let FirstPageComponent=FirstPageComponent_1=class FirstPageComponent extends _projects_atft_src_lib_object_helper__WEBPACK_IMPORTED_MODULE_8__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,console.log("FirstPageComponent.constructor",parent)}};FirstPageComponent=FirstPageComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-first-page",providers:[Object(_projects_atft_src_lib_util__WEBPACK_IMPORTED_MODULE_9__.c)(FirstPageComponent_1)],template:'\n    <atft-box-mesh name="first-box" [height]="10" [width]="10" [depth]="10" [translateZ]="30">\n    </atft-box-mesh>\n  '}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_b=void 0!==_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_10__.a&&_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_10__.a)?_b:Object,"function"==typeof(_c=void 0!==_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_11__.b&&_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_11__.b)?_c:Object])],FirstPageComponent);let SecondPageComponent=SecondPageComponent_1=class SecondPageComponent extends _projects_atft_src_lib_object_helper__WEBPACK_IMPORTED_MODULE_8__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,console.log("SecondPageComponent.constructor",parent)}};SecondPageComponent=SecondPageComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-second-page",providers:[Object(_projects_atft_src_lib_util__WEBPACK_IMPORTED_MODULE_9__.c)(SecondPageComponent_1)],template:'\n    <atft-box-mesh name="second-box" [height]="10" [width]="10" [depth]="10" [translateZ]="30" [translateX]="30">\n    </atft-box-mesh>\n  '}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_d=void 0!==_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_10__.a&&_projects_atft_src_lib_renderer__WEBPACK_IMPORTED_MODULE_10__.a)?_d:Object,"function"==typeof(_e=void 0!==_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_11__.b&&_projects_atft_src_lib_object__WEBPACK_IMPORTED_MODULE_11__.b)?_e:Object])],SecondPageComponent);const routes=[{path:"",redirectTo:"/first",pathMatch:"full"},{path:"first",component:FirstPageComponent},{path:"second",component:SecondPageComponent},{path:"**",redirectTo:"first"}];let StoryRoutingModule=class StoryRoutingModule{};StoryRoutingModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({imports:[_angular_router__WEBPACK_IMPORTED_MODULE_4__.b.forRoot(routes)],exports:[_angular_router__WEBPACK_IMPORTED_MODULE_4__.b]})],StoryRoutingModule);let StoryModule=class StoryModule{};StoryModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[MainComponent,FirstPageComponent,SecondPageComponent],imports:[_angular_platform_browser__WEBPACK_IMPORTED_MODULE_5__.BrowserModule,StoryRoutingModule,_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__.a],providers:[{provide:_angular_common__WEBPACK_IMPORTED_MODULE_6__.a,useValue:"/"}],bootstrap:[MainComponent]})],StoryModule),__webpack_exports__.default={title:"Dynamic/Routing",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[StoryModule],declarations:[]})]};const Routing=args=>({component:MainComponent,props:args});Routing.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: MainComponent,\n  props: args\n})"}},Routing.parameters)},1415:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Blur",(function(){return Blur}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_scene_wrapper_effects_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(198);let StorybookDotScreenComponent=class StorybookDotScreenComponent{};StorybookDotScreenComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Component)({template:Object(_scene_wrapper_effects_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n    <atft-effect-composer *ngIf="enable">\n    <atft-blur *ngIf="enable" ></atft-blur>\n    </atft-effect-composer>\n  ')})],StorybookDotScreenComponent),__webpack_exports__.default={title:"Effect/Blur",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__.a]})],args:{enable:!0,background:"0xFFFFFF"},argTypes:{enable:{control:{type:"boolean"}},background:{control:{type:"select",options:["0xFFFFFF","0xDDDDDD","0xAA0000","0x00AA00","0x0000AA"]}}}};const Blur=args=>({component:StorybookDotScreenComponent,props:args});Blur.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookDotScreenComponent,\n  props: args\n})"}},Blur.parameters)},1416:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DashedDraw",(function(){return DashedDraw}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_scene_wrapper_performance_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(233);let StorybookDashedDrawComponent=class StorybookDashedDrawComponent{};StorybookDashedDrawComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Component)({template:Object(_scene_wrapper_performance_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n    <atft-text-mesh\n        atft-dashed-draw materialColor="#00EE00" dashColor="#00FF00"\n        [initialOpacity]="0.0" [targetOpacity]="0.1"\n        text="Hello world"\n    ></atft-text-mesh>\n\n    <atft-sphere-mesh\n        atft-dashed-draw materialColor="#0000FF" dashColor="#0000FF"\n        [targetOpacity]="0.1"\n        [radius]="10" [hightSegments]="10" [widthSegments]="10"\n        [translateY]="20"\n    ></atft-sphere-mesh>\n\n    <atft-cylinder-mesh\n        atft-dashed-draw materialColor="#0000FF" dashColor="#0000FF"\n        [initialOpacity]="0.5" [hideDash]="true"\n        [height]="20" [heightSegments]="20" [radialSegments]="20"\n        [radiusBottom]="2" [radiusTop]="5"\n        [translateY]="20" [translateX]="20"\n    ></atft-cylinder-mesh>\n  ')})],StorybookDashedDrawComponent),__webpack_exports__.default={title:"Effect/Dashed Draw",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__.a]})]};const DashedDraw=args=>({component:StorybookDashedDrawComponent,props:args});DashedDraw.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookDashedDrawComponent,\n  props: args\n})"}},DashedDraw.parameters)},1417:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DepthOfField",(function(){return DepthOfField}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_scene_wrapper_effects_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(198);let StorybookDofComponent=class StorybookDofComponent{};StorybookDofComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Component)({template:Object(_scene_wrapper_effects_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n    <atft-effect-composer *ngIf="enable">\n        <atft-dof [focus]="focus" [aperture]="aperture" [maxblur]="maxblur"></atft-dof>\n    </atft-effect-composer>\n  ')})],StorybookDofComponent),__webpack_exports__.default={title:"Effect/Depth Of Field",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__.a]})],args:{enable:!0,background:"0xFFFFFF",focus:10,aperture:1e-4,maxblur:.005},argTypes:{enable:{control:{type:"boolean"}},background:{control:{type:"select",options:["0xFFFFFF","0xDDDDDD","0xAA0000","0x00AA00","0x0000AA"]}},focus:{control:{type:"range",min:1,max:3e3,step:10}},aperture:{control:{type:"range",min:0,max:5e-4,step:1e-5}},maxblur:{control:{type:"range",min:0,max:.05,step:.001}}}};const DepthOfField=args=>({component:StorybookDofComponent,props:args});DepthOfField.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookDofComponent,\n  props: args\n})"}},DepthOfField.parameters)},1418:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"DotScreen",(function(){return DotScreen}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_scene_wrapper_effects_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(198);let StorybookDotScreenComponent=class StorybookDotScreenComponent{};StorybookDotScreenComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Component)({template:Object(_scene_wrapper_effects_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n    <atft-effect-composer *ngIf="enable">\n    <atft-dot-screen *ngIf="enable" ></atft-dot-screen>\n    </atft-effect-composer>\n  ')})],StorybookDotScreenComponent),__webpack_exports__.default={title:"Effect/Dot Screen",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__.a]})],args:{enable:!0,background:"0xFFFFFF"},argTypes:{enable:{control:{type:"boolean"}},background:{control:{type:"select",options:["0xFFFFFF","0xDDDDDD","0xAA0000","0x00AA00","0x0000AA"]}}}};const DotScreen=args=>({component:StorybookDotScreenComponent,props:args});DotScreen.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookDotScreenComponent,\n  props: args\n})"}},DotScreen.parameters)},1419:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Fog",(function(){return Fog}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_scene_wrapper_effects_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(198);let StorybookFogComponent=class StorybookFogComponent{};StorybookFogComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Component)({template:Object(_scene_wrapper_effects_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n    <atft-effect-composer *ngIf="enable">\n        <atft-fog [near]="near" [far]="far" color="color"></atft-fog>\n    </atft-effect-composer>\n  ')})],StorybookFogComponent),__webpack_exports__.default={title:"Effect/Fog",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__.a]})],args:{enable:!0,background:"0xDDDDDD",color:"0xDDDDDD",near:10,far:200},argTypes:{enable:{control:{type:"boolean"}},background:{control:{type:"select",options:["0xFFFFFF","0xDDDDDD","0xAA0000","0x00AA00","0x0000AA"]}},color:{control:{type:"select",options:["0xFFFFFF","0xDDDDDD","0xAA0000","0x00AA00","0x0000AA"]}},near:{control:{type:"number",min:1,max:1e3}},far:{control:{type:"number",min:1,max:1e3}}}};const Fog=args=>({component:StorybookFogComponent,props:args});Fog.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookFogComponent,\n  props: args\n})"}},Fog.parameters)},1420:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Loop",(function(){return Loop})),__webpack_require__.d(__webpack_exports__,"Mixer",(function(){return Mixer})),__webpack_require__.d(__webpack_exports__,"ReactiveGrid",(function(){return ReactiveGrid}));var _a,_b,_c,_d,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61),_projects_atft_src_lib_object_mesh_box_mesh_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(172),_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(50),three__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(63);let StorybookLoopComponent=class StorybookLoopComponent{constructor(animationService){this.animationService=animationService,this.k=0}ngAfterViewInit(){this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate),this.animationService.start()}animate(){this.k+=.02,this.box.rotateX=this.k,this.box.rotateY=2*-this.k,this.box.rotateZ=3.3*this.k,this.box.applyRotation()}ngOnDestroy(){var _a;null===(_a=this.animation)||void 0===_a||_a.unsubscribe()}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.ViewChild)(_projects_atft_src_lib_object_mesh_box_mesh_component__WEBPACK_IMPORTED_MODULE_5__.a,{static:!1}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],StorybookLoopComponent.prototype,"box",void 0),StorybookLoopComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n  <atft-box-mesh [height]="10" [width]="10" [depth]="10" material="phong" materialColor="#ffffff">\n  </atft-box-mesh>\n  ')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_6__.a)?_a:Object])],StorybookLoopComponent);let StorybookMixerComponent=class StorybookMixerComponent{constructor(animationService){this.animationService=animationService,this.clock=new three__WEBPACK_IMPORTED_MODULE_7__.l}ngAfterViewInit(){this.boxObject=this.box.getObject();const positionKF=new three__WEBPACK_IMPORTED_MODULE_7__.Ob(".position",[0,1,2,4],[0,0,0,0,50,0,0,50,5,0,0,0]),helloClip=new three__WEBPACK_IMPORTED_MODULE_7__.c("Hello",4,[positionKF]);this.mixer=new three__WEBPACK_IMPORTED_MODULE_7__.d(this.boxObject);this.mixer.clipAction(helloClip).play(),this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate),this.animationService.start()}animate(){this.mixer&&this.mixer.update(this.clock.getDelta())}ngOnDestroy(){var _a;null===(_a=this.animation)||void 0===_a||_a.unsubscribe()}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.ViewChild)(_projects_atft_src_lib_object_mesh_box_mesh_component__WEBPACK_IMPORTED_MODULE_5__.a,{static:!1}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],StorybookMixerComponent.prototype,"box",void 0),StorybookMixerComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n  <atft-box-mesh [height]="10" [width]="10" [depth]="10" material="phong" materialColor="#ffffff">\n  </atft-box-mesh>\n  ')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_b=void 0!==_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_6__.a)?_b:Object])],StorybookMixerComponent);let StorybookReactiveGridComponent=class StorybookReactiveGridComponent{constructor(animationService){this.animationService=animationService,this.mixers=new Map,this.clock=new three__WEBPACK_IMPORTED_MODULE_7__.l;const mouseOverKeyFrame=new three__WEBPACK_IMPORTED_MODULE_7__.Ob(".position",[0,.2,.5],[0,0,0,0,0,1.5,0,0,1.4],three__WEBPACK_IMPORTED_MODULE_7__.F);this.mouseOverClip=new three__WEBPACK_IMPORTED_MODULE_7__.c("Mouse over",.5,[mouseOverKeyFrame])}mouseEnter(event){const boxComponent=event.component;if(boxComponent){const mixer=this.mixers.get(boxComponent.name),existing=mixer.existingAction(this.mouseOverClip);if(existing)existing.isRunning()||existing.reset();else{const clipAction=mixer.clipAction(this.mouseOverClip);clipAction.loop=three__WEBPACK_IMPORTED_MODULE_7__.Q,clipAction.repetitions=2,clipAction.play()}}}mouseExit(){}createMixers(){this.boxes.forEach(i=>this.mixers.set(i.name,new three__WEBPACK_IMPORTED_MODULE_7__.d(i.getObject())))}playAppearForAll(){this.mixers.forEach(i=>{const duration=Math.random(),appearKeyFrame=new three__WEBPACK_IMPORTED_MODULE_7__.Ob(".position",[0,duration],[0,0,-5,0,0,0],three__WEBPACK_IMPORTED_MODULE_7__.E),appearClip=new three__WEBPACK_IMPORTED_MODULE_7__.c("Appear",duration,[appearKeyFrame]),clipAction=i.clipAction(appearClip);clipAction.loop=three__WEBPACK_IMPORTED_MODULE_7__.P,clipAction.play()})}ngAfterViewInit(){this.createMixers(),this.playAppearForAll(),this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate),this.animationService.start()}animate(){if(this.mixers&&this.mixers.size>0){const delta=this.clock.getDelta();this.mixers.forEach(i=>{i.update(delta)})}}ngOnDestroy(){var _a;null===(_a=this.animation)||void 0===_a||_a.unsubscribe()}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.ViewChildren)(_projects_atft_src_lib_object_mesh_box_mesh_component__WEBPACK_IMPORTED_MODULE_5__.a),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type","function"==typeof(_c=void 0!==_angular_core__WEBPACK_IMPORTED_MODULE_3__.QueryList&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.QueryList)?_c:Object)],StorybookReactiveGridComponent.prototype,"boxes",void 0),StorybookReactiveGridComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_8__.a)('\n  <div *ngFor="let item of [].constructor(10); let x = index">\n    <div *ngFor="let item of [].constructor(10); let y = index">\n        <atft-empty [translateX]="(x*10.3)-50" [translateY]="(y*10.3)-50" [translateZ]="5">\n            <atft-box-mesh [height]="10" [width]="10" [depth]="0.2" materialColor="#dadaff"\n            atft-raycaster-group (mouseEnter)="mouseEnter($event)" (mouseExit)="mouseExit($event)"\n            [name]="\'obj\'+x+\'_\'+y">\n            </atft-box-mesh>\n        </atft-empty>\n    </div>\n  </div>\n  ')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_d=void 0!==_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_6__.a&&_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_6__.a)?_d:Object])],StorybookReactiveGridComponent),__webpack_exports__.default={title:"Other/Animate",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__.a]})]};const Loop=args=>({component:StorybookLoopComponent,props:args}),Mixer=args=>({component:StorybookMixerComponent,props:args}),ReactiveGrid=args=>({component:StorybookReactiveGridComponent,props:args});Loop.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookLoopComponent,\n  props: args\n})"}},Loop.parameters),Mixer.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookMixerComponent,\n  props: args\n})"}},Mixer.parameters),ReactiveGrid.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookReactiveGridComponent,\n  props: args\n})"}},ReactiveGrid.parameters)},1421:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Line",(function(){return Line})),__webpack_require__.d(__webpack_exports__,"AnimatedLine",(function(){return AnimatedLine})),__webpack_require__.d(__webpack_exports__,"BloomLine",(function(){return BloomLine}));var _a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(50),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21),_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(61),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(63);let StorybookLineComponent=class StorybookLineComponent{};StorybookLineComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)('\n  <atft-sphere-mesh [radius]="2" [widthSegments]="10" [hightSegments]="20" material="lamb" materialColor="#00ff00"\n    #a [translateY]="50" [translateX]="-10" [translateZ]="translateZ">\n  </atft-sphere-mesh>\n  <atft-sphere-mesh [radius]="2" [widthSegments]="10" [hightSegments]="20" material="lamb" materialColor="#00ff00"\n    #b [translateY]="-20" [translateX]="-30" [translateZ]="+10">\n  </atft-sphere-mesh>\n\n  <atft-line-connector [source]="a" [target]="b" [materialColor]="lineColor"></atft-line-connector>\n  ')})],StorybookLineComponent);let StorybookLineAnimationComponent=class StorybookLineAnimationComponent{constructor(animationService){this.animationService=animationService,this.animationService.start()}};StorybookLineAnimationComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)('\n  <atft-sphere-mesh [radius]="2" [widthSegments]="10" [hightSegments]="20" material="lamb" materialColor="#00ff00"\n    #a [translateY]="50" [translateX]="-10" [translateZ]="translateZ">\n  </atft-sphere-mesh>\n  <atft-sphere-mesh [radius]="2" [widthSegments]="10" [hightSegments]="20" material="lamb" materialColor="#00ff00"\n    #b [translateY]="-50" [translateX]="10" [translateZ]="+10">\n  </atft-sphere-mesh>\n\n  <atft-line-connector [source]="a" [target]="b" materialColor="#ff0000" [animated]="true" >\n  </atft-line-connector>\n  ')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_3__.a&&_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object])],StorybookLineAnimationComponent);let StorybookLineBloomComponent=class StorybookLineBloomComponent{constructor(animationService){this.animationService=animationService,this.animationService.start()}};StorybookLineBloomComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_6__.a)('\n  <atft-effect-composer>\n  </atft-effect-composer>\n\n  <atft-sphere-mesh [radius]="0.5" [widthSegments]="10" [hightSegments]="20" material="lamb" materialColor="#0000ff"\n    #a [translateY]="50" [translateX]="-10" [translateZ]="translateZ">\n  </atft-sphere-mesh>\n  <atft-sphere-mesh [radius]="0.5" [widthSegments]="10" [hightSegments]="20" material="lamb" materialColor="#0000ff"\n    #b [translateY]="-50" [translateX]="10" [translateZ]="5">\n  </atft-sphere-mesh>\n\n  <atft-line-connector [source]="a" [target]="b" materialColor="#0000ff" [animated]="true" >\n  </atft-line-connector>\n  ')}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_b=void 0!==_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_3__.a&&_projects_atft_src_lib_animation_animation_service__WEBPACK_IMPORTED_MODULE_3__.a)?_b:Object])],StorybookLineBloomComponent),__webpack_exports__.default={title:"Other/Connector",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__.a]})],args:{translateZ:5,lineColor:"#ff0000"},argTypes:{translateZ:{control:{type:"range",min:-100,max:100,step:1}},lineColor:{control:{type:"color"}}}};const Line=args=>({component:StorybookLineComponent,props:args}),AnimatedLine=args=>({component:StorybookLineAnimationComponent,props:args}),BloomLine=args=>({component:StorybookLineBloomComponent,props:args});Line.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookLineComponent,\n  props: args\n})"}},Line.parameters),AnimatedLine.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookLineAnimationComponent,\n  props: args\n})"}},AnimatedLine.parameters),BloomLine.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookLineBloomComponent,\n  props: args\n})"}},BloomLine.parameters)},1422:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ObjectLoader",(function(){return ObjectLoader})),__webpack_require__.d(__webpack_exports__,"ObjLoader",(function(){return ObjLoader})),__webpack_require__.d(__webpack_exports__,"SvgLoader",(function(){return SvgLoader})),__webpack_require__.d(__webpack_exports__,"ExternalSvgLoader",(function(){return ExternalSvgLoader})),__webpack_require__.d(__webpack_exports__,"DifferentSvgLoader",(function(){return DifferentSvgLoader})),__webpack_require__.d(__webpack_exports__,"StlLoader",(function(){return StlLoader}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63);const modelPath="https://raw.githubusercontent.com/makimenko/files/master/angular-template-for-threejs/model/SampleArchitecture";let StorybookObjLoaderComponent=class StorybookObjLoaderComponent{};StorybookObjLoaderComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)(`\n      <atft-obj-loader\n              model="${modelPath}/SampleArchitecture.obj"\n              material="${modelPath}/SampleArchitecture.mtl"\n              resourcePath="${modelPath}/"\n              [translateX]="-60" [translateY]="-40" [translateZ]="0.5">\n          >\n      </atft-obj-loader>\n  `)})],StorybookObjLoaderComponent);let StorybookObjectLoaderComponent=class StorybookObjectLoaderComponent{};StorybookObjectLoaderComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n      <atft-object-loader  model="assets/model/Server.json">\n      </atft-object-loader>\n  ')})],StorybookObjectLoaderComponent);let StorybookSVGLoaderComponent=class StorybookSVGLoaderComponent{};StorybookSVGLoaderComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n      <atft-svg-loader model="./assets/svg/worldwide.svg" [maxX]="15" [maxY]="15">\n      </atft-svg-loader>\n      <atft-svg-loader [model]="model" [overrideMaterialColor]="overrideMaterialColor"\n        [maxX]="10" [maxY]="10"  [translateZ]="2">\n      </atft-svg-loader>\n  ')})],StorybookSVGLoaderComponent);let StorybookExternalSVGLoaderComponent=class StorybookExternalSVGLoaderComponent{};StorybookExternalSVGLoaderComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n    <atft-svg-loader model="https://raw.githubusercontent.com/material-icons/material-icons/master/svg/web_asset/outline.svg"\n    overrideMaterialColor="#ff0000">\n    </atft-svg-loader>\n  ')})],StorybookExternalSVGLoaderComponent);let StorybookDifferentSVGLoaderComponent=class StorybookDifferentSVGLoaderComponent{};StorybookDifferentSVGLoaderComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n<atft-empty>\n    <atft-svg-loader model="https://raw.githubusercontent.com/material-icons/material-icons/master/svg/web_asset/outline.svg">\n    </atft-svg-loader>\n\n    <atft-svg-loader model="https://raw.githubusercontent.com/makimenko/files/master/azure-icons/App-Services.svg" [translateY]="20">\n    </atft-svg-loader>\n\n    <atft-svg-loader model="https://raw.githubusercontent.com/makimenko/files/master/google-cloud-icons/Stackdriver.svg" [translateY]="40"\n    [scaleX]="0.04" [scaleY]="0.04">\n    </atft-svg-loader>\n\n    <atft-svg-loader model="https://raw.githubusercontent.com/makimenko/files/master/google-cloud-icons/Stackdriver.svg" [translateY]="40"\n    [scaleX]="0.04" [scaleY]="0.04">\n    </atft-svg-loader>\n\n    <atft-svg-loader model="https://raw.githubusercontent.com/makimenko/files/master/aws-icons/Device-Farm.svg" [translateY]="60"\n    [scaleX]="0.25" [scaleY]="0.25">\n    </atft-svg-loader>\n\n\n</atft-empty>\n  ')})],StorybookDifferentSVGLoaderComponent);let StorybookStlLoaderComponent=class StorybookStlLoaderComponent{};StorybookStlLoaderComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n    <atft-stl-loader\n        model="https://raw.githubusercontent.com/makimenko/files/master/angular-template-for-threejs/model/Stl/Menger_sponge_sample.stl"\n        materialColor="#AAFFAA"\n    >\n    </atft-stl-loader>\n  ')})],StorybookStlLoaderComponent),__webpack_exports__.default={title:"Other/Loader",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__.a]})]};const ObjectLoader=args=>({component:StorybookObjectLoaderComponent,props:args}),ObjLoader=args=>({component:StorybookObjLoaderComponent,props:args}),SvgLoader=args=>({component:StorybookSVGLoaderComponent,props:args}),ExternalSvgLoader=args=>({component:StorybookExternalSVGLoaderComponent,props:args}),DifferentSvgLoader=args=>({component:StorybookDifferentSVGLoaderComponent,props:args}),StlLoader=args=>({component:StorybookStlLoaderComponent,props:args});SvgLoader.args={model:"./assets/svg/idea.svg",overrideMaterialColor:"0xff0000"},SvgLoader.argTypes={model:{control:{type:"select",options:["./assets/svg/idea.svg","./assets/svg/grid-world.svg","./assets/svg/upload.svg","https://raw.githubusercontent.com/material-icons/material-icons/master/svg/video_settings/baseline.svg","https://raw.githubusercontent.com/material-icons/material-icons/master/svg/desktop_access_disabled/baseline.svg","https://raw.githubusercontent.com/material-icons/material-icons/master/svg/settings_input_antenna/baseline.svg","https://raw.githubusercontent.com/material-icons/material-icons/master/svg/web_asset/baseline.svg"]}},overrideMaterialColor:{control:{type:"select",options:["0xff0000","0x00ff00","0x0000ff"]}}},ObjectLoader.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookObjectLoaderComponent,\n  props: args\n})"}},ObjectLoader.parameters),ObjLoader.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookObjLoaderComponent,\n  props: args\n})"}},ObjLoader.parameters),SvgLoader.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookSVGLoaderComponent,\n  props: args\n})"}},SvgLoader.parameters),ExternalSvgLoader.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookExternalSVGLoaderComponent,\n  props: args\n})"}},ExternalSvgLoader.parameters),DifferentSvgLoader.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookDifferentSVGLoaderComponent,\n  props: args\n})"}},DifferentSvgLoader.parameters),StlLoader.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookStlLoaderComponent,\n  props: args\n})"}},StlLoader.parameters)},1423:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Box",(function(){return Box})),__webpack_require__.d(__webpack_exports__,"Cylinder",(function(){return Cylinder})),__webpack_require__.d(__webpack_exports__,"Shpere",(function(){return Shpere})),__webpack_require__.d(__webpack_exports__,"Torus",(function(){return Torus})),__webpack_require__.d(__webpack_exports__,"Frame",(function(){return Frame})),__webpack_require__.d(__webpack_exports__,"Text",(function(){return Text})),__webpack_require__.d(__webpack_exports__,"Plane",(function(){return Plane}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61);let StorybookBoxMeshComponent=class StorybookBoxMeshComponent{};StorybookBoxMeshComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n  <atft-box-mesh [height]="10" [width]="10" [depth]="10" [translateX]="translateX" [materialColor]="materialColor"></atft-box-mesh>\n  ')})],StorybookBoxMeshComponent);let StorybookCylinderMeshComponent=class StorybookCylinderMeshComponent{};StorybookCylinderMeshComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-storybook-cylinder-mesh",template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n      <atft-cylinder-mesh [radiusTop]="2.0" [radiusBottom]="7.0" [height]="10" [radialSegments]="36" [heightSegments]="1"\n                          [translateX]="translateX" [materialColor]="materialColor">\n      </atft-cylinder-mesh>\n  ')})],StorybookCylinderMeshComponent);let StorybookSphereMeshComponent=class StorybookSphereMeshComponent{constructor(){this.translateX=0}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],StorybookSphereMeshComponent.prototype,"translateX",void 0),StorybookSphereMeshComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n      <atft-sphere-mesh [radius]="4" [widthSegments]="20" [hightSegments]="20" [translateX]="translateX" [materialColor]="materialColor">\n      </atft-sphere-mesh>\n  ')})],StorybookSphereMeshComponent);let StorybookTextMeshComponent=class StorybookTextMeshComponent{};StorybookTextMeshComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n  <atft-text-mesh [text]="text" [rotateZ]="(90 | deg2rad)" [translateX]="translateX" [materialColor]="materialColor"\n      [bevelEnabled]="true" curveSegments="20" [centered]="true">\n  </atft-text-mesh>')})],StorybookTextMeshComponent);let StorybookTorusMeshComponent=class StorybookTorusMeshComponent{};StorybookTorusMeshComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n  <atft-torus-mesh [radius]="5" [tube]="2" [radialSegments]="16" [tubularSegments]="100" [arc]="6.28" [translateX]="translateX"\n        [materialColor]="materialColor">\n  </atft-torus-mesh>\n  ')})],StorybookTorusMeshComponent);let StorybookFrameMeshComponent=class StorybookFrameMeshComponent{};StorybookFrameMeshComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n  <atft-frame-mesh [thickness]="2" [sizeX]="width" [sizeY]="width" [translateZ]="0.5" [translateX]="translateX"\n    [materialColor]="materialColor">\n  </atft-frame-mesh>\n  ')})],StorybookFrameMeshComponent);let StorybookPlaneMeshComponent=class StorybookPlaneMeshComponent{};StorybookPlaneMeshComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n  <atft-plane-mesh [height]="10" [width]="width" [translateX]="translateX" [materialColor]="materialColor"></atft-plane-mesh>\n  ')})],StorybookPlaneMeshComponent),__webpack_exports__.default={title:"Other/Mesh",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__.a]})],args:{materialColor:"#00ff00",translateX:0,width:10},argTypes:{materialColor:{control:{type:"color"}},translateX:{control:{type:"range",min:-50,max:50,step:1}}}};const Box=args=>({component:StorybookBoxMeshComponent,props:args}),Cylinder=args=>({component:StorybookCylinderMeshComponent,props:args}),Shpere=args=>({component:StorybookSphereMeshComponent,props:args}),Torus=args=>({component:StorybookTorusMeshComponent,props:args}),Frame=args=>({component:StorybookFrameMeshComponent,props:args}),Text=args=>({component:StorybookTextMeshComponent,props:args});Text.args={text:"Hello :)"},Text.argTypes={text:"text"};const Plane=args=>({component:StorybookPlaneMeshComponent,props:args});Box.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookBoxMeshComponent,\n  props: args\n})"}},Box.parameters),Cylinder.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookCylinderMeshComponent,\n  props: args\n})"}},Cylinder.parameters),Shpere.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookSphereMeshComponent,\n  props: args\n})"}},Shpere.parameters),Torus.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookTorusMeshComponent,\n  props: args\n})"}},Torus.parameters),Frame.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookFrameMeshComponent,\n  props: args\n})"}},Frame.parameters),Text.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookTextMeshComponent,\n  props: args\n})"}},Text.parameters),Plane.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookPlaneMeshComponent,\n  props: args\n})"}},Plane.parameters)},1424:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(32),__webpack_require__(19),__webpack_require__(26),__webpack_require__(3);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(77),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(417);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_5__.Meta,{title:"Other/Object/Abstract",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("h2",{id:"reusableabstract-data-binding"},"Reusable/Abstract data binding"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("p",null,"This storybook demonstrates data binding (change propagation) which is by default supported by all components extended from AbstractObject3D.\nThe input fields ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("inlineCode",{parentName:"p"},"translate{X,Y,Z}"),", ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("inlineCode",{parentName:"p"},"rotate{X,Y,Z}")," are forwarded internally to ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("a",{parentName:"p",href:"https://threejs.org/docs/#api/en/core/Object3D",target:"_blank",rel:"nofollow noopener noreferrer"},"Object3D"),"."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("h3",{id:"source-code"},"Source Code"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("code",{parentName:"pre",className:"language-html"},'<atft-empty\n    [translateX]="translateX"\n    [translateY]="translateY"\n    [translateZ]="translateZ"\n    [rotateX]="rotateX"\n    [rotateY]="rotateY"\n    [rotateZ]="rotateZ">\n      \n    <atft-cylinder-mesh ></atft-cylinder-mesh>\n    <atft-torus-mesh ></atft-torus-mesh>\n     ...\n</atft-empty>\n')),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("h3",{id:"how-it-works"},"How it works"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("p",null,"The components atft-empty, atft-cylinder-mesh, atft-torus-mesh and others extends AbstractObject3D, with ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("a",{parentName:"p",href:"https://angular.io/api/core/OnChanges",target:"_blank",rel:"nofollow noopener noreferrer"},"ngOnChanges")," method to handle the changes:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("code",{parentName:"pre",className:"language-typescript"},"public ngOnChanges(changes: SimpleChanges) {\n  \n  if (['rotateX', 'rotateY', 'rotateZ'].some(propName => propName in changes)) {\n    this.applyRotation();\n    mustRerender = true;\n  }\n  \n}\n")))}MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Other/Object/Abstract",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_5__.AddContext,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},1425:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AbstractProperties",(function(){return AbstractProperties}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61);let StorybookObjectComponent=class StorybookObjectComponent{constructor(){this.material="phong"}};StorybookObjectComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n    <atft-empty\n        [translateX]="translateX"\n        [translateY]="translateY"\n        [translateZ]="translateZ"\n        [rotateX]="rotateX"\n        [rotateY]="rotateY"\n        [rotateZ]="rotateZ"\n    >\n      <atft-cylinder-mesh [radiusTop]="2.0" [radiusBottom]="7.0" [height]="10" [radialSegments]="36" [heightSegments]="1"\n                          [material]="material" materialColor="#00ff00">\n      </atft-cylinder-mesh>\n      <atft-torus-mesh [radius]="10" [tube]="1" [radialSegments]="16" [tubularSegments]="100" material="phong"\n            materialColor="#0000ff">\n      </atft-torus-mesh>\n            <atft-torus-mesh [radius]="10" [tube]="1" [radialSegments]="16" [tubularSegments]="100" material="phong"\n            materialColor="#ff0000" [rotateX]="90 | deg2rad">\n      </atft-torus-mesh>\n    </atft-empty>\n  ')})],StorybookObjectComponent),__webpack_exports__.default={title:"Other/Object",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__.a]})],args:{translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0},argTypes:{translateX:{control:{type:"range",min:-50,max:50,step:1}},translateY:{control:{type:"range",min:-50,max:50,step:1}},translateZ:{control:{type:"range",min:-50,max:50,step:1}},rotateX:{control:{type:"range",min:0,max:3.14,step:.1}},rotateY:{control:{type:"range",min:0,max:3.14,step:.1}},rotateZ:{control:{type:"range",min:0,max:3.14,step:.1}}}};const AbstractProperties=args=>({component:StorybookObjectComponent,props:args});AbstractProperties.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookObjectComponent,\n  props: args\n})"}},AbstractProperties.parameters)},1426:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Raycaster",(function(){return Raycaster}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(63);let StorybookRaycasterGroupComponent=class StorybookRaycasterGroupComponent{constructor(){this.color="#00ff00"}mouseEnter(){console.log("mouseEnter"),this.color="#0000ff"}mouseExit(){console.log("mouseExit"),this.color="#00ff00"}click(){console.log("click"),this.color="#FF0000"}};StorybookRaycasterGroupComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n    <atft-empty atft-raycaster-group name="root-empty" (mouseEnter)="mouseEnter()" (mouseExit)="mouseExit()" (click)="click()">\n      <atft-box-mesh name="parent-box" [height]="10" [width]="10" [depth]="10" [materialColor]="color" [translateZ]="10">\n        <atft-box-mesh name="child-box1" [height]="5" [width]="5" [depth]="5" [translateX]="12" [materialColor]="color">\n                  <atft-box-mesh name="child-box1" [height]="3" [width]="3" [depth]="3" [translateX]="12" [materialColor]="color">\n                  </atft-box-mesh>\n        </atft-box-mesh>\n      </atft-box-mesh>\n    </atft-empty>\n')})],StorybookRaycasterGroupComponent),__webpack_exports__.default={title:"Other/Raycaster",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__.a]})]};const Raycaster=args=>({component:StorybookRaycasterGroupComponent,props:args});Raycaster.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookRaycasterGroupComponent,\n  props: args\n})"}},Raycaster.parameters)},1427:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Server",(function(){return Server}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(83),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21),_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63);let StorybookServerComponent=class StorybookServerComponent{mouseEnter(){console.log("Mouse enter")}};StorybookServerComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_world_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)('\n\n    <atft-server-stand-actor atft-raycaster-group (mouseEnter)="mouseEnter()" label="AA"\n      [icon]="icon" [translateX]="-40">\n    </atft-server-stand-actor>\n\n    <atft-server-compact-actor atft-raycaster-group (mouseEnter)="mouseEnter()" [label]="label"\n      [icon]="icon" [translateX]="-20">\n    </atft-server-compact-actor>\n\n    <atft-server-barrel-actor atft-raycaster-group (mouseEnter)="mouseEnter()" [label]="label"\n      [icon]="icon" [translateX]="0">\n    </atft-server-barrel-actor>\n\n    <atft-server-icon-actor atft-raycaster-group (mouseEnter)="mouseEnter()" [label]="label"\n      [icon]="icon" [translateX]="20">\n    </atft-server-icon-actor>\n\n    <atft-workstation-actor atft-raycaster-group (mouseEnter)="mouseEnter()" [label]="label"\n      [icon]="icon" [translateX]="40"\n      videoSrc="https://raw.githubusercontent.com/makimenko/files/master/angular-template-for-threejs/videos/ui/retro_futuristic_ui_360p.mp4">\n    </atft-workstation-actor>\n  ')})],StorybookServerComponent),__webpack_exports__.default={title:"Other/Server",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_4__.a,_projects_atft_src_lib_actor_data_center__WEBPACK_IMPORTED_MODULE_3__.a]})],args:{icon:"a:idea",label:"Workstation"},argTypes:{icon:{description:"Please choose SVG file from assets",control:{type:"select",options:["a:idea","a:upload","a:grid-world","md:alarm_on"]}},label:{description:"Please choose title of workstation",control:{type:"text"}}}};const Server=args=>({component:StorybookServerComponent,props:args});Server.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookServerComponent,\n  props: args\n})"}},Server.parameters)},1428:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"VideoTexture",(function(){return VideoTexture}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61);let StorybookVideoComponent=class StorybookVideoComponent{};StorybookVideoComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_axes_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n  <atft-plane-mesh *ngFor="let item of [].constructor(10); let i = index"\n    [height]="24.5" [width]="42" materialColor="#ffffff" material="phong"\n    [rotateZ]="(90 | deg2rad)" [rotateY]="(90 | deg2rad)" [translateZ]="10" [translateX]="(i*-20)">\n    <atft-video-mesh [height]="22.5" [width]="40" [translateZ]="0.1"\n        videoSrc="https://raw.githubusercontent.com/makimenko/files/master/angular-template-for-threejs/videos/ui/retro_futuristic_ui_720p.mp4">\n    </atft-video-mesh>\n  </atft-plane-mesh>\n  ')})],StorybookVideoComponent),__webpack_exports__.default={title:"Other/Video Texture",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__.a]})]};const VideoTexture=args=>({component:StorybookVideoComponent,props:args});VideoTexture.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookVideoComponent,\n  props: args\n})"}},VideoTexture.parameters)},1429:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Intro",(function(){return Intro}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_storybook_angular__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(45),_projects_atft_src_lib_object_helper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(116),_projects_atft_src_lib_actor_ux__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(199);let StorybookIntroComponent=class StorybookIntroComponent{constructor(animationService){this.animationService=animationService,this.k=0}ngAfterViewInit(){this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate),this.animationService.start()}animate(){this.k+=.02}ngOnDestroy(){var _a;null===(_a=this.animation)||void 0===_a||_a.unsubscribe()}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.ViewChild)(_projects_atft_src_lib_object_helper__WEBPACK_IMPORTED_MODULE_5__.a),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],StorybookIntroComponent.prototype,"box",void 0),StorybookIntroComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Component)({template:'\n    <atft-renderer-canvas>\n      <atft-orthographic-camera [positionX]=0 [positionY]=0 [positionZ]="100" [zoom]="4">\n      </atft-orthographic-camera>\n\n      \x3c!-- Background --\x3e\n      <atft-scene name="backgroundScene" background="0x000051">\n        <atft-effect-composer [renderToScreen]="false" [sceneBackgroundTarget]="mainScene">\n          <atft-blur></atft-blur>\n        </atft-effect-composer>\n\n        <atft-point-light [intensity]="0.4" [distance]="1000" [translateX]="-60" [translateY]="-60"\n                          [translateZ]="50"></atft-point-light>\n\n        <atft-loader-actor materialColor="#5DADE2"></atft-loader-actor>\n      </atft-scene>\n\n      \x3c!-- Foreground --\x3e\n      <atft-scene name="scene" #mainScene atft-stats-auto-show>\n        <atft-ambient-light color="#FFFFFF" [intensity]="0.4"></atft-ambient-light>\n\n        <atft-point-light [intensity]="0.5" [distance]="1000" [translateX]=90 [translateY]=90\n                          [translateZ]=90></atft-point-light>\n        <atft-point-light [intensity]="0.8" [distance]="1000" [translateX]="-60" [translateY]="-60"\n                          [translateZ]="50"></atft-point-light>\n\n        <atft-text-actor text="Introducing Angular Template for Three.js" [translateX]="-200" [translateY]="-50" [translateZ]="1"\n                         [animate]="true" [minDelay]="5" [maxDelay]="5" materialColor="#DDDDDD"\n        ></atft-text-actor>\n\n      </atft-scene>\n    </atft-renderer-canvas>\n  '}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_4__.a&&_projects_atft_src_lib_animation__WEBPACK_IMPORTED_MODULE_4__.a)?_a:Object])],StorybookIntroComponent),__webpack_exports__.default={title:"UX / Intro",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_1__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_2__.a,_projects_atft_src_lib_actor_ux__WEBPACK_IMPORTED_MODULE_6__.a]})],args:{},argTypes:{}};const Intro=args=>({component:StorybookIntroComponent,props:args});Intro.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookIntroComponent,\n  props: args\n})"}},Intro.parameters)},1430:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Loader1",(function(){return Loader1}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_projects_atft_src_lib_actor_ux__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(199),_scene_wrapper_ux_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(418);let StorybookTextComponent=class StorybookTextComponent{};StorybookTextComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_ux_scene_wrapper__WEBPACK_IMPORTED_MODULE_5__.a)("\n    <atft-loader-actor></atft-loader-actor>\n  ")})],StorybookTextComponent),__webpack_exports__.default={title:"UX / Loader",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__.a,_projects_atft_src_lib_actor_ux__WEBPACK_IMPORTED_MODULE_4__.a]})],args:{},argTypes:{}};const Loader1=args=>({component:StorybookTextComponent,props:args});Loader1.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookTextComponent,\n  props: args\n})"}},Loader1.parameters)},1431:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Animate",(function(){return Animate}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_storybook_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(24),_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),_scene_wrapper_ux_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(418),_projects_atft_src_lib_actor_ux__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(199);let StorybookTextComponent=class StorybookTextComponent{};StorybookTextComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({template:Object(_scene_wrapper_ux_scene_wrapper__WEBPACK_IMPORTED_MODULE_4__.a)('\n    <atft-text-actor [text]="label" [animate]="animate" [minDelay]="minDelay" [maxDelay]="maxDelay">\n    </atft-text-actor>\n  ')})],StorybookTextComponent),__webpack_exports__.default={title:"UX / Text",decorators:[Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_2__.moduleMetadata)({imports:[_projects_atft_src_lib_atft_module__WEBPACK_IMPORTED_MODULE_3__.a,_projects_atft_src_lib_actor_ux__WEBPACK_IMPORTED_MODULE_5__.a]})],args:{animate:!0,label:"Hello, welcome to the world of animationService!",minDelay:5,maxDelay:20},argTypes:{animate:{description:"Enable animated text?",control:{type:"boolean"}},label:{description:"Please choose title of workstation",control:{type:"text"}},minDelay:{control:{type:"range",min:0,max:300,step:1}},maxDelay:{control:{type:"range",min:0,max:1e3,step:1}}}};const Animate=args=>({component:StorybookTextComponent,props:args});Animate.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookTextComponent,\n  props: args\n})"}},Animate.parameters)},1432:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(714),_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_cjs_js_ref_9_1_node_modules_postcss_loader_dist_cjs_js_ref_9_2_node_modules_resolve_url_loader_index_js_ref_9_3_node_modules_sass_loader_dist_cjs_js_ref_9_4_styles_scss__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(521),options={insert:"head",singleton:!1};_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_ref_9_1_node_modules_postcss_loader_dist_cjs_js_ref_9_2_node_modules_resolve_url_loader_index_js_ref_9_3_node_modules_sass_loader_dist_cjs_js_ref_9_4_styles_scss__WEBPACK_IMPORTED_MODULE_1__.a,options);__webpack_exports__.default=_node_modules_css_loader_dist_cjs_js_ref_9_1_node_modules_postcss_loader_dist_cjs_js_ref_9_2_node_modules_resolve_url_loader_index_js_ref_9_3_node_modules_sass_loader_dist_cjs_js_ref_9_4_styles_scss__WEBPACK_IMPORTED_MODULE_1__.a.locals||{}},1437:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"VirtualCity",(function(){return VirtualCity}));var tslib_es6=__webpack_require__(1),client=__webpack_require__(24),atft_module=__webpack_require__(21),core=__webpack_require__(0),animation=__webpack_require__(45),ux=__webpack_require__(199),three_module=__webpack_require__(2),common=(__webpack_require__(1369),__webpack_require__(97),__webpack_require__(163),__webpack_require__(79),__webpack_require__(125),__webpack_require__(32),__webpack_require__(33),__webpack_require__(48),__webpack_require__(669),__webpack_require__(663),__webpack_require__(22),__webpack_require__(480),__webpack_require__(368),__webpack_require__(1370),__webpack_require__(662),__webpack_require__(19),__webpack_require__(31),__webpack_require__(213),__webpack_require__(52),__webpack_require__(1371),__webpack_require__(165),__webpack_require__(34),__webpack_require__(189),__webpack_require__(124),__webpack_require__(113),__webpack_require__(352),__webpack_require__(245),__webpack_require__(1372),__webpack_require__(1373),__webpack_require__(1380),__webpack_require__(1382),__webpack_require__(1383),__webpack_require__(1384),__webpack_require__(1386),__webpack_require__(1387),__webpack_require__(1388),__webpack_require__(1389),__webpack_require__(1390),__webpack_require__(1391),__webpack_require__(1392),__webpack_require__(1393),__webpack_require__(1395),__webpack_require__(1396),__webpack_require__(1397),__webpack_require__(1398),__webpack_require__(1399),__webpack_require__(1400),__webpack_require__(1401),__webpack_require__(1402),__webpack_require__(1403),__webpack_require__(1404),__webpack_require__(1405),__webpack_require__(80),__webpack_require__(37),__webpack_require__(263),__webpack_require__(9)),stats_module=__webpack_require__(409),v4=__webpack_require__(519),Line2=__webpack_require__(419),LineGeometry=__webpack_require__(256),LineMaterial=__webpack_require__(197),MTLLoader=__webpack_require__(412),OBJLoader=__webpack_require__(411),STLLoader=__webpack_require__(413),OrbitControls=__webpack_require__(230),RenderPass=__webpack_require__(231),UnrealBloomPass=__webpack_require__(420),EffectComposer=__webpack_require__(177),ShaderPass=__webpack_require__(76),SMAAPass=__webpack_require__(421),FXAAShader=__webpack_require__(414),BokehPass=__webpack_require__(422),DotScreenShader=__webpack_require__(415),VerticalBlurShader=__webpack_require__(260),HorizontalBlurShader=__webpack_require__(261),dagre=__webpack_require__(262),browser=__webpack_require__(416);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _get(target,property,receiver){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var atft_StatsService=function(){function StatsService(){var _this=this;_classCallCheck(this,StatsService),document.body.addEventListener("keydown",(function(event){event.altKey&&"s"===event.key&&_this.toggle()}))}return _createClass(StatsService,[{key:"update",value:function update(){this.stats&&this.stats.update()}},{key:"toggle",value:function toggle(){this.stats?this.remove():this.create()}},{key:"create",value:function create(){this.stats||(this.stats=Object(stats_module.a)(),document.body.appendChild(this.stats.dom))}},{key:"remove",value:function remove(){this.stats&&(this.stats.dom.remove(),this.stats.dom=null,this.stats=null)}},{key:"ngOnDestroy",value:function ngOnDestroy(){this.remove()}}]),StatsService}();atft_StatsService.decorators=[{type:core.Injectable}],atft_StatsService.ctorParameters=function(){return[]};var atft_RendererService=function(){function RendererService(statsService){_classCallCheck(this,RendererService),this.statsService=statsService,this.init=!1}return _createClass(RendererService,[{key:"ngOnDestroy",value:function ngOnDestroy(){}},{key:"setScene",value:function setScene(scene){this.scene=scene}},{key:"setCamera",value:function setCamera(camera){this.camera=camera,this.camera.updateAspectRatio(this.aspect)}},{key:"render",value:function render(){this.init&&this.scene&&this.scene.getObject()&&this.camera&&this.camera.camera&&(this.composer?(this.composer.render(),this.composer.renderToScreen||this.webGlRenderer.render(this.scene.getObject(),this.camera.camera)):this.webGlRenderer.render(this.scene.getObject(),this.camera.camera),this.statsService.update())}},{key:"initialize",value:function initialize(canvas,preserveDrawingBuffer){this.webGlRenderer=new three_module.Rb({canvas:canvas,antialias:!0,alpha:!0,preserveDrawingBuffer:preserveDrawingBuffer}),this.webGlRenderer.setPixelRatio(window.devicePixelRatio),this.webGlRenderer.setSize(canvas.clientWidth,canvas.clientHeight,!0),this.webGlRenderer.shadowMap.enabled=!1,this.webGlRenderer.shadowMap.autoUpdate=!1,this.webGlRenderer.shadowMap.type=three_module.gb,this.webGlRenderer.setClearColor(0,0),this.webGlRenderer.autoClear=!0,canvas.style.zIndex="2",this.updateChildCamerasAspectRatio(canvas),this.init=!0,this.render()}},{key:"resize",value:function resize(canvas,size){canvas.style.width=size,canvas.style.height=size,canvas.style.border="none";var width=canvas.clientWidth,height=canvas.clientHeight;this.webGlRenderer.setSize(width,height,!0),this.updateChildCamerasAspectRatio(canvas),this.render()}},{key:"calculateAspectRatio",value:function calculateAspectRatio(canvas){if(0===canvas.clientHeight)return 0;this.aspect=canvas.clientWidth/canvas.clientHeight}},{key:"updateChildCamerasAspectRatio",value:function updateChildCamerasAspectRatio(canvas){this.calculateAspectRatio(canvas),this.camera&&this.camera.updateAspectRatio(this.aspect)}},{key:"getScene",value:function getScene(){return this.scene}},{key:"getCamera",value:function getCamera(){return this.camera}},{key:"getWebGlRenderer",value:function getWebGlRenderer(){return this.webGlRenderer}},{key:"setComposer",value:function setComposer(composer){this.composer=composer}}]),RendererService}();function appliedMaterial(materialColor,materialName,depthWrite){var props={color:materialColor instanceof three_module.m?materialColor:new three_module.m(materialColor),side:three_module.q,depthWrite:void 0===depthWrite||depthWrite};return"lamb"===materialName?new three_module.Z(props):"basic"===materialName?new three_module.X(props):new three_module.ab(props)}function fixCenter(group){var box=(new three_module.g).setFromObject(group);group.translateX(-(box.max.x-box.min.x)/2-box.min.x),group.translateY(-(box.max.y-box.min.y)/2-box.min.y),group.translateZ(-(box.max.z-box.min.z)/2-box.min.z)}function scaleToFit(group,max){var box=function calculateSize(group){var box=(new three_module.g).setFromObject(group);return new three_module.Mb(box.max.x-box.min.x,box.max.y-box.min.y,box.max.z-box.min.z)}(group),scaleX=max.x/box.x,scaleY=max.y/box.y,scaleZ=max.z/box.z;group.scale.set(scaleX<1?scaleX:1,scaleY<1?scaleY:1,scaleZ<1?scaleZ:1)}atft_RendererService.decorators=[{type:core.Injectable}],atft_RendererService.ctorParameters=function(){return[{type:atft_StatsService}]};var atft_AbstractObject3D=function(){function AbstractObject3D(rendererService,parent){_classCallCheck(this,AbstractObject3D),this.rendererService=rendererService,this.parent=parent,this.scaleX=1,this.scaleY=1,this.scaleZ=1,this.name=Object(v4.a)(),this.layer=0,this.changed=new core.EventEmitter,this.childlren=[]}return _createClass(AbstractObject3D,[{key:"ngOnChanges",value:function ngOnChanges(changes){if(this.object){var modified=!1;["rotateX","rotateY","rotateZ"].some((function(propName){return propName in changes}))&&(this.applyRotation(),modified=!0),["translateX","translateY","translateZ"].some((function(propName){return propName in changes}))&&(this.applyTranslation(),modified=!0),["scaleX","scaleY","scaleZ"].some((function(propName){return propName in changes}))&&(this.applyScale(),modified=!0),modified&&(this.changed.emit(),this.rendererService.render())}}},{key:"ngOnDestroy",value:function ngOnDestroy(){this.object&&this.object.parent&&(this.parent.removeChild(this),this.rendererService&&this.rendererService.render())}},{key:"ngOnInit",value:function ngOnInit(){this.object=this.newObject3DInstance(),this.layer&&this.object.layers.set(this.layer),this.applyTranslation(),this.applyRotation(),this.applyScale(),this.afterInit()}},{key:"updateParent",value:function updateParent(){this.parent&&(this.parent.addChild(this),this.rendererService.render())}},{key:"applyRotation",value:function applyRotation(){this.object.rotation.set(this.rotateX||0,this.rotateY||0,this.rotateZ||0,"XYZ")}},{key:"applyTranslation",value:function applyTranslation(){this.object.position.set(this.translateX||0,this.translateY||0,this.translateZ||0)}},{key:"applyScale",value:function applyScale(){this.object.scale.set(this.scaleX||0,this.scaleY||0,this.scaleZ||0)}},{key:"addChild",value:function addChild(object){this.object&&(this.childlren.push(object),this.object.add(object.getObject()),this.rendererService&&this.rendererService.render())}},{key:"afterInit",value:function afterInit(){}},{key:"removeChild",value:function removeChild(object){if(this.object&&object){var index=this.childlren.indexOf(object,0);index>-1&&this.childlren.splice(index,1),this.object.remove(object.getObject())}}},{key:"getObject",value:function getObject(){return this.object}},{key:"ngAfterViewInit",value:function ngAfterViewInit(){this.updateParent()}},{key:"findByName",value:function findByName(name){return this.recursionByName(this,name)}},{key:"recursionByName",value:function recursionByName(currentNode,name){var node,_this2=this;return currentNode.object&&currentNode.name===name?currentNode:(currentNode.childlren.some((function(child){return node=_this2.recursionByName(child,name)})),node)}},{key:"getChildren",value:function getChildren(){return this.childlren}},{key:"removeChildByName",value:function removeChildByName(name){this.childlren=this.childlren.filter((function(i){return i.name!==name}))}}]),AbstractObject3D}();function provideParent(component,parentType){return{provide:parentType||atft_AbstractObject3D,useExisting:Object(core.forwardRef)((function(){return component}))}}atft_AbstractObject3D.decorators=[{type:core.Directive}],atft_AbstractObject3D.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_AbstractObject3D.propDecorators={rotateX:[{type:core.Input}],rotateY:[{type:core.Input}],rotateZ:[{type:core.Input}],translateX:[{type:core.Input}],translateY:[{type:core.Input}],translateZ:[{type:core.Input}],scaleX:[{type:core.Input}],scaleY:[{type:core.Input}],scaleZ:[{type:core.Input}],name:[{type:core.Input}],layer:[{type:core.Input}],changed:[{type:core.Output}]};var AbstractCamera=function(){function AbstractCamera(rendererService){_classCallCheck(this,AbstractCamera),this.rendererService=rendererService,this.zAxisUp=!1}return _createClass(AbstractCamera,[{key:"ngOnInit",value:function ngOnInit(){this.createCamera(),this.layer?this.camera.layers.enable(this.layer):this.camera.layers.enableAll(),this.applyZAxisUp(),this.applyPosition(),this.rendererService.setCamera(this)}},{key:"ngOnChanges",value:function ngOnChanges(changes){var mustRerender=!1;["positionX","positionY","positionZ"].some((function(propName){return propName in changes}))&&(this.applyPosition(),mustRerender=!0),mustRerender&&this.rendererService.render()}},{key:"applyPosition",value:function applyPosition(){this.camera&&this.camera.position.set(this.positionX||0,this.positionY||0,this.positionZ||0)}},{key:"applyZAxisUp",value:function applyZAxisUp(){this.camera&&this.zAxisUp&&this.camera.up.set(0,0,1)}}]),AbstractCamera}();AbstractCamera.decorators=[{type:core.Directive}],AbstractCamera.ctorParameters=function(){return[{type:atft_RendererService}]},AbstractCamera.propDecorators={positionX:[{type:core.Input}],positionY:[{type:core.Input}],positionZ:[{type:core.Input}],zAxisUp:[{type:core.Input}],layer:[{type:core.Input}]};var atft_PerspectiveCameraComponent=function(_AbstractCamera){_inherits(PerspectiveCameraComponent,_AbstractCamera);var _super=_createSuper(PerspectiveCameraComponent);function PerspectiveCameraComponent(rendererService){var _this3;return _classCallCheck(this,PerspectiveCameraComponent),(_this3=_super.call(this,rendererService)).rendererService=rendererService,_this3}return _createClass(PerspectiveCameraComponent,[{key:"createCamera",value:function createCamera(){this.camera=new three_module.ib(this.fov,void 0,this.near,this.far)}},{key:"updateAspectRatio",value:function updateAspectRatio(aspect){this.camera.aspect=aspect,this.camera.updateProjectionMatrix()}}]),PerspectiveCameraComponent}(AbstractCamera);atft_PerspectiveCameraComponent.decorators=[{type:core.Component,args:[{selector:"atft-perspective-camera",providers:[provideParent(atft_PerspectiveCameraComponent,AbstractCamera)],template:"<ng-content></ng-content>"}]}],atft_PerspectiveCameraComponent.ctorParameters=function(){return[{type:atft_RendererService}]},atft_PerspectiveCameraComponent.propDecorators={fov:[{type:core.Input}],near:[{type:core.Input}],far:[{type:core.Input}]};var atft_OrthographicCameraComponent=function(_AbstractCamera2){_inherits(OrthographicCameraComponent,_AbstractCamera2);var _super2=_createSuper(OrthographicCameraComponent);function OrthographicCameraComponent(rendererService){var _this4;return _classCallCheck(this,OrthographicCameraComponent),(_this4=_super2.call(this,rendererService)).rendererService=rendererService,_this4.zoom=4,_this4}return _createClass(OrthographicCameraComponent,[{key:"createCamera",value:function createCamera(){this.camera=new three_module.fb(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/-2,window.innerHeight/2,.1,1e4),this.updateZoom()}},{key:"ngOnChanges",value:function ngOnChanges(changes){if(this.camera){var mustRerender=!1;["zoom"].some((function(propName){return propName in changes}))&&(this.updateZoom(),mustRerender=!0),mustRerender&&this.rendererService.render()}}},{key:"updateZoom",value:function updateZoom(){this.camera.zoom=this.zoom}},{key:"updateAspectRatio",value:function updateAspectRatio(aspect){this.camera.left=-1e3*aspect/2,this.camera.right=1e3*aspect/2,this.camera.top=500,this.camera.bottom=-500,this.camera.updateProjectionMatrix(),this.camera.lookAt(new three_module.Mb(0,0,0))}}]),OrthographicCameraComponent}(AbstractCamera);atft_OrthographicCameraComponent.decorators=[{type:core.Component,args:[{selector:"atft-orthographic-camera",providers:[provideParent(atft_OrthographicCameraComponent,AbstractCamera)],template:"<ng-content></ng-content>"}]}],atft_OrthographicCameraComponent.ctorParameters=function(){return[{type:atft_RendererService}]},atft_OrthographicCameraComponent.propDecorators={zoom:[{type:core.Input}]};var AtftCameraModule=function AtftCameraModule(){_classCallCheck(this,AtftCameraModule)};AtftCameraModule.decorators=[{type:core.NgModule,args:[{imports:[common.b],declarations:[atft_PerspectiveCameraComponent,atft_OrthographicCameraComponent],exports:[atft_PerspectiveCameraComponent,atft_OrthographicCameraComponent]}]}];var atft_AnimationService=function(){function AnimationService(rendererService){_classCallCheck(this,AnimationService),this.rendererService=rendererService,this.animate=new core.EventEmitter,this.enabled=!1,this.animationStep=this.animationStep.bind(this)}return _createClass(AnimationService,[{key:"start",value:function start(){this.enabled||(this.enabled=!0,this.animationStep())}},{key:"stop",value:function stop(){this.enabled&&(this.enabled=!1)}},{key:"animationStep",value:function animationStep(){this.enabled&&this.animate.observers&&(requestAnimationFrame(this.animationStep),this.animate.observers.length>0&&(this.animate.emit(),this.rendererService.render()))}}]),AnimationService}();atft_AnimationService.decorators=[{type:core.Injectable}],atft_AnimationService.ctorParameters=function(){return[{type:atft_RendererService}]};var AtftAnimationModule=function AtftAnimationModule(){_classCallCheck(this,AtftAnimationModule)};AtftAnimationModule.decorators=[{type:core.NgModule,args:[{providers:[atft_AnimationService]}]}];var LineType,AbstractConnector=function(_AbstractObject3D){_inherits(AbstractConnector,_AbstractObject3D);var _super3=_createSuper(AbstractConnector);function AbstractConnector(){return _classCallCheck(this,AbstractConnector),_super3.apply(this,arguments)}return _createClass(AbstractConnector,[{key:"newObject3DInstance",value:function newObject3DInstance(){var line=this.createLineMesh();return this.source&&this.target&&this.watchObjects(),line}},{key:"watchObjects",value:function watchObjects(){var _this5=this;this.sourceSub=this.source.changed.subscribe((function(item){_this5.updateLineGeometry()})),this.targetSub=this.target.changed.subscribe((function(item){_this5.updateLineGeometry()}))}},{key:"ngOnDestroy",value:function ngOnDestroy(){var _a,_b;_get(_getPrototypeOf(AbstractConnector.prototype),"ngOnDestroy",this).call(this),null===(_a=this.sourceSub)||void 0===_a||_a.unsubscribe(),null===(_b=this.targetSub)||void 0===_b||_b.unsubscribe()}}]),AbstractConnector}(atft_AbstractObject3D);AbstractConnector.decorators=[{type:core.Directive}],AbstractConnector.propDecorators={source:[{type:core.Input}],target:[{type:core.Input}]},function(LineType){LineType.dashed="dash",LineType.solid="solid"}(LineType||(LineType={}));var atft_LineConnectorComponent=function(_AbstractConnector){_inherits(LineConnectorComponent,_AbstractConnector);var _super4=_createSuper(LineConnectorComponent);function LineConnectorComponent(rendererService,parent,animationService){var _this6;return _classCallCheck(this,LineConnectorComponent),(_this6=_super4.call(this,rendererService,parent)).rendererService=rendererService,_this6.parent=parent,_this6.animationService=animationService,_this6.materialColor=16777215,_this6.solid=!1,_this6.lineWidth=2,_this6.dashSize=3,_this6.gapSize=.5,_this6.opacity=1,_this6.lineType=LineType.dashed,_this6.animated=!0,_this6.time=0,_this6.timeScale=5,_this6.clock=new three_module.l,_this6}return _createClass(LineConnectorComponent,[{key:"createLineMesh",value:function createLineMesh(){var positions=this.getPositions(),geometry=new LineGeometry.a;return geometry.setPositions(positions),this.matLine=new LineMaterial.a({color:this.materialColor,linewidth:this.lineWidth,vertexColors:!1,dashed:!this.solid,dashSize:this.dashSize,dashOffset:0,gapSize:this.gapSize,opacity:this.opacity,transparent:this.opacity<1,depthWrite:!0}),this.matLine.resolution.set(window.innerWidth,window.innerHeight),this.solid||(this.matLine.defines.USE_DASH=""),this.line=new Line2.a(geometry,this.matLine),this.line.computeLineDistances(),this.animated&&(this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate)),this.line}},{key:"updateLineGeometry",value:function updateLineGeometry(){var positions=this.getPositions();this.line.geometry.dispose(),this.line.geometry.setPositions(positions),this.line.computeLineDistances()}},{key:"getPositions",value:function getPositions(){if(!this.source||!this.target)throw new Error("AbstractConnector: source or target inputs are missing!");var source=this.source.getObject().position,target=this.target.getObject().position,positions=[];return positions.push(source.x,source.y,source.z),positions.push(target.x,target.y,target.z),positions}},{key:"ngOnDestroy",value:function ngOnDestroy(){_get(_getPrototypeOf(LineConnectorComponent.prototype),"ngOnDestroy",this).call(this),this.animation&&this.animation.unsubscribe()}},{key:"animate",value:function animate(){var _a,_b,material=null===(_a=this.line)||void 0===_a?void 0:_a.material;(null===(_b=this.line)||void 0===_b?void 0:_b.material)&&(this.time+=this.clock.getDelta(),material.dashOffset=-1*this.time*this.timeScale,this.line.computeLineDistances())}},{key:"ngOnChanges",value:function ngOnChanges(changes){if(this.object){_get(_getPrototypeOf(LineConnectorComponent.prototype),"ngOnChanges",this).call(this,changes);var modified=!1;["materialColor"].some((function(propName){return propName in changes}))&&(console.log("Changed color to",this.materialColor),this.line.material.color=new three_module.m(this.materialColor),this.line.material.needsUpdate=!0,modified=!0),modified&&(this.changed.emit(),this.rendererService.render())}}}]),LineConnectorComponent}(AbstractConnector);atft_LineConnectorComponent.decorators=[{type:core.Component,args:[{selector:"atft-line-connector",providers:[provideParent(atft_LineConnectorComponent)],template:"<ng-content></ng-content>"}]}],atft_LineConnectorComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]},{type:atft_AnimationService}]},atft_LineConnectorComponent.propDecorators={materialColor:[{type:core.Input}],solid:[{type:core.Input}],lineWidth:[{type:core.Input}],dashSize:[{type:core.Input}],gapSize:[{type:core.Input}],opacity:[{type:core.Input}],lineType:[{type:core.Input}],animated:[{type:core.Input}]};var AtftConnectorModule=function AtftConnectorModule(){_classCallCheck(this,AtftConnectorModule)};AtftConnectorModule.decorators=[{type:core.NgModule,args:[{declarations:[atft_LineConnectorComponent],imports:[common.b],exports:[atft_LineConnectorComponent]}]}];var atft_AxesHelperComponent=function(_AbstractObject3D2){_inherits(AxesHelperComponent,_AbstractObject3D2);var _super5=_createSuper(AxesHelperComponent);function AxesHelperComponent(rendererService,parent){var _this7;return _classCallCheck(this,AxesHelperComponent),(_this7=_super5.call(this,rendererService,parent)).rendererService=rendererService,_this7.parent=parent,_this7.size=50,_this7}return _createClass(AxesHelperComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){return new three_module.e(this.size)}}]),AxesHelperComponent}(atft_AbstractObject3D);atft_AxesHelperComponent.decorators=[{type:core.Component,args:[{selector:"atft-axes-helper",providers:[provideParent(atft_AxesHelperComponent)],template:"<ng-content></ng-content>"}]}],atft_AxesHelperComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_AxesHelperComponent.propDecorators={size:[{type:core.Input}]};var atft_EmptyComponent=function(_AbstractObject3D3){_inherits(EmptyComponent,_AbstractObject3D3);var _super6=_createSuper(EmptyComponent);function EmptyComponent(rendererService,parent){var _this8;return _classCallCheck(this,EmptyComponent),(_this8=_super6.call(this,rendererService,parent)).rendererService=rendererService,_this8.parent=parent,_this8}return _createClass(EmptyComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){return new three_module.db}}]),EmptyComponent}(atft_AbstractObject3D);atft_EmptyComponent.decorators=[{type:core.Component,args:[{selector:"atft-empty",providers:[provideParent(atft_EmptyComponent)],template:"<ng-content></ng-content>"}]}],atft_EmptyComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]};var atft_GridHelperComponent=function(_AbstractObject3D4){_inherits(GridHelperComponent,_AbstractObject3D4);var _super7=_createSuper(GridHelperComponent);function GridHelperComponent(rendererService,parent){var _this9;return _classCallCheck(this,GridHelperComponent),(_this9=_super7.call(this,rendererService,parent)).rendererService=rendererService,_this9.parent=parent,_this9}return _createClass(GridHelperComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){return new three_module.y(this.size,this.divisions)}}]),GridHelperComponent}(atft_AbstractObject3D);atft_GridHelperComponent.decorators=[{type:core.Component,args:[{selector:"atft-grid-helper",providers:[provideParent(atft_GridHelperComponent)],template:"<ng-content></ng-content>"}]}],atft_GridHelperComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_GridHelperComponent.propDecorators={size:[{type:core.Input}],divisions:[{type:core.Input}]};var AtftHelperModule=function AtftHelperModule(){_classCallCheck(this,AtftHelperModule)};AtftHelperModule.decorators=[{type:core.NgModule,args:[{declarations:[atft_AxesHelperComponent,atft_EmptyComponent,atft_GridHelperComponent],imports:[common.b],exports:[atft_AxesHelperComponent,atft_EmptyComponent,atft_GridHelperComponent]}]}];var atft_PointLightComponent=function(_AbstractObject3D5){_inherits(PointLightComponent,_AbstractObject3D5);var _super8=_createSuper(PointLightComponent);function PointLightComponent(rendererService,parent){var _this10;return _classCallCheck(this,PointLightComponent),(_this10=_super8.call(this,rendererService,parent)).rendererService=rendererService,_this10.parent=parent,_this10.color="#FFFFFF",_this10.intensity=1,_this10.distance=500,_this10.castShadow=!1,_this10}return _createClass(PointLightComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){var light=new three_module.kb(this.color,this.intensity,this.distance);return!0===this.castShadow&&(light.castShadow=this.castShadow,light.shadow.mapSize.width=1024,light.shadow.mapSize.height=1024,light.shadow.camera.near=.5,light.shadow.camera.far=500,light.shadow.bias=-.001,light.shadow.radius=1),light}}]),PointLightComponent}(atft_AbstractObject3D);atft_PointLightComponent.decorators=[{type:core.Component,args:[{selector:"atft-point-light",providers:[provideParent(atft_PointLightComponent)],template:"<ng-content></ng-content>"}]}],atft_PointLightComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_PointLightComponent.propDecorators={color:[{type:core.Input}],intensity:[{type:core.Input}],distance:[{type:core.Input}],castShadow:[{type:core.Input}]};var atft_HemisphereLightComponent=function(_AbstractObject3D6){_inherits(HemisphereLightComponent,_AbstractObject3D6);var _super9=_createSuper(HemisphereLightComponent);function HemisphereLightComponent(rendererService,parent){var _this11;return _classCallCheck(this,HemisphereLightComponent),(_this11=_super9.call(this,rendererService,parent)).rendererService=rendererService,_this11.parent=parent,_this11.skyColor="#ffffff",_this11.groundColor="#444444",_this11.intensity=1,_this11}return _createClass(HemisphereLightComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){return new three_module.A(this.skyColor,this.groundColor,this.intensity)}}]),HemisphereLightComponent}(atft_AbstractObject3D);atft_HemisphereLightComponent.decorators=[{type:core.Component,args:[{selector:"atft-hemisphere-light",providers:[provideParent(atft_HemisphereLightComponent)],template:"<ng-content></ng-content>"}]}],atft_HemisphereLightComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_HemisphereLightComponent.propDecorators={skyColor:[{type:core.Input}],groundColor:[{type:core.Input}],intensity:[{type:core.Input}]};var atft_DirectionalLightComponent=function(_AbstractObject3D7){_inherits(DirectionalLightComponent,_AbstractObject3D7);var _super10=_createSuper(DirectionalLightComponent);function DirectionalLightComponent(rendererService,parent){var _this12;return _classCallCheck(this,DirectionalLightComponent),(_this12=_super10.call(this,rendererService,parent)).rendererService=rendererService,_this12.parent=parent,_this12.color="#FFFFFF",_this12.intensity=1,_this12.target=new three_module.db,_this12.castShadow=!0,_this12}return _createClass(DirectionalLightComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){var light=new three_module.p(this.color,this.intensity);return light.target=this.target,!0===this.castShadow&&(light.castShadow=this.castShadow,light.shadow.camera.top=100,light.shadow.camera.bottom=-100,light.shadow.camera.left=-100,light.shadow.camera.right=100,light.shadow.camera.near=.1,light.shadow.camera.far=500,light.shadow.mapSize.set(1024,1024),light.shadow.bias=-.001),light}}]),DirectionalLightComponent}(atft_AbstractObject3D);atft_DirectionalLightComponent.decorators=[{type:core.Component,args:[{selector:"atft-directional-light",providers:[provideParent(atft_DirectionalLightComponent)],template:"<ng-content></ng-content>"}]}],atft_DirectionalLightComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_DirectionalLightComponent.propDecorators={color:[{type:core.Input}],intensity:[{type:core.Input}],target:[{type:core.Input}],castShadow:[{type:core.Input}]};var atft_AmbientLightComponent=function(_AbstractObject3D8){_inherits(AmbientLightComponent,_AbstractObject3D8);var _super11=_createSuper(AmbientLightComponent);function AmbientLightComponent(rendererService,parent){var _this13;return _classCallCheck(this,AmbientLightComponent),(_this13=_super11.call(this,rendererService,parent)).rendererService=rendererService,_this13.parent=parent,_this13.color="#FFFFFF",_this13.intensity=.8,_this13}return _createClass(AmbientLightComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){var light=new three_module.b(this.color);return light.intensity=this.intensity,light}}]),AmbientLightComponent}(atft_AbstractObject3D);atft_AmbientLightComponent.decorators=[{type:core.Component,args:[{selector:"atft-ambient-light",providers:[provideParent(atft_AmbientLightComponent)],template:"<ng-content></ng-content>"}]}],atft_AmbientLightComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_AmbientLightComponent.propDecorators={color:[{type:core.Input}],intensity:[{type:core.Input}]};var AtftLightModule=function AtftLightModule(){_classCallCheck(this,AtftLightModule)};AtftLightModule.decorators=[{type:core.NgModule,args:[{declarations:[atft_DirectionalLightComponent,atft_HemisphereLightComponent,atft_PointLightComponent,atft_AmbientLightComponent],imports:[common.b],exports:[atft_DirectionalLightComponent,atft_HemisphereLightComponent,atft_PointLightComponent,atft_AmbientLightComponent]}]}];var atft_AbstractLazyObject3D=function(_AbstractObject3D9){_inherits(AbstractLazyObject3D,_AbstractObject3D9);var _super12=_createSuper(AbstractLazyObject3D);function AbstractLazyObject3D(){var _this14;return _classCallCheck(this,AbstractLazyObject3D),(_this14=_super12.apply(this,arguments)).parentInitialized=!1,_this14}return _createClass(AbstractLazyObject3D,[{key:"afterInit",value:function afterInit(){_get(_getPrototypeOf(AbstractLazyObject3D.prototype),"afterInit",this).call(this),this.parentInitialized=!0,this.startLoading()}},{key:"startLoading",value:function startLoading(){var _this15=this;this.loadLazyObject().then((function(obj){_this15.lazyObject&&_get(_getPrototypeOf(AbstractLazyObject3D.prototype),"getObject",_this15).call(_this15).remove(_this15.lazyObject),_this15.lazyObject=obj,_get(_getPrototypeOf(AbstractLazyObject3D.prototype),"getObject",_this15).call(_this15).add(obj),_this15.rendererService.render(),setTimeout((function(){_this15.rendererService.render()}),10)})).catch((function(err){console.error(err)}))}},{key:"ngOnDestroy",value:function ngOnDestroy(){this.lazyObject&&_get(_getPrototypeOf(AbstractLazyObject3D.prototype),"getObject",this).call(this).remove(this.lazyObject)}},{key:"newObject3DInstance",value:function newObject3DInstance(){return new three_module.db}}]),AbstractLazyObject3D}(atft_AbstractObject3D);atft_AbstractLazyObject3D.decorators=[{type:core.Directive}];var AbstractModelLoader=function(_AbstractLazyObject3D){_inherits(AbstractModelLoader,_AbstractLazyObject3D);var _super13=_createSuper(AbstractModelLoader);function AbstractModelLoader(){return _classCallCheck(this,AbstractModelLoader),_super13.apply(this,arguments)}return _createClass(AbstractModelLoader,[{key:"model",get:function get(){return this._model},set:function set(newModelUrl){this._model=newModelUrl,this.object&&_get(_getPrototypeOf(AbstractModelLoader.prototype),"startLoading",this).call(this)}}]),AbstractModelLoader}(atft_AbstractLazyObject3D);AbstractModelLoader.decorators=[{type:core.Directive}],AbstractModelLoader.propDecorators={model:[{type:core.Input}]};var atft_ObjectLoaderComponent=function(_AbstractModelLoader){_inherits(ObjectLoaderComponent,_AbstractModelLoader);var _super14=_createSuper(ObjectLoaderComponent);function ObjectLoaderComponent(rendererService,parent){var _this16;return _classCallCheck(this,ObjectLoaderComponent),(_this16=_super14.call(this,rendererService,parent)).rendererService=rendererService,_this16.parent=parent,_this16.loader=new three_module.eb,_this16}return _createClass(ObjectLoaderComponent,[{key:"loadLazyObject",value:function loadLazyObject(){return Object(tslib_es6.a)(this,void 0,void 0,regeneratorRuntime.mark((function _callee(){var _this17=this;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve,reject){_this17.loader.load(_this17.model,(function(model){resolve(model)}),void 0,reject)})));case 1:case"end":return _context.stop()}}),_callee)})))}}]),ObjectLoaderComponent}(AbstractModelLoader);atft_ObjectLoaderComponent.decorators=[{type:core.Component,args:[{selector:"atft-object-loader",providers:[provideParent(atft_ObjectLoaderComponent)],template:"<ng-content></ng-content>"}]}],atft_ObjectLoaderComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]};var atft_AbstractCacheService=function(){function AbstractCacheService(){_classCallCheck(this,AbstractCacheService),this.cache=new Map}return _createClass(AbstractCacheService,[{key:"load",value:function load(key){return Object(tslib_es6.a)(this,void 0,void 0,regeneratorRuntime.mark((function _callee2(){var cacheHit,cacheMiss;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(cacheHit=this.cache.get(key))){_context2.next=5;break}return _context2.abrupt("return",cacheHit);case 5:return key,cacheMiss=this.getValue(key),this.cache.set(key,cacheMiss),_context2.abrupt("return",cacheMiss);case 9:case"end":return _context2.stop()}}),_callee2,this)})))}}]),AbstractCacheService}(),atft_ObjLoaderService=function(_AbstractCacheService){_inherits(ObjLoaderService,_AbstractCacheService);var _super15=_createSuper(ObjLoaderService);function ObjLoaderService(){var _this18;return _classCallCheck(this,ObjLoaderService),(_this18=_super15.apply(this,arguments)).loader=new OBJLoader.a,_this18}return _createClass(ObjLoaderService,[{key:"getValue",value:function getValue(key){var _this19=this;return new Promise((function(resolve,reject){_this19.loader.load(key,(function(model){resolve(model)}),void 0,reject)}))}},{key:"setMaterials",value:function setMaterials(materialCreator){this.loader.setMaterials(materialCreator)}}]),ObjLoaderService}(atft_AbstractCacheService);atft_ObjLoaderService.decorators=[{type:core.Injectable}];var atft_ObjLoaderComponent=function(_AbstractModelLoader2){_inherits(ObjLoaderComponent,_AbstractModelLoader2);var _super16=_createSuper(ObjLoaderComponent);function ObjLoaderComponent(rendererService,parent,objLoader){var _this20;return _classCallCheck(this,ObjLoaderComponent),(_this20=_super16.call(this,rendererService,parent)).rendererService=rendererService,_this20.parent=parent,_this20.objLoader=objLoader,_this20.mtlLoader=new MTLLoader.a,_this20}return _createClass(ObjLoaderComponent,[{key:"texturePath",set:function set(newTexturePath){this.resourcePath=newTexturePath}},{key:"loadLazyObject",value:function loadLazyObject(){return Object(tslib_es6.a)(this,void 0,void 0,regeneratorRuntime.mark((function _callee3(){var preloadingStep,obj,_this21=this;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!this.material){_context3.next=4;break}return preloadingStep=new Promise((function(resolve,reject){_this21.mtlLoader.setResourcePath(_this21.resourcePath),_this21.mtlLoader.load(_this21.material,(function(materialCreator){materialCreator.preload(),_this21.objLoader.setMaterials(materialCreator),resolve()}),void 0,reject)})),_context3.next=4,preloadingStep;case 4:return _context3.next=6,this.objLoader.load(this.model);case 6:return obj=_context3.sent,_context3.abrupt("return",obj.clone());case 8:case"end":return _context3.stop()}}),_callee3,this)})))}}]),ObjLoaderComponent}(AbstractModelLoader);atft_ObjLoaderComponent.decorators=[{type:core.Component,args:[{selector:"atft-obj-loader",providers:[provideParent(atft_ObjLoaderComponent)],template:"<ng-content></ng-content>"}]}],atft_ObjLoaderComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]},{type:atft_ObjLoaderService}]},atft_ObjLoaderComponent.propDecorators={material:[{type:core.Input}],texturePath:[{type:core.Input}],resourcePath:[{type:core.Input}]};var atft_FontService=function(_AbstractCacheService2){_inherits(FontService,_AbstractCacheService2);var _super17=_createSuper(FontService);function FontService(){return _classCallCheck(this,FontService),_super17.apply(this,arguments)}return _createClass(FontService,[{key:"getValue",value:function getValue(key){return new Promise((function(resolve){(new three_module.w).load(key,resolve)}))}}]),FontService}(atft_AbstractCacheService);atft_FontService.decorators=[{type:core.Injectable}];var atft_SVGLoader=function(_Loader){_inherits(SVGLoader,_Loader);var _super18=_createSuper(SVGLoader);function SVGLoader(manager){var _this22;return _classCallCheck(this,SVGLoader),(_this22=_super18.call(this,manager)).defaultDPI=90,_this22.defaultUnit="px",_this22.defs=[],_this22.defaultDPI=90,_this22.defaultUnit="px",_this22}return _createClass(SVGLoader,[{key:"load",value:function load(url,onLoad,onProgress,onError){var scope=this,loader=new three_module.t(scope.manager);loader.setPath(scope.path),loader.setRequestHeader(scope.requestHeader),loader.setWithCredentials(scope.withCredentials),loader.load(url,(function(text){try{onLoad(scope.parse(text))}catch(e){onError?onError(e):console.error(e),scope.manager.itemError(url)}}),onProgress,onError)}},{key:"parse",value:function parse(text){var scope=this;function parseArcCommand(path,rx,ry,x_axis_rotation,large_arc_flag,sweep_flag,start,end){if(0!=rx&&0!=ry){x_axis_rotation=x_axis_rotation*Math.PI/180,rx=Math.abs(rx),ry=Math.abs(ry);var dx2=(start.x-end.x)/2,dy2=(start.y-end.y)/2,x1p=Math.cos(x_axis_rotation)*dx2+Math.sin(x_axis_rotation)*dy2,y1p=-Math.sin(x_axis_rotation)*dx2+Math.cos(x_axis_rotation)*dy2,rxs=rx*rx,rys=ry*ry,x1ps=x1p*x1p,y1ps=y1p*y1p,cr=x1ps/rxs+y1ps/rys;if(cr>1){var s=Math.sqrt(cr);rxs=(rx*=s)*rx,rys=(ry*=s)*ry}var dq=rxs*y1ps+rys*x1ps,pq=(rxs*rys-dq)/dq,q=Math.sqrt(Math.max(0,pq));large_arc_flag===sweep_flag&&(q=-q);var cxp=q*rx*y1p/ry,cyp=-q*ry*x1p/rx,cx=Math.cos(x_axis_rotation)*cxp-Math.sin(x_axis_rotation)*cyp+(start.x+end.x)/2,cy=Math.sin(x_axis_rotation)*cxp+Math.cos(x_axis_rotation)*cyp+(start.y+end.y)/2,theta=svgAngle(1,0,(x1p-cxp)/rx,(y1p-cyp)/ry),delta=svgAngle((x1p-cxp)/rx,(y1p-cyp)/ry,(-x1p-cxp)/rx,(-y1p-cyp)/ry)%(2*Math.PI);path.currentPath.absellipse(cx,cy,rx,ry,theta,theta+delta,0===sweep_flag,x_axis_rotation)}else path.lineTo(end.x,end.y)}function svgAngle(ux,uy,vx,vy){var dot=ux*vx+uy*vy,len=Math.sqrt(ux*ux+uy*uy)*Math.sqrt(vx*vx+vy*vy),ang=Math.acos(Math.max(-1,Math.min(1,dot/len)));return ux*vy-uy*vx<0&&(ang=-ang),ang}function parseStyle(node,style){style=Object.assign({},style);var stylesheetStyles={};if(node.hasAttribute("class"))for(var classSelectors=node.getAttribute("class").split(/\s/).filter(Boolean).map((function(i){return i.trim()})),i=0;i<classSelectors.length;i++)stylesheetStyles=Object.assign(stylesheetStyles,stylesheets["."+classSelectors[i]]);function addStyle(svgName,jsName,adjustFunction){void 0===adjustFunction&&(adjustFunction=function copy(v){if(v.startsWith("url")){var ref=v.match(/url\(#(.*)\)/);return ref&&ref[1]?scope.defs[ref[1]]:v}return v}),node.hasAttribute(svgName)&&(style[jsName]=adjustFunction(node.getAttribute(svgName))),stylesheetStyles[svgName]&&(style[jsName]=adjustFunction(stylesheetStyles[svgName])),node.style&&""!==node.style[svgName]&&(style[jsName]=adjustFunction(node.style[svgName]))}function clamp(v){return Math.max(0,Math.min(1,parseFloatWithUnits(v)))}function positive(v){return Math.max(0,parseFloatWithUnits(v))}return node.hasAttribute("id")&&(stylesheetStyles=Object.assign(stylesheetStyles,stylesheets["#"+node.getAttribute("id")])),addStyle("fill","fill"),addStyle("fill-opacity","fillOpacity",clamp),addStyle("opacity","opacity",clamp),addStyle("stroke","stroke"),addStyle("stroke-opacity","strokeOpacity",clamp),addStyle("stroke-width","strokeWidth",positive),addStyle("stroke-linejoin","strokeLineJoin"),addStyle("stroke-linecap","strokeLineCap"),addStyle("stroke-miterlimit","strokeMiterLimit",positive),addStyle("visibility","visibility"),style}function getReflection(a,b){return a-(b-a)}function parseFloats(input,flags,stride){if("string"!=typeof input)throw new TypeError("Invalid input: "+_typeof(input));var current,RE={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},state=0,seenComma=!0,number="",exponent="",result=[];function throwSyntaxError(current,i,partial){throw new SyntaxError('Unexpected character "'+current+'" at index '+i+".")}function newNumber(){""!==number&&(""===exponent?result.push(Number(number)):result.push(Number(number)*Math.pow(10,Number(exponent)))),number="",exponent=""}for(var length=input.length,i=0;i<length;i++)if(current=input[i],Array.isArray(flags)&&flags.includes(result.length%stride)&&RE.FLAGS.test(current))state=1,number=current,newNumber();else{if(0===state){if(RE.WHITESPACE.test(current))continue;if(RE.DIGIT.test(current)||RE.SIGN.test(current)){state=1,number=current;continue}if(RE.POINT.test(current)){state=2,number=current;continue}RE.COMMA.test(current)&&(seenComma&&throwSyntaxError(current,i),seenComma=!0)}if(1===state){if(RE.DIGIT.test(current)){number+=current;continue}if(RE.POINT.test(current)){number+=current,state=2;continue}if(RE.EXP.test(current)){state=3;continue}RE.SIGN.test(current)&&1===number.length&&RE.SIGN.test(number[0])&&throwSyntaxError(current,i)}if(2===state){if(RE.DIGIT.test(current)){number+=current;continue}if(RE.EXP.test(current)){state=3;continue}RE.POINT.test(current)&&"."===number[number.length-1]&&throwSyntaxError(current,i)}if(3===state){if(RE.DIGIT.test(current)){exponent+=current;continue}if(RE.SIGN.test(current)){if(""===exponent){exponent+=current;continue}1===exponent.length&&RE.SIGN.test(exponent)&&throwSyntaxError(current,i)}}RE.WHITESPACE.test(current)?(newNumber(),state=0,seenComma=!1):RE.COMMA.test(current)?(newNumber(),state=0,seenComma=!0):RE.SIGN.test(current)?(newNumber(),state=1,number=current):RE.POINT.test(current)?(newNumber(),state=2,number=current):throwSyntaxError(current,i)}return newNumber(),result}var units=["mm","cm","in","pt","pc","px"],unitConversion={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function parseFloatWithUnits(string){var theUnit="px";if("string"==typeof string||string instanceof String)for(var i=0,n=units.length;i<n;i++){var u=units[i];if(string.endsWith(u)){theUnit=u,string=string.substring(0,string.length-u.length);break}}var scale=void 0;return"px"===theUnit&&"px"!==scope.defaultUnit?scale=unitConversion.in[scope.defaultUnit]/scope.defaultDPI:(scale=unitConversion[theUnit][scope.defaultUnit])<0&&(scale=unitConversion[theUnit].in*scope.defaultDPI),scale*parseFloat(string)}function getTransformScaleX(m){var te=m.elements;return Math.sqrt(te[0]*te[0]+te[1]*te[1])}function getTransformScaleY(m){var te=m.elements;return Math.sqrt(te[3]*te[3]+te[4]*te[4])}var paths=[],stylesheets={},transformStack=[],tempTransform0=new three_module.U,tempTransform1=new three_module.U,tempTransform2=new three_module.U,tempTransform3=new three_module.U,tempV2=new three_module.Lb,tempV3=new three_module.Mb,currentTransform=new three_module.U,xml=(new DOMParser).parseFromString(text,"image/svg+xml");return function parseNode(node,style){if(1===node.nodeType){var transform=function getNodeTransform(node){if(!(node.hasAttribute("transform")||"use"===node.nodeName&&(node.hasAttribute("x")||node.hasAttribute("y"))))return null;var transform=function parseNodeTransform(node){var transform=new three_module.U,currentTransform=tempTransform0;if("use"===node.nodeName&&(node.hasAttribute("x")||node.hasAttribute("y"))){var tx=parseFloatWithUnits(node.getAttribute("x")),ty=parseFloatWithUnits(node.getAttribute("y"));transform.translate(tx,ty)}if(node.hasAttribute("transform"))for(var transformsTexts=node.getAttribute("transform").split(")"),tIndex=transformsTexts.length-1;tIndex>=0;tIndex--){var transformText=transformsTexts[tIndex].trim();if(""!==transformText){var openParPos=transformText.indexOf("("),closeParPos=transformText.length;if(openParPos>0&&openParPos<closeParPos){var transformType=transformText.substr(0,openParPos),array=parseFloats(transformText.substr(openParPos+1,closeParPos-openParPos-1));switch(currentTransform.identity(),transformType){case"translate":if(array.length>=1){var _tx=array[0],_ty=_tx;array.length>=2&&(_ty=array[1]),currentTransform.translate(_tx,_ty)}break;case"rotate":if(array.length>=1){var angle,cx=0,cy=0;angle=-array[0]*Math.PI/180,array.length>=3&&(cx=array[1],cy=array[2]),tempTransform1.identity().translate(-cx,-cy),tempTransform2.identity().rotate(angle),tempTransform3.multiplyMatrices(tempTransform2,tempTransform1),tempTransform1.identity().translate(cx,cy),currentTransform.multiplyMatrices(tempTransform1,tempTransform3)}break;case"scale":if(array.length>=1){var scaleX=array[0],scaleY=scaleX;array.length>=2&&(scaleY=array[1]),currentTransform.scale(scaleX,scaleY)}break;case"skewX":1===array.length&&currentTransform.set(1,Math.tan(array[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===array.length&&currentTransform.set(1,0,0,Math.tan(array[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===array.length&&currentTransform.set(array[0],array[2],array[4],array[1],array[3],array[5],0,0,1)}}transform.premultiply(currentTransform)}}return transform}(node);transformStack.length>0&&transform.premultiply(transformStack[transformStack.length-1]);return currentTransform.copy(transform),transformStack.push(transform),transform}(node),traverseChildNodes=!0,path=null;switch(node.nodeName){case"svg":break;case"style":!function parseCSSStylesheet(node){if(!node.sheet||!node.sheet.cssRules||!node.sheet.cssRules.length)return;for(var i=0;i<node.sheet.cssRules.length;i++){var stylesheet=node.sheet.cssRules[i];if(1===stylesheet.type)for(var selectorList=stylesheet.selectorText.split(/,/gm).filter(Boolean).map((function(i){return i.trim()})),j=0;j<selectorList.length;j++)stylesheets[selectorList[j]]=Object.assign(stylesheets[selectorList[j]]||{},stylesheet.style)}}(node);break;case"g":style=parseStyle(node,style);break;case"path":style=parseStyle(node,style),node.hasAttribute("d")&&(path=function parsePathNode(node){for(var path=new three_module.zb,point=new three_module.Lb,control=new three_module.Lb,firstPoint=new three_module.Lb,isFirstPoint=!0,doSetFirstPoint=!1,commands=node.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi),i=0,l=commands.length;i<l;i++){var command=commands[i],type=command.charAt(0),_data=command.substr(1).trim();!0===isFirstPoint&&(doSetFirstPoint=!0,isFirstPoint=!1);var numbers=void 0;switch(type){case"M":numbers=parseFloats(_data);for(var j=0,jl=numbers.length;j<jl;j+=2)point.x=numbers[j+0],point.y=numbers[j+1],control.x=point.x,control.y=point.y,0===j?path.moveTo(point.x,point.y):path.lineTo(point.x,point.y),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"H":numbers=parseFloats(_data);for(var _j=0,_jl=numbers.length;_j<_jl;_j++)point.x=numbers[_j],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===_j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"V":numbers=parseFloats(_data);for(var _j2=0,_jl2=numbers.length;_j2<_jl2;_j2++)point.y=numbers[_j2],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===_j2&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"L":numbers=parseFloats(_data);for(var _j3=0,_jl3=numbers.length;_j3<_jl3;_j3+=2)point.x=numbers[_j3+0],point.y=numbers[_j3+1],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===_j3&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"C":numbers=parseFloats(_data);for(var _j4=0,_jl4=numbers.length;_j4<_jl4;_j4+=6)path.bezierCurveTo(numbers[_j4+0],numbers[_j4+1],numbers[_j4+2],numbers[_j4+3],numbers[_j4+4],numbers[_j4+5]),control.x=numbers[_j4+2],control.y=numbers[_j4+3],point.x=numbers[_j4+4],point.y=numbers[_j4+5],0===_j4&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"S":numbers=parseFloats(_data);for(var _j5=0,_jl5=numbers.length;_j5<_jl5;_j5+=4)path.bezierCurveTo(getReflection(point.x,control.x),getReflection(point.y,control.y),numbers[_j5+0],numbers[_j5+1],numbers[_j5+2],numbers[_j5+3]),control.x=numbers[_j5+0],control.y=numbers[_j5+1],point.x=numbers[_j5+2],point.y=numbers[_j5+3],0===_j5&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"Q":numbers=parseFloats(_data);for(var _j6=0,_jl6=numbers.length;_j6<_jl6;_j6+=4)path.quadraticCurveTo(numbers[_j6+0],numbers[_j6+1],numbers[_j6+2],numbers[_j6+3]),control.x=numbers[_j6+0],control.y=numbers[_j6+1],point.x=numbers[_j6+2],point.y=numbers[_j6+3],0===_j6&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"T":numbers=parseFloats(_data);for(var _j7=0,_jl7=numbers.length;_j7<_jl7;_j7+=2){var rx=getReflection(point.x,control.x),ry=getReflection(point.y,control.y);path.quadraticCurveTo(rx,ry,numbers[_j7+0],numbers[_j7+1]),control.x=rx,control.y=ry,point.x=numbers[_j7+0],point.y=numbers[_j7+1],0===_j7&&!0===doSetFirstPoint&&firstPoint.copy(point)}break;case"A":numbers=parseFloats(_data,[3,4],7);for(var _j8=0,_jl8=numbers.length;_j8<_jl8;_j8+=7)if(numbers[_j8+5]!=point.x||numbers[_j8+6]!=point.y){var start=point.clone();point.x=numbers[_j8+5],point.y=numbers[_j8+6],control.x=point.x,control.y=point.y,parseArcCommand(path,numbers[_j8],numbers[_j8+1],numbers[_j8+2],numbers[_j8+3],numbers[_j8+4],start,point),0===_j8&&!0===doSetFirstPoint&&firstPoint.copy(point)}break;case"m":numbers=parseFloats(_data);for(var _j9=0,_jl9=numbers.length;_j9<_jl9;_j9+=2)point.x+=numbers[_j9+0],point.y+=numbers[_j9+1],control.x=point.x,control.y=point.y,0===_j9?path.moveTo(point.x,point.y):path.lineTo(point.x,point.y),0===_j9&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"h":numbers=parseFloats(_data);for(var _j10=0,_jl10=numbers.length;_j10<_jl10;_j10++)point.x+=numbers[_j10],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===_j10&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"v":numbers=parseFloats(_data);for(var _j11=0,_jl11=numbers.length;_j11<_jl11;_j11++)point.y+=numbers[_j11],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===_j11&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"l":numbers=parseFloats(_data);for(var _j12=0,_jl12=numbers.length;_j12<_jl12;_j12+=2)point.x+=numbers[_j12+0],point.y+=numbers[_j12+1],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===_j12&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"c":numbers=parseFloats(_data);for(var _j13=0,_jl13=numbers.length;_j13<_jl13;_j13+=6)path.bezierCurveTo(point.x+numbers[_j13+0],point.y+numbers[_j13+1],point.x+numbers[_j13+2],point.y+numbers[_j13+3],point.x+numbers[_j13+4],point.y+numbers[_j13+5]),control.x=point.x+numbers[_j13+2],control.y=point.y+numbers[_j13+3],point.x+=numbers[_j13+4],point.y+=numbers[_j13+5],0===_j13&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"s":numbers=parseFloats(_data);for(var _j14=0,_jl14=numbers.length;_j14<_jl14;_j14+=4)path.bezierCurveTo(getReflection(point.x,control.x),getReflection(point.y,control.y),point.x+numbers[_j14+0],point.y+numbers[_j14+1],point.x+numbers[_j14+2],point.y+numbers[_j14+3]),control.x=point.x+numbers[_j14+0],control.y=point.y+numbers[_j14+1],point.x+=numbers[_j14+2],point.y+=numbers[_j14+3],0===_j14&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"q":numbers=parseFloats(_data);for(var _j15=0,_jl15=numbers.length;_j15<_jl15;_j15+=4)path.quadraticCurveTo(point.x+numbers[_j15+0],point.y+numbers[_j15+1],point.x+numbers[_j15+2],point.y+numbers[_j15+3]),control.x=point.x+numbers[_j15+0],control.y=point.y+numbers[_j15+1],point.x+=numbers[_j15+2],point.y+=numbers[_j15+3],0===_j15&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"t":numbers=parseFloats(_data);for(var _j16=0,_jl16=numbers.length;_j16<_jl16;_j16+=2){var _rx=getReflection(point.x,control.x),_ry=getReflection(point.y,control.y);path.quadraticCurveTo(_rx,_ry,point.x+numbers[_j16+0],point.y+numbers[_j16+1]),control.x=_rx,control.y=_ry,point.x=point.x+numbers[_j16+0],point.y=point.y+numbers[_j16+1],0===_j16&&!0===doSetFirstPoint&&firstPoint.copy(point)}break;case"a":numbers=parseFloats(_data,[3,4],7);for(var _j17=0,_jl17=numbers.length;_j17<_jl17;_j17+=7)if(0!=numbers[_j17+5]||0!=numbers[_j17+6]){var _start=point.clone();point.x+=numbers[_j17+5],point.y+=numbers[_j17+6],control.x=point.x,control.y=point.y,parseArcCommand(path,numbers[_j17],numbers[_j17+1],numbers[_j17+2],numbers[_j17+3],numbers[_j17+4],_start,point),0===_j17&&!0===doSetFirstPoint&&firstPoint.copy(point)}break;case"Z":case"z":path.currentPath.autoClose=!0,path.currentPath.curves.length>0&&(point.copy(firstPoint),path.currentPath.currentPoint.copy(point),isFirstPoint=!0);break;default:console.warn(command)}doSetFirstPoint=!1}return path}(node));break;case"rect":style=parseStyle(node,style),path=function parseRectNode(node){var x=parseFloatWithUnits(node.getAttribute("x")||0),y=parseFloatWithUnits(node.getAttribute("y")||0),rx=parseFloatWithUnits(node.getAttribute("rx")||0),ry=parseFloatWithUnits(node.getAttribute("ry")||0),w=parseFloatWithUnits(node.getAttribute("width")),h=parseFloatWithUnits(node.getAttribute("height")),path=new three_module.zb;path.moveTo(x+2*rx,y),path.lineTo(x+w-2*rx,y),(0!==rx||0!==ry)&&path.bezierCurveTo(x+w,y,x+w,y,x+w,y+2*ry);path.lineTo(x+w,y+h-2*ry),(0!==rx||0!==ry)&&path.bezierCurveTo(x+w,y+h,x+w,y+h,x+w-2*rx,y+h);path.lineTo(x+2*rx,y+h),(0!==rx||0!==ry)&&path.bezierCurveTo(x,y+h,x,y+h,x,y+h-2*ry);path.lineTo(x,y+2*ry),(0!==rx||0!==ry)&&path.bezierCurveTo(x,y,x,y,x+2*rx,y);return path}(node);break;case"polygon":style=parseStyle(node,style),path=function parsePolygonNode(node){function iterator(match,a,b){var x=parseFloatWithUnits(a),y=parseFloatWithUnits(b);0===index?path.moveTo(x,y):path.lineTo(x,y),index++}var path=new three_module.zb,index=0;return node.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,iterator),path.currentPath.autoClose=!0,path}(node);break;case"polyline":style=parseStyle(node,style),path=function parsePolylineNode(node){function iterator(match,a,b){var x=parseFloatWithUnits(a),y=parseFloatWithUnits(b);0===index?path.moveTo(x,y):path.lineTo(x,y),index++}var path=new three_module.zb,index=0;return node.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,iterator),path.currentPath.autoClose=!1,path}(node);break;case"circle":style=parseStyle(node,style),path=function parseCircleNode(node){var x=parseFloatWithUnits(node.getAttribute("cx")||0),y=parseFloatWithUnits(node.getAttribute("cy")||0),r=parseFloatWithUnits(node.getAttribute("r")||0),subpath=new three_module.hb;subpath.absarc(x,y,r,0,2*Math.PI,!0);var path=new three_module.zb;return path.subPaths.push(subpath),path}(node);break;case"ellipse":style=parseStyle(node,style),path=function parseEllipseNode(node){var x=parseFloatWithUnits(node.getAttribute("cx")||0),y=parseFloatWithUnits(node.getAttribute("cy")||0),rx=parseFloatWithUnits(node.getAttribute("rx")||0),ry=parseFloatWithUnits(node.getAttribute("ry")||0),subpath=new three_module.hb;subpath.absellipse(x,y,rx,ry,0,2*Math.PI,!0,0);var path=new three_module.zb;return path.subPaths.push(subpath),path}(node);break;case"line":style=parseStyle(node,style),path=function parseLineNode(node){var x1=parseFloatWithUnits(node.getAttribute("x1")||0),y1=parseFloatWithUnits(node.getAttribute("y1")||0),x2=parseFloatWithUnits(node.getAttribute("x2")||0),y2=parseFloatWithUnits(node.getAttribute("y2")||0),path=new three_module.zb;return path.moveTo(x1,y1),path.lineTo(x2,y2),path.currentPath.autoClose=!1,path}(node);break;case"defs":traverseChildNodes=!1,function parseDefs(node){scope.defs||(scope.defs=[]);var _step,_iterator=_createForOfIteratorHelper(node.childNodes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step2,_node=_step.value,_iterator2=_createForOfIteratorHelper(_node.childNodes);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var stop=_step2.value;if(stop.hasAttribute&&stop.hasAttribute("stop-color")){scope.defs[_node.id]=stop.getAttribute("stop-color");break}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}(node);break;case"use":style=parseStyle(node,style);var usedNodeId=node.href.baseVal.substring(1),usedNode=node.viewportElement.getElementById(usedNodeId);usedNode?parseNode(usedNode,style):console.warn("SVGLoader: 'use node' references non-existent node id: "+usedNodeId)}if(path&&(void 0!==style.fill&&"none"!==style.fill&&path.color.setStyle(style.fill),function transformPath(path,m){function transfVec2(v2){tempV3.set(v2.x,v2.y,1).applyMatrix3(m),v2.set(tempV3.x,tempV3.y)}for(var isRotated=function isTransformRotated(m){return 0!==m.elements[1]||0!==m.elements[3]}(m),subPaths=path.subPaths,i=0,n=subPaths.length;i<n;i++)for(var curves=subPaths[i].curves,j=0;j<curves.length;j++){var curve=curves[j];curve.isLineCurve?(transfVec2(curve.v1),transfVec2(curve.v2)):curve.isCubicBezierCurve?(transfVec2(curve.v0),transfVec2(curve.v1),transfVec2(curve.v2),transfVec2(curve.v3)):curve.isQuadraticBezierCurve?(transfVec2(curve.v0),transfVec2(curve.v1),transfVec2(curve.v2)):curve.isEllipseCurve&&(isRotated&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),tempV2.set(curve.aX,curve.aY),transfVec2(tempV2),curve.aX=tempV2.x,curve.aY=tempV2.y,curve.xRadius*=getTransformScaleX(m),curve.yRadius*=getTransformScaleY(m))}}(path,currentTransform),paths.push(path),path.userData={node:node,style:style}),traverseChildNodes)for(var nodes=node.childNodes,i=0;i<nodes.length;i++)parseNode(nodes[i],style);transform&&(transformStack.pop(),transformStack.length>0?currentTransform.copy(transformStack[transformStack.length-1]):currentTransform.identity())}}(xml.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:paths,xml:xml.documentElement}}}],[{key:"createShapes",value:function createShapes(shapePath){var IntersectionLocationType_ORIGIN=0,IntersectionLocationType_DESTINATION=1,IntersectionLocationType_BETWEEN=2,IntersectionLocationType_LEFT=3,IntersectionLocationType_RIGHT=4,IntersectionLocationType_BEHIND=5,IntersectionLocationType_BEYOND=6,classifyResult={loc:IntersectionLocationType_ORIGIN,t:0};function findEdgeIntersection(a0,a1,b0,b1){var x1=a0.x,x2=a1.x,x3=b0.x,x4=b1.x,y1=a0.y,y2=a1.y,y3=b0.y,y4=b1.y,nom1=(x4-x3)*(y1-y3)-(y4-y3)*(x1-x3),denom=(y4-y3)*(x2-x1)-(x4-x3)*(y2-y1),t1=nom1/denom,t2=((x2-x1)*(y1-y3)-(y2-y1)*(x1-x3))/denom;if(0===denom&&0!==nom1||t1<=0||t1>=1||t2<0||t2>1)return null;if(0===nom1&&0===denom){for(var i=0;i<2;i++){if(classifyPoint(0===i?b0:b1,a0,a1),classifyResult.loc==IntersectionLocationType_ORIGIN){var point=0===i?b0:b1;return{x:point.x,y:point.y,t:classifyResult.t}}if(classifyResult.loc==IntersectionLocationType_BETWEEN)return{x:+(x1+classifyResult.t*(x2-x1)).toPrecision(10),y:+(y1+classifyResult.t*(y2-y1)).toPrecision(10),t:classifyResult.t}}return null}for(var _i=0;_i<2;_i++)if(classifyPoint(0===_i?b0:b1,a0,a1),classifyResult.loc==IntersectionLocationType_ORIGIN){var _point=0===_i?b0:b1;return{x:_point.x,y:_point.y,t:classifyResult.t}}return{x:+(x1+t1*(x2-x1)).toPrecision(10),y:+(y1+t1*(y2-y1)).toPrecision(10),t:t1}}function classifyPoint(p,edgeStart,edgeEnd){var t,ax=edgeEnd.x-edgeStart.x,ay=edgeEnd.y-edgeStart.y,bx=p.x-edgeStart.x,by=p.y-edgeStart.y,sa=ax*by-bx*ay;if(p.x===edgeStart.x&&p.y===edgeStart.y)return classifyResult.loc=IntersectionLocationType_ORIGIN,void(classifyResult.t=0);if(p.x===edgeEnd.x&&p.y===edgeEnd.y)return classifyResult.loc=IntersectionLocationType_DESTINATION,void(classifyResult.t=1);sa<-Number.EPSILON?classifyResult.loc=IntersectionLocationType_LEFT:sa>Number.EPSILON?classifyResult.loc=IntersectionLocationType_RIGHT:ax*bx<0||ay*by<0?classifyResult.loc=IntersectionLocationType_BEHIND:Math.sqrt(ax*ax+ay*ay)<Math.sqrt(bx*bx+by*by)?classifyResult.loc=IntersectionLocationType_BEYOND:(t=0!==ax?bx/ax:by/ay,classifyResult.loc=IntersectionLocationType_BETWEEN,classifyResult.t=t)}function getScanlineIntersections(scanline,boundingBox,paths){var center=new three_module.Lb;boundingBox.getCenter(center);var allIntersections=[];return paths.forEach((function(path){path.boundingBox.containsPoint(center)&&function getIntersections(path1,path2){for(var intersectionsRaw=[],intersections=[],index=1;index<path1.length;index++)for(var path1EdgeStart=path1[index-1],path1EdgeEnd=path1[index],_loop=function _loop(index2){var path2EdgeStart=path2[index2-1],path2EdgeEnd=path2[index2],intersection=findEdgeIntersection(path1EdgeStart,path1EdgeEnd,path2EdgeStart,path2EdgeEnd);null!==intersection&&void 0===intersectionsRaw.find((function(i){return i.t<=intersection.t+Number.EPSILON&&i.t>=intersection.t-Number.EPSILON}))&&(intersectionsRaw.push(intersection),intersections.push(new three_module.Lb(intersection.x,intersection.y)))},index2=1;index2<path2.length;index2++)_loop(index2);return intersections}(scanline,path.points).forEach((function(p){allIntersections.push({identifier:path.identifier,isCW:path.isCW,point:p})}))})),allIntersections.sort((function(i1,i2){return i1.point.x-i2.point.x})),allIntersections}var identifier=0,scanlineMinX=999999999,scanlineMaxX=-999999999,simplePaths=shapePath.subPaths.map((function(p){for(var points=p.getPoints(),maxY=-999999999,minY=999999999,maxX=-999999999,minX=999999999,i=0;i<points.length;i++){var _p=points[i];_p.y>maxY&&(maxY=_p.y),_p.y<minY&&(minY=_p.y),_p.x>maxX&&(maxX=_p.x),_p.x<minX&&(minX=_p.x)}return scanlineMaxX<=maxX&&(scanlineMaxX=maxX+1),scanlineMinX>=minX&&(scanlineMinX=minX-1),{points:points,isCW:three_module.Ab.isClockWise(points),identifier:identifier++,boundingBox:new three_module.f(new three_module.Lb(minX,minY),new three_module.Lb(maxX,maxY))}})),isAHole=(simplePaths=simplePaths.filter((function(sp){return sp.points.length>0}))).map((function(p){return function isHoleTo(simplePath,allPaths,scanlineMinX,scanlineMaxX,_fillRule){null!=_fillRule&&""!==_fillRule||(_fillRule="nonzero");var centerBoundingBox=new three_module.Lb;simplePath.boundingBox.getCenter(centerBoundingBox);var scanlineIntersections=getScanlineIntersections([new three_module.Lb(scanlineMinX,centerBoundingBox.y),new three_module.Lb(scanlineMaxX,centerBoundingBox.y)],simplePath.boundingBox,allPaths);scanlineIntersections.sort((function(i1,i2){return i1.point.x-i2.point.x}));var baseIntersections=[],otherIntersections=[];scanlineIntersections.forEach((function(i){i.identifier===simplePath.identifier?baseIntersections.push(i):otherIntersections.push(i)}));for(var firstXOfPath=baseIntersections[0].point.x,stack=[],i=0;i<otherIntersections.length&&otherIntersections[i].point.x<firstXOfPath;)stack.length>0&&stack[stack.length-1]===otherIntersections[i].identifier?stack.pop():stack.push(otherIntersections[i].identifier),i++;if(stack.push(simplePath.identifier),"evenodd"===_fillRule){var isHole=stack.length%2==0,isHoleFor=stack[stack.length-2];return{identifier:simplePath.identifier,isHole:isHole,for:isHoleFor}}if("nonzero"===_fillRule){for(var _isHole=!0,_isHoleFor=null,lastCWValue=null,_i2=0;_i2<stack.length;_i2++){var _identifier=stack[_i2];_isHole?(lastCWValue=allPaths[_identifier].isCW,_isHole=!1,_isHoleFor=_identifier):lastCWValue!==allPaths[_identifier].isCW&&(lastCWValue=allPaths[_identifier].isCW,_isHole=!0)}return{identifier:simplePath.identifier,isHole:_isHole,for:_isHoleFor}}console.warn('fill-rule: "'+_fillRule+'" is currently not implemented.')}(p,simplePaths,scanlineMinX,scanlineMaxX,shapePath.userData.style.fillRule)})),shapesToReturn=[];return simplePaths.forEach((function(p){if(!isAHole[p.identifier].isHole){var shape=new three_module.xb(p.points);isAHole.filter((function(h){return h.isHole&&h.for===p.identifier})).forEach((function(h){var path=simplePaths[h.identifier];shape.holes.push(new three_module.hb(path.points))})),shapesToReturn.push(shape)}})),shapesToReturn}},{key:"getStrokeStyle",value:function getStrokeStyle(width,color,lineJoin,lineCap,miterLimit){return{strokeColor:color=void 0!==color?color:"#000",strokeWidth:width=void 0!==width?width:1,strokeLineJoin:lineJoin=void 0!==lineJoin?lineJoin:"miter",strokeLineCap:lineCap=void 0!==lineCap?lineCap:"butt",strokeMiterLimit:miterLimit=void 0!==miterLimit?miterLimit:4}}},{key:"pointsToStroke",value:function pointsToStroke(points,style,arcDivisions,minDistance){var vertices=[],normals=[],uvs=[];if(0===SVGLoader.pointsToStrokeWithBuffers(points,style,arcDivisions,minDistance,vertices,normals,uvs))return null;var geometry=new three_module.j;return geometry.setAttribute("position",new three_module.u(vertices,3)),geometry.setAttribute("normal",new three_module.u(normals,3)),geometry.setAttribute("uv",new three_module.u(uvs,2)),geometry}},{key:"pointsToStrokeWithBuffers",value:function pointsToStrokeWithBuffers(points,style,arcDivisions,minDistance,vertices,normals,uvs,vertexOffset){var tempV2_1=new three_module.Lb,tempV2_2=new three_module.Lb,tempV2_3=new three_module.Lb,tempV2_4=new three_module.Lb,tempV2_5=new three_module.Lb,tempV2_6=new three_module.Lb,tempV2_7=new three_module.Lb,lastPointL=new three_module.Lb,lastPointR=new three_module.Lb,point0L=new three_module.Lb,point0R=new three_module.Lb,currentPointL=new three_module.Lb,currentPointR=new three_module.Lb,nextPointL=new three_module.Lb,nextPointR=new three_module.Lb,innerPoint=new three_module.Lb,outerPoint=new three_module.Lb;arcDivisions=void 0!==arcDivisions?arcDivisions:12,minDistance=void 0!==minDistance?minDistance:.001,vertexOffset=void 0!==vertexOffset?vertexOffset:0;var numPoints=(points=function removeDuplicatedPoints(points){for(var dupPoints=!1,i=1,n=points.length-1;i<n;i++)if(points[i].distanceTo(points[i+1])<minDistance){dupPoints=!0;break}if(!dupPoints)return points;var newPoints=[];newPoints.push(points[0]);for(var _i3=1,_n=points.length-1;_i3<_n;_i3++)points[_i3].distanceTo(points[_i3+1])>=minDistance&&newPoints.push(points[_i3]);return newPoints.push(points[points.length-1]),newPoints}(points)).length;if(numPoints<2)return 0;var currentPoint,nextPoint,u1,innerSideModified,joinIsOnLeftSide,isMiter,isClosed=points[0].equals(points[numPoints-1]),previousPoint=points[0],strokeWidth2=style.strokeWidth/2,deltaU=1/(numPoints-1),u0=0,initialJoinIsOnLeftSide=!1,numVertices=0,currentCoordinate=3*vertexOffset,currentCoordinateUV=2*vertexOffset;getNormal(points[0],points[1],tempV2_1).multiplyScalar(strokeWidth2),lastPointL.copy(points[0]).sub(tempV2_1),lastPointR.copy(points[0]).add(tempV2_1),point0L.copy(lastPointL),point0R.copy(lastPointR);for(var iPoint=1;iPoint<numPoints;iPoint++){currentPoint=points[iPoint],nextPoint=iPoint===numPoints-1?isClosed?points[1]:void 0:points[iPoint+1];var normal1=tempV2_1;if(getNormal(previousPoint,currentPoint,normal1),tempV2_3.copy(normal1).multiplyScalar(strokeWidth2),currentPointL.copy(currentPoint).sub(tempV2_3),currentPointR.copy(currentPoint).add(tempV2_3),u1=u0+deltaU,innerSideModified=!1,void 0!==nextPoint){getNormal(currentPoint,nextPoint,tempV2_2),tempV2_3.copy(tempV2_2).multiplyScalar(strokeWidth2),nextPointL.copy(currentPoint).sub(tempV2_3),nextPointR.copy(currentPoint).add(tempV2_3),joinIsOnLeftSide=!0,tempV2_3.subVectors(nextPoint,previousPoint),normal1.dot(tempV2_3)<0&&(joinIsOnLeftSide=!1),1===iPoint&&(initialJoinIsOnLeftSide=joinIsOnLeftSide),tempV2_3.subVectors(nextPoint,currentPoint),tempV2_3.normalize();var dot=Math.abs(normal1.dot(tempV2_3));if(0!==dot){var miterSide=strokeWidth2/dot;tempV2_3.multiplyScalar(-miterSide),tempV2_4.subVectors(currentPoint,previousPoint),tempV2_5.copy(tempV2_4).setLength(miterSide).add(tempV2_3),innerPoint.copy(tempV2_5).negate();var miterLength2=tempV2_5.length(),segmentLengthPrev=tempV2_4.length();tempV2_4.divideScalar(segmentLengthPrev),tempV2_6.subVectors(nextPoint,currentPoint);var segmentLengthNext=tempV2_6.length();switch(tempV2_6.divideScalar(segmentLengthNext),tempV2_4.dot(innerPoint)<segmentLengthPrev&&tempV2_6.dot(innerPoint)<segmentLengthNext&&(innerSideModified=!0),outerPoint.copy(tempV2_5).add(currentPoint),innerPoint.add(currentPoint),isMiter=!1,innerSideModified?joinIsOnLeftSide?(nextPointR.copy(innerPoint),currentPointR.copy(innerPoint)):(nextPointL.copy(innerPoint),currentPointL.copy(innerPoint)):makeSegmentTriangles(),style.strokeLineJoin){case"bevel":makeSegmentWithBevelJoin(joinIsOnLeftSide,innerSideModified,u1);break;case"round":createSegmentTrianglesWithMiddleSection(joinIsOnLeftSide,innerSideModified),joinIsOnLeftSide?makeCircularSector(currentPoint,currentPointL,nextPointL,u1,0):makeCircularSector(currentPoint,nextPointR,currentPointR,u1,1);break;case"miter":case"miter-clip":default:var miterFraction=strokeWidth2*style.strokeMiterLimit/miterLength2;if(miterFraction<1){if("miter-clip"!==style.strokeLineJoin){makeSegmentWithBevelJoin(joinIsOnLeftSide,innerSideModified,u1);break}createSegmentTrianglesWithMiddleSection(joinIsOnLeftSide,innerSideModified),joinIsOnLeftSide?(tempV2_6.subVectors(outerPoint,currentPointL).multiplyScalar(miterFraction).add(currentPointL),tempV2_7.subVectors(outerPoint,nextPointL).multiplyScalar(miterFraction).add(nextPointL),addVertex(currentPointL,u1,0),addVertex(tempV2_6,u1,0),addVertex(currentPoint,u1,.5),addVertex(currentPoint,u1,.5),addVertex(tempV2_6,u1,0),addVertex(tempV2_7,u1,0),addVertex(currentPoint,u1,.5),addVertex(tempV2_7,u1,0),addVertex(nextPointL,u1,0)):(tempV2_6.subVectors(outerPoint,currentPointR).multiplyScalar(miterFraction).add(currentPointR),tempV2_7.subVectors(outerPoint,nextPointR).multiplyScalar(miterFraction).add(nextPointR),addVertex(currentPointR,u1,1),addVertex(tempV2_6,u1,1),addVertex(currentPoint,u1,.5),addVertex(currentPoint,u1,.5),addVertex(tempV2_6,u1,1),addVertex(tempV2_7,u1,1),addVertex(currentPoint,u1,.5),addVertex(tempV2_7,u1,1),addVertex(nextPointR,u1,1))}else innerSideModified?(joinIsOnLeftSide?(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(outerPoint,u1,0),addVertex(lastPointR,u0,1),addVertex(outerPoint,u1,0),addVertex(innerPoint,u1,1)):(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(outerPoint,u1,1),addVertex(lastPointL,u0,0),addVertex(innerPoint,u1,0),addVertex(outerPoint,u1,1)),joinIsOnLeftSide?nextPointL.copy(outerPoint):nextPointR.copy(outerPoint)):joinIsOnLeftSide?(addVertex(currentPointL,u1,0),addVertex(outerPoint,u1,0),addVertex(currentPoint,u1,.5),addVertex(currentPoint,u1,.5),addVertex(outerPoint,u1,0),addVertex(nextPointL,u1,0)):(addVertex(currentPointR,u1,1),addVertex(outerPoint,u1,1),addVertex(currentPoint,u1,.5),addVertex(currentPoint,u1,.5),addVertex(outerPoint,u1,1),addVertex(nextPointR,u1,1)),isMiter=!0}}else makeSegmentTriangles()}else makeSegmentTriangles();isClosed||iPoint!==numPoints-1||addCapGeometry(points[0],point0L,point0R,joinIsOnLeftSide,!0,u0),u0=u1,previousPoint=currentPoint,lastPointL.copy(nextPointL),lastPointR.copy(nextPointR)}if(isClosed){if(innerSideModified&&vertices){var lastOuter=outerPoint,lastInner=innerPoint;initialJoinIsOnLeftSide!==joinIsOnLeftSide&&(lastOuter=innerPoint,lastInner=outerPoint),joinIsOnLeftSide?(isMiter||initialJoinIsOnLeftSide)&&(lastInner.toArray(vertices,0),lastInner.toArray(vertices,9),isMiter&&lastOuter.toArray(vertices,3)):!isMiter&&initialJoinIsOnLeftSide||(lastInner.toArray(vertices,3),lastInner.toArray(vertices,9),isMiter&&lastOuter.toArray(vertices,0))}}else addCapGeometry(currentPoint,currentPointL,currentPointR,joinIsOnLeftSide,!1,u1);return numVertices;function getNormal(p1,p2,result){return result.subVectors(p2,p1),result.set(-result.y,result.x).normalize()}function addVertex(position,u,v){vertices&&(vertices[currentCoordinate]=position.x,vertices[currentCoordinate+1]=position.y,vertices[currentCoordinate+2]=0,normals&&(normals[currentCoordinate]=0,normals[currentCoordinate+1]=0,normals[currentCoordinate+2]=1),currentCoordinate+=3,uvs&&(uvs[currentCoordinateUV]=u,uvs[currentCoordinateUV+1]=v,currentCoordinateUV+=2)),numVertices+=3}function makeCircularSector(center,p1,p2,u,v){tempV2_1.copy(p1).sub(center).normalize(),tempV2_2.copy(p2).sub(center).normalize();var angle=Math.PI,dot=tempV2_1.dot(tempV2_2);Math.abs(dot)<1&&(angle=Math.abs(Math.acos(dot))),angle/=arcDivisions,tempV2_3.copy(p1);for(var i=0,il=arcDivisions-1;i<il;i++)tempV2_4.copy(tempV2_3).rotateAround(center,angle),addVertex(tempV2_3,u,v),addVertex(tempV2_4,u,v),addVertex(center,u,.5),tempV2_3.copy(tempV2_4);addVertex(tempV2_4,u,v),addVertex(p2,u,v),addVertex(center,u,.5)}function makeSegmentTriangles(){addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(currentPointL,u1,0),addVertex(lastPointR,u0,1),addVertex(currentPointL,u1,1),addVertex(currentPointR,u1,0)}function makeSegmentWithBevelJoin(joinIsOnLeftSide,innerSideModified,u){innerSideModified?joinIsOnLeftSide?(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(currentPointL,u1,0),addVertex(lastPointR,u0,1),addVertex(currentPointL,u1,0),addVertex(innerPoint,u1,1),addVertex(currentPointL,u,0),addVertex(nextPointL,u,0),addVertex(innerPoint,u,.5)):(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(currentPointR,u1,1),addVertex(lastPointL,u0,0),addVertex(innerPoint,u1,0),addVertex(currentPointR,u1,1),addVertex(currentPointR,u,1),addVertex(nextPointR,u,0),addVertex(innerPoint,u,.5)):joinIsOnLeftSide?(addVertex(currentPointL,u,0),addVertex(nextPointL,u,0),addVertex(currentPoint,u,.5)):(addVertex(currentPointR,u,1),addVertex(nextPointR,u,0),addVertex(currentPoint,u,.5))}function createSegmentTrianglesWithMiddleSection(joinIsOnLeftSide,innerSideModified){innerSideModified&&(joinIsOnLeftSide?(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(currentPointL,u1,0),addVertex(lastPointR,u0,1),addVertex(currentPointL,u1,0),addVertex(innerPoint,u1,1),addVertex(currentPointL,u0,0),addVertex(currentPoint,u1,.5),addVertex(innerPoint,u1,1),addVertex(currentPoint,u1,.5),addVertex(nextPointL,u0,0),addVertex(innerPoint,u1,1)):(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(currentPointR,u1,1),addVertex(lastPointL,u0,0),addVertex(innerPoint,u1,0),addVertex(currentPointR,u1,1),addVertex(currentPointR,u0,1),addVertex(innerPoint,u1,0),addVertex(currentPoint,u1,.5),addVertex(currentPoint,u1,.5),addVertex(innerPoint,u1,0),addVertex(nextPointR,u0,1)))}function addCapGeometry(center,p1,p2,joinIsOnLeftSide,start,u){switch(style.strokeLineCap){case"round":start?makeCircularSector(center,p2,p1,u,.5):makeCircularSector(center,p1,p2,u,.5);break;case"square":if(start)tempV2_1.subVectors(p1,center),tempV2_2.set(tempV2_1.y,-tempV2_1.x),tempV2_3.addVectors(tempV2_1,tempV2_2).add(center),tempV2_4.subVectors(tempV2_2,tempV2_1).add(center),joinIsOnLeftSide?(tempV2_3.toArray(vertices,3),tempV2_4.toArray(vertices,0),tempV2_4.toArray(vertices,9)):(tempV2_3.toArray(vertices,3),tempV2_3.toArray(vertices,9),tempV2_4.toArray(vertices,0));else{tempV2_1.subVectors(p2,center),tempV2_2.set(tempV2_1.y,-tempV2_1.x),tempV2_3.addVectors(tempV2_1,tempV2_2).add(center),tempV2_4.subVectors(tempV2_2,tempV2_1).add(center);var vl=vertices.length;joinIsOnLeftSide?(tempV2_3.toArray(vertices,vl-3),tempV2_4.toArray(vertices,vl-6),tempV2_4.toArray(vertices,vl-12)):(tempV2_3.toArray(vertices,vl-6),tempV2_4.toArray(vertices,vl-3),tempV2_4.toArray(vertices,vl-12))}}}}}]),SVGLoader}(three_module.N),SvgLoaderService=function(_AbstractCacheService3){_inherits(SvgLoaderService,_AbstractCacheService3);var _super19=_createSuper(SvgLoaderService);function SvgLoaderService(){return _classCallCheck(this,SvgLoaderService),_super19.apply(this,arguments)}return _createClass(SvgLoaderService,[{key:"getValue",value:function getValue(key){return new Promise((function(resolve,reject){(new atft_SVGLoader).load(key,(function(data){resolve(data.paths)}),void 0,reject)}))}}]),SvgLoaderService}(atft_AbstractCacheService);SvgLoaderService.decorators=[{type:core.Injectable}];var AbstractAssetService=function(){function AbstractAssetService(){_classCallCheck(this,AbstractAssetService),this.providers=new Map,this.init()}return _createClass(AbstractAssetService,[{key:"registerProvider",value:function registerProvider(key,source){this.providers.set(key,source)}},{key:"setDefaultProvider",value:function setDefaultProvider(key){this.defaultProvider=key}},{key:"getSource",value:function getSource(icon){if(icon){if(icon.indexOf(":")>0){var args=icon.split(":");return this.getSourceByNamespace(args[0],args[1])}return this.getSourceByNamespace(this.defaultProvider,icon)}return this.defaultIfNotFound(icon)}},{key:"getSourceByNamespace",value:function getSourceByNamespace(namespace,icon){var provider=this.providers.get(namespace);if(!provider)return console.warn("Icon provider not found",provider),this.defaultIfNotFound(icon);var finalUrl=provider.url.replace("?",icon);return this.getFinalResult(finalUrl,provider)}}]),AbstractAssetService}();AbstractAssetService.decorators=[{type:core.Injectable}],AbstractAssetService.ctorParameters=function(){return[]};var IconService=function(_AbstractAssetService){_inherits(IconService,_AbstractAssetService);var _super20=_createSuper(IconService);function IconService(){var _this23;return _classCallCheck(this,IconService),(_this23=_super20.apply(this,arguments)).defaultProvider="md",_this23}return _createClass(IconService,[{key:"init",value:function init(){this.registerProvider("md",{url:"https://raw.githubusercontent.com/material-icons/material-icons/master/svg/?/baseline.svg",allowColorOverride:!0,isCCW:!1,noHoles:!1}),this.registerProvider("a",{url:"assets/svg/?.svg",allowColorOverride:!0,isCCW:!1,noHoles:!1}),this.registerProvider("az",{url:"https://raw.githubusercontent.com/makimenko/files/master/azure-icons/?.svg",allowColorOverride:!1,isCCW:!1,noHoles:!1}),this.registerProvider("g",{url:"https://raw.githubusercontent.com/makimenko/files/master/google-cloud-icons/?.svg",allowColorOverride:!0,isCCW:!1,noHoles:!1}),this.registerProvider("aws",{url:"https://raw.githubusercontent.com/makimenko/files/master/aws-icons/?.svg",allowColorOverride:!1,isCCW:!1,noHoles:!0})}},{key:"defaultIfNotFound",value:function defaultIfNotFound(icon){return{url:icon,allowColorOverride:!0,isCCW:!1,noHoles:!1}}},{key:"getFinalResult",value:function getFinalResult(finalUrl,provider){return{url:finalUrl,allowColorOverride:provider.allowColorOverride,isCCW:provider.isCCW,noHoles:provider.noHoles}}}]),IconService}(AbstractAssetService);IconService.decorators=[{type:core.Injectable}];var ModelService=function(_AbstractAssetService2){_inherits(ModelService,_AbstractAssetService2);var _super21=_createSuper(ModelService);function ModelService(){var _this24;return _classCallCheck(this,ModelService),(_this24=_super21.apply(this,arguments)).defaultProvider="3d",_this24}return _createClass(ModelService,[{key:"init",value:function init(){this.registerProvider("3d",{url:"https://raw.githubusercontent.com/makimenko/files/master/actor-models/?.obj"})}},{key:"defaultIfNotFound",value:function defaultIfNotFound(icon){return{url:icon}}},{key:"getFinalResult",value:function getFinalResult(finalUrl,provider){return{url:finalUrl}}}]),ModelService}(AbstractAssetService);ModelService.decorators=[{type:core.Injectable}];var atft_SVGLoaderComponent=function(_AbstractModelLoader3){_inherits(SVGLoaderComponent,_AbstractModelLoader3);var _super22=_createSuper(SVGLoaderComponent);function SVGLoaderComponent(rendererService,parent,svgLoader,iconService){var _this25;return _classCallCheck(this,SVGLoaderComponent),(_this25=_super22.call(this,rendererService,parent)).rendererService=rendererService,_this25.parent=parent,_this25.svgLoader=svgLoader,_this25.iconService=iconService,_this25._overrideMaterialColor=void 0,_this25.material="basic",_this25.depthWrite=!0,_this25.centered=!0,_this25.isCCW=!1,_this25.noHoles=!1,_this25}return _createClass(SVGLoaderComponent,[{key:"overrideMaterialColor",get:function get(){return this._overrideMaterialColor},set:function set(value){this._overrideMaterialColor=value,this.object&&this.startLoading()}},{key:"icon",get:function get(){return this.model},set:function set(icon){var iconProvider=this.iconService.getSource(icon);this.model=iconProvider.url,this.isCCW=iconProvider.isCCW,this.noHoles=iconProvider.noHoles,iconProvider.allowColorOverride||(this.overrideMaterialColor=void 0)}},{key:"loadLazyObject",value:function loadLazyObject(){return Object(tslib_es6.a)(this,void 0,void 0,regeneratorRuntime.mark((function _callee4(){var paths,group,_iterator3,_step3,path,color,material,shapes,_iterator4,_step4,shape,geometry,mesh;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,this.svgLoader.load(this.model);case 2:paths=_context4.sent,group=new three_module.z,_iterator3=_createForOfIteratorHelper(paths);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){path=_step3.value,color=this._overrideMaterialColor?this._overrideMaterialColor:path.color,material=appliedMaterial(color,this.material,this.depthWrite),shapes=path.toShapes(this.isCCW,this.noHoles),_iterator4=_createForOfIteratorHelper(shapes);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;)shape=_step4.value,geometry=new three_module.yb(shape),mesh=new three_module.W(geometry,material),group.add(mesh)}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return(this.maxX||this.maxY)&&scaleToFit(group,new three_module.Mb(this.maxX,this.maxY,0)),this.centered&&fixCenter(group),_context4.abrupt("return",group);case 9:case"end":return _context4.stop()}}),_callee4,this)})))}}]),SVGLoaderComponent}(AbstractModelLoader);atft_SVGLoaderComponent.decorators=[{type:core.Component,args:[{selector:"atft-svg-loader",providers:[provideParent(atft_SVGLoaderComponent)],template:"<ng-content></ng-content>"}]}],atft_SVGLoaderComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]},{type:SvgLoaderService},{type:IconService}]},atft_SVGLoaderComponent.propDecorators={overrideMaterialColor:[{type:core.Input}],icon:[{type:core.Input}],material:[{type:core.Input}],depthWrite:[{type:core.Input}],maxX:[{type:core.Input}],maxY:[{type:core.Input}],centered:[{type:core.Input}],isCCW:[{type:core.Input}],noHoles:[{type:core.Input}]};var atft_StlLoaderComponent=function(_AbstractModelLoader4){_inherits(StlLoaderComponent,_AbstractModelLoader4);var _super23=_createSuper(StlLoaderComponent);function StlLoaderComponent(rendererService,parent){var _this26;return _classCallCheck(this,StlLoaderComponent),(_this26=_super23.call(this,rendererService,parent)).rendererService=rendererService,_this26.parent=parent,_this26.loader=new STLLoader.a,_this26.materialColor="#FFFFFF",_this26.depthWrite=!0,_this26}return _createClass(StlLoaderComponent,[{key:"loadLazyObject",value:function loadLazyObject(){return Object(tslib_es6.a)(this,void 0,void 0,regeneratorRuntime.mark((function _callee5(){var _this27=this;return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",new Promise((function(resolve,reject){_this27.loader.load(_this27.model,(function(geometry){var material=appliedMaterial(_this27.materialColor,_this27.material,_this27.depthWrite),mesh=new three_module.W(geometry,material);resolve(mesh)}),void 0,reject)})));case 1:case"end":return _context5.stop()}}),_callee5)})))}}]),StlLoaderComponent}(AbstractModelLoader);atft_StlLoaderComponent.decorators=[{type:core.Component,args:[{selector:"atft-stl-loader",providers:[provideParent(atft_StlLoaderComponent)],template:"<ng-content></ng-content>"}]}],atft_StlLoaderComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_StlLoaderComponent.propDecorators={material:[{type:core.Input}],materialColor:[{type:core.Input}],depthWrite:[{type:core.Input}]};var AtftLoaderModule=function AtftLoaderModule(){_classCallCheck(this,AtftLoaderModule)};AtftLoaderModule.decorators=[{type:core.NgModule,args:[{declarations:[atft_ObjLoaderComponent,atft_ObjectLoaderComponent,atft_SVGLoaderComponent,atft_StlLoaderComponent],imports:[common.b],exports:[atft_ObjLoaderComponent,atft_ObjectLoaderComponent,atft_SVGLoaderComponent,atft_StlLoaderComponent]}]}];var AbstractMesh=function(_AbstractObject3D10){_inherits(AbstractMesh,_AbstractObject3D10);var _super24=_createSuper(AbstractMesh);function AbstractMesh(){var _this28;return _classCallCheck(this,AbstractMesh),(_this28=_super24.apply(this,arguments)).materialColor="#5DADE2",_this28.castShadow=!0,_this28.receiveShadow=!0,_this28.depthWrite=!0,_this28}return _createClass(AbstractMesh,[{key:"getMaterial",value:function getMaterial(){return appliedMaterial(this.materialColor,this.material,this.depthWrite)}},{key:"applyShadowProps",value:function applyShadowProps(mesh){mesh.castShadow=this.castShadow,mesh.receiveShadow=this.receiveShadow}},{key:"ngOnChanges",value:function ngOnChanges(changes){if(_get(_getPrototypeOf(AbstractMesh.prototype),"ngOnChanges",this).call(this,changes),this.getObject()){var mustRerender=!1;["material","materialColor","depthWrite"].some((function(propName){return propName in changes}))&&(this.applyMaterial(),mustRerender=!0),mustRerender&&this.rendererService.render()}}},{key:"applyMaterial",value:function applyMaterial(){this.getObject().material=this.getMaterial()}}]),AbstractMesh}(atft_AbstractObject3D);AbstractMesh.decorators=[{type:core.Directive}],AbstractMesh.propDecorators={material:[{type:core.Input}],materialColor:[{type:core.Input}],castShadow:[{type:core.Input}],receiveShadow:[{type:core.Input}],depthWrite:[{type:core.Input}]};var atft_BoxMeshComponent=function(_AbstractMesh){_inherits(BoxMeshComponent,_AbstractMesh);var _super25=_createSuper(BoxMeshComponent);function BoxMeshComponent(rendererService,parent){var _this29;return _classCallCheck(this,BoxMeshComponent),(_this29=_super25.call(this,rendererService,parent)).rendererService=rendererService,_this29.parent=parent,_this29.width=1,_this29.height=1,_this29.depth=1,_this29.widthSegments=1,_this29.heightSegments=1,_this29.depthSegments=1,_this29}return _createClass(BoxMeshComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){var geometry=new three_module.h(this.width,this.height,this.depth,this.widthSegments,this.heightSegments,this.depthSegments),material=this.getMaterial(),mesh=new three_module.W(geometry,material);return this.applyShadowProps(mesh),mesh}}]),BoxMeshComponent}(AbstractMesh);atft_BoxMeshComponent.decorators=[{type:core.Component,args:[{selector:"atft-box-mesh",providers:[provideParent(atft_BoxMeshComponent)],template:"<ng-content></ng-content>"}]}],atft_BoxMeshComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_BoxMeshComponent.propDecorators={width:[{type:core.Input}],height:[{type:core.Input}],depth:[{type:core.Input}],widthSegments:[{type:core.Input}],heightSegments:[{type:core.Input}],depthSegments:[{type:core.Input}]};var atft_CylinderMeshComponent=function(_AbstractMesh2){_inherits(CylinderMeshComponent,_AbstractMesh2);var _super26=_createSuper(CylinderMeshComponent);function CylinderMeshComponent(rendererService,parent){var _this30;return _classCallCheck(this,CylinderMeshComponent),(_this30=_super26.call(this,rendererService,parent)).rendererService=rendererService,_this30.parent=parent,_this30.radiusTop=1,_this30.radiusBottom=1,_this30.height=1,_this30.radialSegments=8,_this30.heightSegments=1,_this30.openEnded=!1,_this30.thetaStart=0,_this30.thetaLength=2*Math.PI,_this30}return _createClass(CylinderMeshComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){var geometry=new three_module.n(this.radiusTop,this.radiusBottom,this.height,this.radialSegments,this.heightSegments,this.openEnded,this.thetaStart,this.thetaLength),material=this.getMaterial(),mesh=new three_module.W(geometry,material);return this.applyShadowProps(mesh),mesh}}]),CylinderMeshComponent}(AbstractMesh);atft_CylinderMeshComponent.decorators=[{type:core.Component,args:[{selector:"atft-cylinder-mesh",providers:[provideParent(atft_CylinderMeshComponent)],template:"<ng-content></ng-content>"}]}],atft_CylinderMeshComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_CylinderMeshComponent.propDecorators={radiusTop:[{type:core.Input}],radiusBottom:[{type:core.Input}],height:[{type:core.Input}],radialSegments:[{type:core.Input}],heightSegments:[{type:core.Input}],openEnded:[{type:core.Input}],thetaStart:[{type:core.Input}],thetaLength:[{type:core.Input}]};var atft_FrameMeshComponent=function(_AbstractMesh3){_inherits(FrameMeshComponent,_AbstractMesh3);var _super27=_createSuper(FrameMeshComponent);function FrameMeshComponent(rendererService,parent){var _this31;return _classCallCheck(this,FrameMeshComponent),(_this31=_super27.call(this,rendererService,parent)).rendererService=rendererService,_this31.parent=parent,_this31.thickness=2,_this31.sizeX=20,_this31.sizeY=20,_this31}return _createClass(FrameMeshComponent,[{key:"getGeometry",value:function getGeometry(){var halfX=this.sizeX/2,halfY=this.sizeY/2,t=this.thickness,shape=new three_module.xb;return shape.moveTo(-halfX,halfY),shape.lineTo(-halfX-t,halfY+t),shape.lineTo(halfX+t,halfY+t),shape.lineTo(halfX+t,-halfY-t),shape.lineTo(-halfX-t,-halfY-t),shape.lineTo(-halfX-t,halfY+t),shape.lineTo(-halfX,halfY),shape.lineTo(-halfX,-halfY),shape.lineTo(halfX,-halfY),shape.lineTo(halfX,halfY),shape.lineTo(-halfX,halfY),new three_module.yb(shape)}},{key:"newObject3DInstance",value:function newObject3DInstance(){var material=this.getMaterial(),mesh=new three_module.W(this.getGeometry(),material);return this.applyShadowProps(mesh),mesh}},{key:"ngOnChanges",value:function ngOnChanges(changes){if(this.object){_get(_getPrototypeOf(FrameMeshComponent.prototype),"ngOnChanges",this).call(this,changes);var modified=!1;if(["sizeX","sizeY","thickness"].some((function(propName){return propName in changes}))&&this.getObject()instanceof three_module.W){var mesh=this.getObject();if(mesh.geometry instanceof three_module.yb){var currentGeometry=mesh.geometry,newGeometry=this.getGeometry();currentGeometry.attributes=newGeometry.attributes}modified=!0}modified&&(this.changed.emit(),this.rendererService.render())}}}]),FrameMeshComponent}(AbstractMesh);atft_FrameMeshComponent.decorators=[{type:core.Component,args:[{selector:"atft-frame-mesh",providers:[provideParent(atft_FrameMeshComponent)],template:"<ng-content></ng-content>"}]}],atft_FrameMeshComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_FrameMeshComponent.propDecorators={thickness:[{type:core.Input}],sizeX:[{type:core.Input}],sizeY:[{type:core.Input}]};var atft_PlaneMeshComponent=function(_AbstractMesh4){_inherits(PlaneMeshComponent,_AbstractMesh4);var _super28=_createSuper(PlaneMeshComponent);function PlaneMeshComponent(rendererService,parent){var _this32;return _classCallCheck(this,PlaneMeshComponent),(_this32=_super28.call(this,rendererService,parent)).rendererService=rendererService,_this32.parent=parent,_this32.width=1,_this32.height=1,_this32.widthSegments=1,_this32.heightSegments=1,_this32}return _createClass(PlaneMeshComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){var geometry=new three_module.jb(this.width,this.height,this.widthSegments,this.heightSegments),material=this.getMaterial(),mesh=new three_module.W(geometry,material);return this.applyShadowProps(mesh),mesh}},{key:"ngOnChanges",value:function ngOnChanges(changes){if(this.object){_get(_getPrototypeOf(PlaneMeshComponent.prototype),"ngOnChanges",this).call(this,changes);var modified=!1;if(["width","height","widthSegments","heightSegments"].some((function(propName){return propName in changes}))){if(this.getObject()instanceof three_module.W){var mesh=this.getObject();if(mesh.geometry instanceof three_module.jb){var currentGeometry=mesh.geometry,newGeometry=new three_module.jb(this.width,this.height,this.widthSegments,this.heightSegments);currentGeometry.attributes=newGeometry.attributes}}modified=!0}modified&&(this.changed.emit(),this.rendererService.render())}}}]),PlaneMeshComponent}(AbstractMesh);atft_PlaneMeshComponent.decorators=[{type:core.Component,args:[{selector:"atft-plane-mesh",providers:[provideParent(atft_PlaneMeshComponent)],template:"<ng-content></ng-content>"}]}],atft_PlaneMeshComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_PlaneMeshComponent.propDecorators={width:[{type:core.Input}],height:[{type:core.Input}],widthSegments:[{type:core.Input}],heightSegments:[{type:core.Input}]};var atft_SphereMeshComponent=function(_AbstractMesh5){_inherits(SphereMeshComponent,_AbstractMesh5);var _super29=_createSuper(SphereMeshComponent);function SphereMeshComponent(rendererService,parent){var _this33;return _classCallCheck(this,SphereMeshComponent),(_this33=_super29.call(this,rendererService,parent)).rendererService=rendererService,_this33.parent=parent,_this33}return _createClass(SphereMeshComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){var geometry=new three_module.Cb(this.radius,this.widthSegments,this.hightSegments),material=this.getMaterial(),mesh=new three_module.W(geometry,material);return this.applyShadowProps(mesh),mesh}}]),SphereMeshComponent}(AbstractMesh);atft_SphereMeshComponent.decorators=[{type:core.Component,args:[{selector:"atft-sphere-mesh",providers:[provideParent(atft_SphereMeshComponent)],template:"<ng-content></ng-content>"}]}],atft_SphereMeshComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_SphereMeshComponent.propDecorators={radius:[{type:core.Input}],widthSegments:[{type:core.Input}],hightSegments:[{type:core.Input}]};var atft_TorusMeshComponent=function(_AbstractMesh6){_inherits(TorusMeshComponent,_AbstractMesh6);var _super30=_createSuper(TorusMeshComponent);function TorusMeshComponent(rendererService,parent){var _this34;return _classCallCheck(this,TorusMeshComponent),(_this34=_super30.call(this,rendererService,parent)).rendererService=rendererService,_this34.parent=parent,_this34.radius=.4,_this34.radialSegments=8,_this34.tubularSegments=6,_this34.arc=2*Math.PI,_this34}return _createClass(TorusMeshComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){this.radius*=1,this.tube*=1,this.radialSegments*=1,this.tubularSegments*=1;var geometry=new three_module.Ib(this.radius,this.tube,this.radialSegments,this.tubularSegments),material=this.getMaterial(),mesh=new three_module.W(geometry,material);return this.applyShadowProps(mesh),mesh}}]),TorusMeshComponent}(AbstractMesh);atft_TorusMeshComponent.decorators=[{type:core.Component,args:[{selector:"atft-torus-mesh",providers:[provideParent(atft_TorusMeshComponent)],template:"<ng-content></ng-content>"}]}],atft_TorusMeshComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_TorusMeshComponent.propDecorators={radius:[{type:core.Input}],tube:[{type:core.Input}],radialSegments:[{type:core.Input}],tubularSegments:[{type:core.Input}],arc:[{type:core.Input}]};var atft_GridMeshComponent=function(_AbstractMesh7){_inherits(GridMeshComponent,_AbstractMesh7);var _super31=_createSuper(GridMeshComponent);function GridMeshComponent(rendererService,parent){var _this35;return _classCallCheck(this,GridMeshComponent),(_this35=_super31.call(this,rendererService,parent)).rendererService=rendererService,_this35.parent=parent,_this35.size=5,_this35.iterationsX=30,_this35.iterationsY=30,_this35.offset=1.05,_this35}return _createClass(GridMeshComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){for(var geometry=new three_module.j,vertices=[],d=this.size,x0=-this.iterationsX*(d*this.offset)/2,y0=-this.iterationsY*(d*this.offset)/2,x=x0,y=y0,i=0;i<this.iterationsX;i++){for(var j=0;j<this.iterationsY;j++)vertices.push(x,y,0),vertices.push(x+d,y+d,0),vertices.push(x,y+d,0),vertices.push(x+d,y+d,0),vertices.push(x,y,0),vertices.push(x+d,y,0),y+=this.size*this.offset;y=y0,x+=this.size*this.offset}geometry.setAttribute("position",new three_module.i(new Float32Array(vertices),3));var material=this.getMaterial(),mesh=new three_module.W(geometry,material);return geometry.computeBoundingBox(),geometry.computeVertexNormals(),this.applyShadowProps(mesh),mesh}}]),GridMeshComponent}(AbstractMesh);atft_GridMeshComponent.decorators=[{type:core.Component,args:[{selector:"atft-grid-mesh",providers:[provideParent(atft_GridMeshComponent)],template:"<ng-content></ng-content>"}]}],atft_GridMeshComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_GridMeshComponent.propDecorators={size:[{type:core.Input}],iterationsX:[{type:core.Input}],iterationsY:[{type:core.Input}],offset:[{type:core.Input}]};var atft_VideoMeshComponent=function(_AbstractMesh8){_inherits(VideoMeshComponent,_AbstractMesh8);var _super32=_createSuper(VideoMeshComponent);function VideoMeshComponent(rendererService,parent,animationService){var _this36;return _classCallCheck(this,VideoMeshComponent),(_this36=_super32.call(this,rendererService,parent)).rendererService=rendererService,_this36.parent=parent,_this36.animationService=animationService,_this36.width=1,_this36.height=1,_this36.type="video/mp4",_this36.autoplay=!0,_this36.loop=!0,_this36.muted=!0,_this36.video=document.createElement("video"),_this36.widthSegments=1,_this36.heightSegments=1,_this36}return _createClass(VideoMeshComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){var geometry=new three_module.jb(this.width,this.height,this.widthSegments,this.heightSegments),material=this.getMaterial(),mesh=new three_module.W(geometry,material);return this.applyShadowProps(mesh),mesh}},{key:"getMaterial",value:function getMaterial(){var source=document.createElement("source");source.src=this.videoSrc,source.type=this.type,this.video.appendChild(source),this.video.crossOrigin="anonymous",this.video.autoplay=!1,this.video.loop=this.loop,this.video.muted=this.muted;var texture=new three_module.Pb(this.video);return new three_module.X({color:16777215,map:texture})}},{key:"animate",value:function animate(){}},{key:"ngAfterViewInit",value:function ngAfterViewInit(){var _this37=this;_get(_getPrototypeOf(VideoMeshComponent.prototype),"ngAfterViewInit",this).call(this),this.autoplay&&(this.animationService.start(),this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate),this.video.load(),this.video.addEventListener("canplay",(function(){_this37.video&&_this37.video.play()})))}},{key:"ngOnDestroy",value:function ngOnDestroy(){var _a;this.video&&(null===(_a=this.animation)||void 0===_a||_a.unsubscribe(),this.video.pause(),this.video.remove())}}]),VideoMeshComponent}(AbstractMesh);atft_VideoMeshComponent.decorators=[{type:core.Component,args:[{selector:"atft-video-mesh",providers:[provideParent(atft_VideoMeshComponent)],template:"<ng-content></ng-content>"}]}],atft_VideoMeshComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]},{type:atft_AnimationService}]},atft_VideoMeshComponent.propDecorators={width:[{type:core.Input}],height:[{type:core.Input}],videoSrc:[{type:core.Input}],type:[{type:core.Input}],autoplay:[{type:core.Input}],loop:[{type:core.Input}],muted:[{type:core.Input}]};var AtftMeshModule=function AtftMeshModule(){_classCallCheck(this,AtftMeshModule)};AtftMeshModule.decorators=[{type:core.NgModule,args:[{declarations:[atft_BoxMeshComponent,atft_CylinderMeshComponent,atft_FrameMeshComponent,atft_PlaneMeshComponent,atft_SphereMeshComponent,atft_TorusMeshComponent,atft_GridMeshComponent,atft_VideoMeshComponent],imports:[common.b],exports:[atft_BoxMeshComponent,atft_CylinderMeshComponent,atft_FrameMeshComponent,atft_PlaneMeshComponent,atft_SphereMeshComponent,atft_TorusMeshComponent,atft_GridMeshComponent,atft_VideoMeshComponent]}]}];var atft_TextMeshComponent=function(_AbstractLazyObject3D2){_inherits(TextMeshComponent,_AbstractLazyObject3D2);var _super33=_createSuper(TextMeshComponent);function TextMeshComponent(rendererService,parent,font){var _this38;return _classCallCheck(this,TextMeshComponent),(_this38=_super33.call(this,rendererService,parent)).rendererService=rendererService,_this38.parent=parent,_this38.font=font,_this38.material="basic",_this38._materialColor="#DADADA",_this38._text="Text",_this38.size=10,_this38.height=.3,_this38.curveSegments=2,_this38.bevelEnabled=!1,_this38.bevelThickness=.1,_this38.bevelSize=.1,_this38.bevelOffset=0,_this38.bevelSegments=1,_this38.fontUrl="./assets/font/helvetiker_regular.typeface.json",_this38.castShadow=!0,_this38.receiveShadow=!0,_this38.depthWrite=!0,_this38.centered=!0,_this38}return _createClass(TextMeshComponent,[{key:"materialColor",get:function get(){return this._materialColor},set:function set(materialColor){this._materialColor=materialColor,this.object&&this.startLoading()}},{key:"text",get:function get(){return this._text},set:function set(text){this._text=text,this.object&&this.startLoading()}},{key:"getMaterial",value:function getMaterial(){return appliedMaterial(this.materialColor,this.material,this.depthWrite)}},{key:"loadLazyObject",value:function loadLazyObject(){return Object(tslib_es6.a)(this,void 0,void 0,regeneratorRuntime.mark((function _callee6(){var font;return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,this.font.load(this.fontUrl);case 2:return font=_context6.sent,_context6.abrupt("return",this.getTextMesh(font));case 4:case"end":return _context6.stop()}}),_callee6,this)})))}},{key:"getTextMesh",value:function getTextMesh(font){if(this.text){var geometry=new three_module.Fb(this.text,{font:font,size:this.size,height:this.height,curveSegments:this.curveSegments,bevelEnabled:this.bevelEnabled,bevelThickness:this.bevelThickness,bevelSize:this.bevelSize,bevelOffset:this.bevelOffset,bevelSegments:this.bevelOffset}),material=this.getMaterial(),mesh=new three_module.W(geometry,material);return mesh.castShadow=this.castShadow,mesh.receiveShadow=this.receiveShadow,this.centered&&fixCenter(mesh),mesh}return new three_module.W}}]),TextMeshComponent}(atft_AbstractLazyObject3D);atft_TextMeshComponent.decorators=[{type:core.Component,args:[{selector:"atft-text-mesh",providers:[provideParent(atft_TextMeshComponent)],template:"<ng-content></ng-content>"}]}],atft_TextMeshComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]},{type:atft_FontService}]},atft_TextMeshComponent.propDecorators={material:[{type:core.Input}],materialColor:[{type:core.Input}],text:[{type:core.Input}],size:[{type:core.Input}],height:[{type:core.Input}],curveSegments:[{type:core.Input}],bevelEnabled:[{type:core.Input}],bevelThickness:[{type:core.Input}],bevelSize:[{type:core.Input}],bevelOffset:[{type:core.Input}],bevelSegments:[{type:core.Input}],fontUrl:[{type:core.Input}],castShadow:[{type:core.Input}],receiveShadow:[{type:core.Input}],depthWrite:[{type:core.Input}],centered:[{type:core.Input}]};var AtftTextModule=function AtftTextModule(){_classCallCheck(this,AtftTextModule)};AtftTextModule.decorators=[{type:core.NgModule,args:[{declarations:[atft_TextMeshComponent],imports:[common.b],exports:[atft_TextMeshComponent]}]}];var atft_SceneComponent=function(_AbstractObject3D11){_inherits(SceneComponent,_AbstractObject3D11);var _super34=_createSuper(SceneComponent);function SceneComponent(rendererService,parent){var _this39;return _classCallCheck(this,SceneComponent),(_this39=_super34.call(this,rendererService,parent)).rendererService=rendererService,_this39.parent=parent,_this39.background="#ffffff",rendererService.setScene(_assertThisInitialized(_this39)),_this39}return _createClass(SceneComponent,[{key:"newObject3DInstance",value:function newObject3DInstance(){var scene=new three_module.ub;return scene.background=new three_module.m(this.background),scene}},{key:"updateParent",value:function updateParent(){}},{key:"ngOnChanges",value:function ngOnChanges(changes){if(_get(_getPrototypeOf(SceneComponent.prototype),"ngOnChanges",this).call(this,changes),this.object){var modified=!1;["background"].some((function(propName){return propName in changes}))&&(this.getObject().background=new three_module.m(this.background),modified=!0),modified&&this.rendererService.render()}}}]),SceneComponent}(atft_AbstractObject3D);atft_SceneComponent.decorators=[{type:core.Component,args:[{selector:"atft-scene",providers:[provideParent(atft_SceneComponent)],template:"<ng-content></ng-content>"}]}],atft_SceneComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_SceneComponent.propDecorators={background:[{type:core.Input}]};var ContentProjectionComponent=function(_EmptyComponent){_inherits(ContentProjectionComponent,_EmptyComponent);var _super35=_createSuper(ContentProjectionComponent);function ContentProjectionComponent(rendererService,parent){var _this40;return _classCallCheck(this,ContentProjectionComponent),(_this40=_super35.call(this,rendererService,parent)).rendererService=rendererService,_this40.parent=parent,_this40}return _createClass(ContentProjectionComponent,[{key:"addChild",value:function addChild(object){this.contentProjection?this.contentProjection.addChild(object):console.error('ContentProjectionComponent error: #contentProjection name not found! Embedded child object in "ng-content" can not be attached to parentScene object')}}]),ContentProjectionComponent}(atft_EmptyComponent);ContentProjectionComponent.decorators=[{type:core.Component,args:[{selector:"atft-content-projection",providers:[provideParent(ContentProjectionComponent)],template:"<ng-content></ng-content>"}]}],ContentProjectionComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},ContentProjectionComponent.propDecorators={contentProjection:[{type:core.ViewChild,args:["contentProjection"]}]};var RaycasterEvent,AtftObjectModule=function AtftObjectModule(){_classCallCheck(this,AtftObjectModule)};AtftObjectModule.decorators=[{type:core.NgModule,args:[{imports:[common.b,AtftConnectorModule,AtftHelperModule,AtftLightModule,AtftLoaderModule,AtftMeshModule,AtftTextModule],declarations:[atft_SceneComponent,ContentProjectionComponent],exports:[atft_SceneComponent,AtftConnectorModule,AtftHelperModule,AtftLightModule,AtftLoaderModule,AtftMeshModule,AtftTextModule],providers:[atft_FontService,SvgLoaderService,IconService,atft_ObjLoaderService,ModelService]}]}],function(RaycasterEvent){RaycasterEvent.mouseEnter="mouseEnter",RaycasterEvent.mouseExit="mouseExit",RaycasterEvent.click="click"}(RaycasterEvent||(RaycasterEvent={}));var atft_RaycasterService=function(){function RaycasterService(){_classCallCheck(this,RaycasterService),this.raycaster=new three_module.rb,this.enabled=!1,this.groups=[],this.paused=!1,this.onMouseMove=this.onMouseMove.bind(this),this.onClick=this.onClick.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.subscribe()}return _createClass(RaycasterService,[{key:"ngOnDestroy",value:function ngOnDestroy(){this.disable(),this.unsubscribe()}},{key:"subscribe",value:function subscribe(){window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("click",this.onClick),window.addEventListener("touchstart",this.onTouchStart)}},{key:"unsubscribe",value:function unsubscribe(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("click",this.onClick),window.removeEventListener("touchstart",this.onTouchStart)}},{key:"enable",value:function enable(){this.enabled=!0}},{key:"disable",value:function disable(){this.enabled=!1}},{key:"pause",value:function pause(){this.paused=!0}},{key:"resume",value:function resume(){this.paused=!1}},{key:"isEnabled",get:function get(){return this.enabled}},{key:"setCamera",value:function setCamera(camera){this.camera=camera}},{key:"addGroup",value:function addGroup(group){this.groups.push(group)}},{key:"onMouseMove",value:function onMouseMove(event){if(this.isReady()){var i=this.getFirstIntersectedGroup(event.layerX,event.layerY);this.selected&&this.selected===i.object||(this.selected&&(this.selected.dispatchEvent({type:RaycasterEvent.mouseExit}),this.selected=null),i&&i.object&&(this.selected=i.object,this.selected.dispatchEvent({type:RaycasterEvent.mouseEnter,face:i.face})))}}},{key:"onClick",value:function onClick(event){if(this.isReady(!0)){var i=this.getFirstIntersectedGroup(event.layerX,event.layerY);i&&i.object&&i.object.dispatchEvent({type:RaycasterEvent.click,face:i.face})}}},{key:"onTouchStart",value:function onTouchStart(event){if(this.isReady()){var i=this.getFirstIntersectedGroup(event.touches[0].clientX,event.touches[0].clientY);i&&i.object&&i.object.dispatchEvent({type:RaycasterEvent.click,face:i.face})}}},{key:"isReady",value:function isReady(ignorePaused){return this.enabled&&(ignorePaused||!this.paused)&&this.camera&&this.camera.camera&&this.groups&&this.groups.length>0}},{key:"getFirstIntersectedGroup",value:function getFirstIntersectedGroup(x,y){x=x/window.innerWidth*2-1,y=-y/window.innerHeight*2+1;var face,nearestIntersection,nearestGroup,mouseVector=new three_module.Mb(x,y,.5);this.raycaster.setFromCamera(mouseVector,this.camera.camera);for(var k=0;k<this.groups.length;k++){var i=this.groups[k].getObject(),intersection=this.raycaster.intersectObject(i,!0);intersection.length>0&&(!nearestIntersection||nearestIntersection.distance>intersection[0].distance)&&(face=(nearestIntersection=intersection[0]).face,nearestGroup=i)}return nearestGroup?{object:nearestGroup,face:face}:{object:null,face:null}}}]),RaycasterService}();atft_RaycasterService.decorators=[{type:core.Injectable}],atft_RaycasterService.ctorParameters=function(){return[]};var RendererCanvasComponent=function(){function RendererCanvasComponent(rendererService){_classCallCheck(this,RendererCanvasComponent),this.rendererService=rendererService,this.preserveDrawingBuffer=!1,this.onResize=this.onResize.bind(this)}return _createClass(RendererCanvasComponent,[{key:"ngOnInit",value:function ngOnInit(){this.rendererService.initialize(this.canvas,this.preserveDrawingBuffer),this.resetCanvas()}},{key:"renderPane",get:function get(){return this.canvasRef}},{key:"canvas",get:function get(){return this.canvasRef.nativeElement}},{key:"onResize",value:function onResize(event){this.resetCanvas()}},{key:"resetCanvas",value:function resetCanvas(){this.rendererService.resize(this.canvas,"100px"),this.rendererService.resize(this.canvas,"100%")}}]),RendererCanvasComponent}();RendererCanvasComponent.decorators=[{type:core.Component,args:[{selector:"atft-renderer-canvas",template:"<canvas #canvas>\n  <ng-content></ng-content>\n</canvas>\n",styles:[":host{display:flex;flex:1;height:100%}canvas{flex:1;outline:none}"]}]}],RendererCanvasComponent.ctorParameters=function(){return[{type:atft_RendererService}]},RendererCanvasComponent.propDecorators={canvasRef:[{type:core.ViewChild,args:["canvas",{static:!0}]}],preserveDrawingBuffer:[{type:core.Input}],onResize:[{type:core.HostListener,args:["window:resize",["$event"]]}]};var AbstractOrbitControls=function(){function AbstractOrbitControls(rendererService,raycasterService){_classCallCheck(this,AbstractOrbitControls),this.rendererService=rendererService,this.raycasterService=raycasterService}return _createClass(AbstractOrbitControls,[{key:"ngOnChanges",value:function ngOnChanges(changes){this.controls&&changes.listeningControlElement&&(this.controls.dispose(),this.setUpControls())}},{key:"ngOnDestroy",value:function ngOnDestroy(){this.controls&&this.controls.dispose()}},{key:"configureListeners",value:function configureListeners(){var _this41=this;this.controls.addEventListener("change",(function(){_this41.rendererService.render()})),this.raycasterService.isEnabled&&(this.controls.addEventListener("start",(function(){_this41.raycasterService.pause()})),this.controls.addEventListener("end",(function(){_this41.raycasterService.resume()})))}},{key:"ngAfterViewInit",value:function ngAfterViewInit(){if(void 0===this.childCameras||void 0===this.childCameras.first)throw new Error("Camera is not found");if(!this.webGlRenderer)throw new Error("webGlRenderer is not found");this.listeningControlElement=this.webGlRenderer.renderPane,this.setUpControls(),this.configureListeners(),this.rendererService.render()}}]),AbstractOrbitControls}();AbstractOrbitControls.decorators=[{type:core.Directive}],AbstractOrbitControls.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_RaycasterService}]},AbstractOrbitControls.propDecorators={childCameras:[{type:core.ContentChildren,args:[AbstractCamera,{descendants:!0}]}],webGlRenderer:[{type:core.ContentChild,args:[RendererCanvasComponent,{static:!1}]}],listeningControlElement:[{type:core.Input}]};var atft_OrbitControlsComponent=function(_AbstractOrbitControl){_inherits(OrbitControlsComponent,_AbstractOrbitControl);var _super36=_createSuper(OrbitControlsComponent);function OrbitControlsComponent(rendererService,raycasterService){var _this42;return _classCallCheck(this,OrbitControlsComponent),(_this42=_super36.call(this,rendererService,raycasterService)).rendererService=rendererService,_this42.raycasterService=raycasterService,_this42.rotateSpeed=1,_this42.zoomSpeed=1.2,_this42}return _createClass(OrbitControlsComponent,[{key:"setUpControls",value:function setUpControls(){this.controls=new OrbitControls.b(this.childCameras.first.camera,this.listeningControlElement&&this.listeningControlElement.nativeElement),this.controls.rotateSpeed=this.rotateSpeed,this.controls.zoomSpeed=this.zoomSpeed}},{key:"ngOnChanges",value:function ngOnChanges(changes){this.controls&&(_get(_getPrototypeOf(OrbitControlsComponent.prototype),"ngOnChanges",this).call(this,changes),changes.rotateSpeed&&(this.controls.rotateSpeed=this.rotateSpeed),changes.zoomSpeed&&(this.controls.zoomSpeed=this.zoomSpeed))}}]),OrbitControlsComponent}(AbstractOrbitControls);atft_OrbitControlsComponent.decorators=[{type:core.Component,args:[{selector:"atft-orbit-controls",template:"\n      <ng-content></ng-content>",styles:[":host{display:flex;flex:1;height:100%}"]}]}],atft_OrbitControlsComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_RaycasterService}]},atft_OrbitControlsComponent.propDecorators={rotateSpeed:[{type:core.Input}],zoomSpeed:[{type:core.Input}]};var atft_MapControlsComponent=function(_AbstractOrbitControl2){_inherits(MapControlsComponent,_AbstractOrbitControl2);var _super37=_createSuper(MapControlsComponent);function MapControlsComponent(rendererService,raycasterService,animationService){var _this43;return _classCallCheck(this,MapControlsComponent),(_this43=_super37.call(this,rendererService,raycasterService)).rendererService=rendererService,_this43.raycasterService=raycasterService,_this43.animationService=animationService,_this43.rotateSpeed=1,_this43.zoomSpeed=1.2,_this43.autoRotate=!1,_this43.autoRotateSpeed=.5,_this43.enableDamping=!1,_this43.dampingFactor=.1,_this43.screenSpacePanning=!1,_this43.minDistance=20,_this43.maxDistance=200,_this43.maxPolarAngle=Math.PI/2-.1,_this43.panSpeed=1.2,_this43.minZoom=0,_this43.maxZoom=1/0,_this43}return _createClass(MapControlsComponent,[{key:"ngOnChanges",value:function ngOnChanges(changes){this.controls&&(_get(_getPrototypeOf(MapControlsComponent.prototype),"ngOnChanges",this).call(this,changes),changes.rotateSpeed&&(this.controls.rotateSpeed=this.rotateSpeed),changes.zoomSpeed&&(this.controls.zoomSpeed=this.zoomSpeed))}},{key:"setUpControls",value:function setUpControls(){var _this44=this;this.controls=new OrbitControls.a(this.childCameras.first.camera,this.listeningControlElement&&this.listeningControlElement.nativeElement),this.controls.rotateSpeed=this.rotateSpeed,this.controls.zoomSpeed=this.zoomSpeed,this.controls.panSpeed=this.panSpeed,this.controls.autoRotate=this.autoRotate,this.controls.autoRotateSpeed=this.autoRotateSpeed,this.controls.enableDamping=this.enableDamping,this.controls.dampingFactor=this.dampingFactor,this.controls.screenSpacePanning=this.screenSpacePanning,this.controls.minDistance=this.minDistance,this.controls.maxDistance=this.maxDistance,this.controls.maxPolarAngle=this.maxPolarAngle,this.controls.minZoom=this.minZoom,this.controls.maxZoom=this.maxZoom,this.controls.update(),(this.autoRotate||this.enableDamping)&&(this.animation=this.animationService.animate.subscribe((function(){_this44.controls.update()})),this.controls.addEventListener("change",(function(){_this44.rendererService.render()})),this.animationService.start()),this.rendererService.render()}},{key:"ngOnDestroy",value:function ngOnDestroy(){var _a;_get(_getPrototypeOf(MapControlsComponent.prototype),"ngOnDestroy",this).call(this),null===(_a=this.animation)||void 0===_a||_a.unsubscribe()}},{key:"reset",value:function reset(){this.controls.reset()}}]),MapControlsComponent}(AbstractOrbitControls);atft_MapControlsComponent.decorators=[{type:core.Component,args:[{selector:"atft-map-controls",template:"\n    <ng-content></ng-content>",styles:[":host{display:flex;flex:1;height:100%}"]}]}],atft_MapControlsComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_RaycasterService},{type:atft_AnimationService}]},atft_MapControlsComponent.propDecorators={rotateSpeed:[{type:core.Input}],zoomSpeed:[{type:core.Input}],autoRotate:[{type:core.Input}],autoRotateSpeed:[{type:core.Input}],enableDamping:[{type:core.Input}],dampingFactor:[{type:core.Input}],screenSpacePanning:[{type:core.Input}],minDistance:[{type:core.Input}],maxDistance:[{type:core.Input}],maxPolarAngle:[{type:core.Input}],panSpeed:[{type:core.Input}],minZoom:[{type:core.Input}],maxZoom:[{type:core.Input}]};var AtftControlModule=function AtftControlModule(){_classCallCheck(this,AtftControlModule)};AtftControlModule.decorators=[{type:core.NgModule,args:[{declarations:[atft_OrbitControlsComponent,atft_MapControlsComponent],imports:[common.b],exports:[atft_OrbitControlsComponent,atft_MapControlsComponent]}]}];var Deg2RadPipe=function(){function Deg2RadPipe(){_classCallCheck(this,Deg2RadPipe)}return _createClass(Deg2RadPipe,[{key:"transform",value:function transform(degrees){return degrees/180*Math.PI}}]),Deg2RadPipe}();Deg2RadPipe.decorators=[{type:core.Pipe,args:[{name:"deg2rad"}]}];var Rad2DegPipe=function(){function Rad2DegPipe(){_classCallCheck(this,Rad2DegPipe)}return _createClass(Rad2DegPipe,[{key:"transform",value:function transform(radians){return radians*(180/Math.PI)}}]),Rad2DegPipe}();Rad2DegPipe.decorators=[{type:core.Pipe,args:[{name:"rad2deg"}]}];var AtftPipeModule=function AtftPipeModule(){_classCallCheck(this,AtftPipeModule)};AtftPipeModule.decorators=[{type:core.NgModule,args:[{imports:[common.b],declarations:[Deg2RadPipe,Rad2DegPipe],exports:[Deg2RadPipe,Rad2DegPipe]}]}];var atft_BloomService=function(){function BloomService(){_classCallCheck(this,BloomService),this.materials=[],this.darkMaterial=new three_module.X({color:"black"}),this.bloomLayer=new three_module.G,this.initialized=!1}return _createClass(BloomService,[{key:"init",value:function init(renderer,scene,camera){if(renderer&&scene&&camera){this.scene=scene,this.bloomLayer.set(1);var renderScene=new RenderPass.a(scene,camera),bloomPass=new UnrealBloomPass.a(new three_module.Lb(window.innerWidth,window.innerHeight),2,.1,.1);bloomPass.clear=!0;var fxaaPass=new ShaderPass.a(FXAAShader.a),pixelRatio=renderer.getPixelRatio();fxaaPass.material.uniforms.resolution.value.x=1/(window.innerWidth*pixelRatio),fxaaPass.material.uniforms.resolution.value.y=1/(window.innerHeight*pixelRatio),this.bloomComposer=new EffectComposer.a(renderer),this.bloomComposer.renderToScreen=!1,this.bloomComposer.addPass(renderScene),this.bloomComposer.addPass(bloomPass);var finalPass=new ShaderPass.a(new three_module.wb({uniforms:{baseTexture:{value:null},bloomTexture:{value:this.bloomComposer.renderTarget2.texture}},vertexShader:"\n  varying vec2 vUv;\n  void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }",fragmentShader:"\n  uniform sampler2D baseTexture;\n  uniform sampler2D bloomTexture;\n  varying vec2 vUv;\n  void main() {\n    gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n  }",defines:{}}),"baseTexture");finalPass.needsSwap=!0;new SMAAPass.a(window.innerWidth,window.innerHeight);this.finalComposer=new EffectComposer.a(renderer),this.finalComposer.addPass(renderScene),this.finalComposer.addPass(finalPass),this.finalComposer.addPass(fxaaPass),this.initialized=!0}else console.warn("BloomService.init not all parameters settled")}},{key:"render",value:function render(){var _this45=this;this.initialized&&(this.scene.traverse((function(i){_this45.darkenNonBloomed(i)})),this.bloomComposer.render(),this.scene.traverse((function(i){_this45.restoreMaterial(i)})),this.finalComposer.render())}},{key:"darkenNonBloomed",value:function darkenNonBloomed(obj){this.initialized&&obj.isMesh&&!1===this.bloomLayer.test(obj.layers)&&(this.materials[obj.uuid]=obj.material,obj.material=this.darkMaterial)}},{key:"restoreMaterial",value:function restoreMaterial(obj){this.initialized&&obj.isMesh&&this.materials[obj.uuid]&&(obj.material=this.materials[obj.uuid],delete this.materials[obj.uuid])}}]),BloomService}();atft_BloomService.decorators=[{type:core.Injectable}],atft_BloomService.ctorParameters=function(){return[]};var AtftRendererModule=function AtftRendererModule(){_classCallCheck(this,AtftRendererModule)};AtftRendererModule.decorators=[{type:core.NgModule,args:[{imports:[common.b],declarations:[RendererCanvasComponent],providers:[atft_RendererService,atft_BloomService],exports:[RendererCanvasComponent]}]}];var atft_RaycasterGroupDirective=function(){function RaycasterGroupDirective(host,raycasterService){_classCallCheck(this,RaycasterGroupDirective),this.host=host,this.raycasterService=raycasterService,this.mouseEnter=new core.EventEmitter,this.mouseExit=new core.EventEmitter,this.click=new core.EventEmitter,this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseExit=this.onMouseExit.bind(this),this.onClick=this.onClick.bind(this)}return _createClass(RaycasterGroupDirective,[{key:"ngAfterViewInit",value:function ngAfterViewInit(){this.raycasterService.addGroup(this.host),this.subscribeEvents()}},{key:"subscribeEvents",value:function subscribeEvents(){var obj=this.host.getObject();obj.addEventListener(RaycasterEvent.mouseEnter,this.onMouseEnter),obj.addEventListener(RaycasterEvent.mouseExit,this.onMouseExit),obj.addEventListener(RaycasterEvent.click,this.onClick)}},{key:"unSubscribeEvents",value:function unSubscribeEvents(){var obj=this.host.getObject();obj&&(obj.removeEventListener(RaycasterEvent.mouseEnter,this.onMouseEnter),obj.removeEventListener(RaycasterEvent.mouseExit,this.onMouseExit),obj.removeEventListener(RaycasterEvent.click,this.onClick))}},{key:"onMouseExit",value:function onMouseExit(){this.mouseExit.emit({component:this.host})}},{key:"onMouseEnter",value:function onMouseEnter(event){this.mouseEnter.emit({component:this.host,face:event.face})}},{key:"onClick",value:function onClick(event){this.click.emit({component:this.host,face:event.face})}},{key:"ngOnDestroy",value:function ngOnDestroy(){this.unSubscribeEvents()}}]),RaycasterGroupDirective}();atft_RaycasterGroupDirective.decorators=[{type:core.Directive,args:[{selector:"[atft-raycaster-group]"}]}],atft_RaycasterGroupDirective.ctorParameters=function(){return[{type:atft_AbstractObject3D},{type:atft_RaycasterService}]},atft_RaycasterGroupDirective.propDecorators={mouseEnter:[{type:core.Output}],mouseExit:[{type:core.Output}],click:[{type:core.Output}]};var RaycasterCameraDirective=function(){function RaycasterCameraDirective(host,raycasterService){_classCallCheck(this,RaycasterCameraDirective),this.host=host,this.raycasterService=raycasterService}return _createClass(RaycasterCameraDirective,[{key:"ngAfterViewInit",value:function ngAfterViewInit(){this.raycasterService.setCamera(this.host)}}]),RaycasterCameraDirective}();RaycasterCameraDirective.decorators=[{type:core.Directive,args:[{selector:"[atft-raycaster-camera]"}]}],RaycasterCameraDirective.ctorParameters=function(){return[{type:AbstractCamera},{type:atft_RaycasterService}]};var RaycasterEnableDirective=function(){function RaycasterEnableDirective(raycasterService){_classCallCheck(this,RaycasterEnableDirective),this.raycasterService=raycasterService}return _createClass(RaycasterEnableDirective,[{key:"ngAfterViewInit",value:function ngAfterViewInit(){this.raycasterService.enable()}}]),RaycasterEnableDirective}();RaycasterEnableDirective.decorators=[{type:core.Directive,args:[{selector:"[atft-raycaster-enable]"}]}],RaycasterEnableDirective.ctorParameters=function(){return[{type:atft_RaycasterService}]};var AtftRaycasterModule=function AtftRaycasterModule(){_classCallCheck(this,AtftRaycasterModule)};AtftRaycasterModule.decorators=[{type:core.NgModule,args:[{imports:[common.b],declarations:[atft_RaycasterGroupDirective,RaycasterCameraDirective,RaycasterEnableDirective],providers:[atft_RaycasterService],exports:[atft_RaycasterGroupDirective,RaycasterCameraDirective,RaycasterEnableDirective]}]}];var StatsAutoShowDirective=function(){function StatsAutoShowDirective(statsService){_classCallCheck(this,StatsAutoShowDirective),this.statsService=statsService}return _createClass(StatsAutoShowDirective,[{key:"ngAfterViewInit",value:function ngAfterViewInit(){this.statsService.create()}}]),StatsAutoShowDirective}();StatsAutoShowDirective.decorators=[{type:core.Directive,args:[{selector:"[atft-stats-auto-show]"}]}],StatsAutoShowDirective.ctorParameters=function(){return[{type:atft_StatsService}]};var AtftStatsModule=function AtftStatsModule(){_classCallCheck(this,AtftStatsModule)};AtftStatsModule.decorators=[{type:core.NgModule,args:[{imports:[common.b],providers:[atft_StatsService],declarations:[StatsAutoShowDirective],exports:[StatsAutoShowDirective]}]}];var atft_DashedDrawDirective=function(){function DashedDrawDirective(host,animationService){_classCallCheck(this,DashedDrawDirective),this.host=host,this.animationService=animationService,this.dashColor="#FF0000",this.dashIncrement=10,this.hideDash=!1,this.stop=!1}return _createClass(DashedDrawDirective,[{key:"ngAfterViewInit",value:function ngAfterViewInit(){this.tryToFindGeometry(),this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate),this.animationService.start()}},{key:"tryToFindGeometry",value:function tryToFindGeometry(){var _this46=this;this.host.getObject().traverse((function(child){var findMesh=child instanceof three_module.W?child:child.children[0];if(findMesh&&findMesh instanceof three_module.W&&!_this46.edges){var edgesGeom=new three_module.r(findMesh.geometry,8);_this46.edges=new three_module.L(edgesGeom,new three_module.K({color:_this46.dashColor})),_this46.edges.computeLineDistances(),_this46.edges.material.dashSize=0,_this46.edges.material.gapSize=_this46.edges.geometry.attributes.lineDistance.array[_this46.edges.geometry.attributes.lineDistance.count-1],_this46.material=findMesh.material,_this46.initialOpacity>=0&&(_this46.material.transparent||(_this46.material.transparent=!0),_this46.material.opacity=_this46.initialOpacity),findMesh.add(_this46.edges)}}))}},{key:"animate",value:function animate(){this.stop||(this.edges?(this.edges.material.dashSize+=this.dashIncrement,this.edges.material.dashSize>=this.edges.material.gapSize&&(this.hideDash&&(this.edges.parent.children=[]),this.targetOpacity>=0&&(this.material.opacity=this.targetOpacity,1===this.targetOpacity&&(this.material.transparent=!1)),this.stop=!0)):this.tryToFindGeometry())}},{key:"ngOnDestroy",value:function ngOnDestroy(){var _a;null===(_a=this.animation)||void 0===_a||_a.unsubscribe()}}]),DashedDrawDirective}();atft_DashedDrawDirective.decorators=[{type:core.Directive,args:[{selector:"[atft-dashed-draw]"}]}],atft_DashedDrawDirective.ctorParameters=function(){return[{type:atft_AbstractObject3D},{type:atft_AnimationService}]},atft_DashedDrawDirective.propDecorators={dashColor:[{type:core.Input}],dashIncrement:[{type:core.Input}],initialOpacity:[{type:core.Input}],targetOpacity:[{type:core.Input}],hideDash:[{type:core.Input}]};var atft_AbstractEmptyDirective=function(_AbstractObject3D12){_inherits(AbstractEmptyDirective,_AbstractObject3D12);var _super38=_createSuper(AbstractEmptyDirective);function AbstractEmptyDirective(){return _classCallCheck(this,AbstractEmptyDirective),_super38.apply(this,arguments)}return _createClass(AbstractEmptyDirective,[{key:"newObject3DInstance",value:function newObject3DInstance(){return new three_module.db}}]),AbstractEmptyDirective}(atft_AbstractObject3D);atft_AbstractEmptyDirective.decorators=[{type:core.Directive}];var atft_FogComponent=function(){function FogComponent(rendererService,parent){_classCallCheck(this,FogComponent),this.rendererService=rendererService,this.parent=parent,this.color="#0000AA",this.near=10,this.far=100}return _createClass(FogComponent,[{key:"ngAfterViewInit",value:function ngAfterViewInit(){this.parent&&this.parent.getObject()&&this.parent.getObject().isScene&&(this.scene=this.parent.getObject(),this.enableFog())}},{key:"enableFog",value:function enableFog(){this.scene.fog=new three_module.v(this.color,this.near,this.far),this.rendererService.render()}},{key:"disableFog",value:function disableFog(){this.scene.fog=void 0,this.rendererService.render()}},{key:"ngOnDestroy",value:function ngOnDestroy(){this.disableFog()}},{key:"ngOnChanges",value:function ngOnChanges(changes){this.scene&&["color","near","far"].some((function(propName){return propName in changes}))&&this.enableFog()}}]),FogComponent}();atft_FogComponent.decorators=[{type:core.Component,args:[{selector:"atft-fog",template:""}]}],atft_FogComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_SceneComponent,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_FogComponent.propDecorators={color:[{type:core.Input}],near:[{type:core.Input}],far:[{type:core.Input}]};var atft_EffectComposerComponent=function(){function EffectComposerComponent(rendererService,parentScene){_classCallCheck(this,EffectComposerComponent),this.rendererService=rendererService,this.parentScene=parentScene,this.renderToScreen=!0}return _createClass(EffectComposerComponent,[{key:"ngAfterViewInit",value:function ngAfterViewInit(){this.initComposer()}},{key:"ngOnDestroy",value:function ngOnDestroy(){this.rendererService.setComposer(null),this.composer=null,this.rendererService.render()}},{key:"ngOnChanges",value:function ngOnChanges(changes){}},{key:"initComposer",value:function initComposer(){if(!this.composer&&this.rendererService.getWebGlRenderer()){this.composer=new EffectComposer.a(this.rendererService.getWebGlRenderer()),this.composer.renderToScreen=this.renderToScreen;var renderPass=new RenderPass.a(this.parentScene.getObject(),this.rendererService.getCamera().camera);this.addPass(renderPass),this.sceneBackgroundTarget&&(this.sceneBackgroundTarget.getObject().background=this.composer.writeBuffer.texture),this.rendererService.setComposer(this)}}},{key:"addPass",value:function addPass(pass){this.initComposer(),this.composer.addPass(pass)}},{key:"removePass",value:function removePass(pass){if(this.composer&&this.composer.passes.length>1){var passes=this.composer.passes,index=passes.indexOf(pass,0);index>-1&&passes.splice(index,1),1===passes.length&&(this.composer=void 0)}}},{key:"render",value:function render(){this.composer&&this.composer.render(.1)}},{key:"getComposer",value:function getComposer(){return this.composer}}]),EffectComposerComponent}();atft_EffectComposerComponent.decorators=[{type:core.Component,args:[{selector:"atft-effect-composer",template:""}]}],atft_EffectComposerComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_SceneComponent,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_EffectComposerComponent.propDecorators={renderToScreen:[{type:core.Input}],sceneBackgroundTarget:[{type:core.Input}]};var AbstractComposeEffect=function(){function AbstractComposeEffect(rendererService,composer){_classCallCheck(this,AbstractComposeEffect),this.rendererService=rendererService,this.composer=composer,this.pass=[]}return _createClass(AbstractComposeEffect,[{key:"enable",value:function enable(){var _this47=this;this.composer&&(this.initPasses(),this.pass.forEach((function(pass){return _this47.composer.addPass(pass)})),this.rendererService.render())}},{key:"disable",value:function disable(){var _this48=this;this.composer&&(this.pass.forEach((function(pass){return _this48.composer.removePass(pass)})),this.rendererService.render())}},{key:"ngAfterViewInit",value:function ngAfterViewInit(){this.enable()}},{key:"ngOnDestroy",value:function ngOnDestroy(){this.disable()}},{key:"ngOnChanges",value:function ngOnChanges(changes){this.pass&&this.applyChanges(changes)&&this.rendererService.render()}}]),AbstractComposeEffect}();AbstractComposeEffect.decorators=[{type:core.Directive}],AbstractComposeEffect.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_EffectComposerComponent,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]};var atft_DofComponent=function(_AbstractComposeEffec){_inherits(DofComponent,_AbstractComposeEffec);var _super39=_createSuper(DofComponent);function DofComponent(rendererService,composer){var _this49;return _classCallCheck(this,DofComponent),(_this49=_super39.call(this,rendererService,composer)).rendererService=rendererService,_this49.composer=composer,_this49.focus=1,_this49.aperture=.025,_this49.maxblur=.01,_this49}return _createClass(DofComponent,[{key:"applyChanges",value:function applyChanges(changes){var modified=!1;return this.pass[0]&&(["focus"].some((function(propName){return propName in changes}))&&(this.pass[0].uniforms.focus.value=this.focus,modified=!0),["aperture"].some((function(propName){return propName in changes}))&&(this.pass[0].uniforms.aperture.value=this.aperture,modified=!0),["maxblur"].some((function(propName){return propName in changes}))&&(this.pass[0].uniforms.maxblur.value=this.maxblur,modified=!0)),modified}},{key:"initPasses",value:function initPasses(){this.pass.push(new BokehPass.a(this.rendererService.getScene().getObject(),this.rendererService.getCamera().camera,{focus:this.focus,aperture:this.aperture,maxblur:this.maxblur,width:window.innerWidth,height:window.innerHeight}))}}]),DofComponent}(AbstractComposeEffect);atft_DofComponent.decorators=[{type:core.Component,args:[{selector:"atft-dof",template:""}]}],atft_DofComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_EffectComposerComponent,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_DofComponent.propDecorators={focus:[{type:core.Input}],aperture:[{type:core.Input}],maxblur:[{type:core.Input}]};var atft_DotScreenComponent=function(_AbstractComposeEffec2){_inherits(DotScreenComponent,_AbstractComposeEffec2);var _super40=_createSuper(DotScreenComponent);function DotScreenComponent(rendererService,composer){var _this50;return _classCallCheck(this,DotScreenComponent),(_this50=_super40.call(this,rendererService,composer)).rendererService=rendererService,_this50.composer=composer,_this50.scale=4,_this50}return _createClass(DotScreenComponent,[{key:"initPasses",value:function initPasses(){this.pass.push(new ShaderPass.a(DotScreenShader.a))}},{key:"applyChanges",value:function applyChanges(changes){return!1}}]),DotScreenComponent}(AbstractComposeEffect);atft_DotScreenComponent.decorators=[{type:core.Component,args:[{selector:"atft-dot-screen",template:""}]}],atft_DotScreenComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_EffectComposerComponent,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_DotScreenComponent.propDecorators={scale:[{type:core.Input}]};var atft_BlurComponent=function(_AbstractComposeEffec3){_inherits(BlurComponent,_AbstractComposeEffec3);var _super41=_createSuper(BlurComponent);function BlurComponent(rendererService,composer){var _this51;return _classCallCheck(this,BlurComponent),(_this51=_super41.call(this,rendererService,composer)).rendererService=rendererService,_this51.composer=composer,_this51}return _createClass(BlurComponent,[{key:"initPasses",value:function initPasses(){this.pass.push(new ShaderPass.a(VerticalBlurShader.a)),this.pass.push(new ShaderPass.a(HorizontalBlurShader.a)),this.pass.push(new ShaderPass.a(VerticalBlurShader.a)),this.pass.push(new ShaderPass.a(HorizontalBlurShader.a))}},{key:"applyChanges",value:function applyChanges(changes){return!1}}]),BlurComponent}(AbstractComposeEffect);atft_BlurComponent.decorators=[{type:core.Component,args:[{selector:"atft-blur",template:""}]}],atft_BlurComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_EffectComposerComponent,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]};var AtftEffectModule=function AtftEffectModule(){_classCallCheck(this,AtftEffectModule)};AtftEffectModule.decorators=[{type:core.NgModule,args:[{imports:[common.b],declarations:[atft_DashedDrawDirective,atft_FogComponent,atft_DofComponent,atft_DotScreenComponent,atft_EffectComposerComponent,atft_BlurComponent],exports:[atft_DashedDrawDirective,atft_FogComponent,atft_DofComponent,atft_DotScreenComponent,atft_EffectComposerComponent,atft_BlurComponent]}]}];var AtftModule=function AtftModule(){_classCallCheck(this,AtftModule)};AtftModule.decorators=[{type:core.NgModule,args:[{imports:[AtftCameraModule,AtftObjectModule,AtftControlModule,AtftPipeModule,AtftRendererModule,AtftAnimationModule,AtftRaycasterModule,AtftStatsModule,AtftEffectModule],exports:[AtftCameraModule,AtftObjectModule,AtftControlModule,AtftPipeModule,AtftRendererModule,AtftAnimationModule,AtftRaycasterModule,AtftStatsModule,AtftEffectModule]}]}];var atft_LayerActorComponent=function(_AbstractEmptyDirecti){_inherits(LayerActorComponent,_AbstractEmptyDirecti);var _super42=_createSuper(LayerActorComponent);function LayerActorComponent(){var _this52;return _classCallCheck(this,LayerActorComponent),(_this52=_super42.apply(this,arguments)).render=new core.EventEmitter,_this52.selected=new core.EventEmitter,_this52.deselected=new core.EventEmitter,_this52.color="#A0A0A0",_this52}return _createClass(LayerActorComponent,[{key:"width",get:function get(){return this._width},set:function set(width){this._width=width,this.translateLabelX=this._width/2-10}},{key:"onSelected",value:function onSelected(){this.color="#A4A4A4"}},{key:"onDeselected",value:function onDeselected(){this.color="#A0A0A0"}},{key:"onClick",value:function onClick(){this.color="#A0A0A0"}}]),LayerActorComponent}(atft_AbstractEmptyDirective);atft_LayerActorComponent.decorators=[{type:core.Component,args:[{selector:"atft-layer-actor",providers:[provideParent(atft_LayerActorComponent)],template:'\n    <atft-plane-mesh atft-raycaster-group [width]="width" [height]="height" [materialColor]="color" (mouseEnter)="onSelected()"\n                     (mouseExit)="onDeselected()">\n      <atft-text-mesh [centered]="true" [text]="label" [size]="5" [translateX]="translateLabelX" [rotateZ]="(90 | deg2rad)"\n                      materialColor="#E0E0E0">\n      </atft-text-mesh>\n    </atft-plane-mesh>\n  '}]}],atft_LayerActorComponent.propDecorators={label:[{type:core.Input}],width:[{type:core.Input}],height:[{type:core.Input}],render:[{type:core.Output}],selected:[{type:core.Output}],deselected:[{type:core.Output}]};var atft_AbstractServerActor=function(_AbstractEmptyDirecti2){_inherits(AbstractServerActor,_AbstractEmptyDirecti2);var _super43=_createSuper(AbstractServerActor);function AbstractServerActor(){var _this53;return _classCallCheck(this,AbstractServerActor),(_this53=_super43.apply(this,arguments)).render=new core.EventEmitter,_this53.selected=new core.EventEmitter,_this53.deselected=new core.EventEmitter,_this53.actorClick=new core.EventEmitter,_this53.color="#ffffff",_this53.showFrame=!0,_this53}return _createClass(AbstractServerActor,[{key:"onSelected",value:function onSelected(){this.color="#fff0f0"}},{key:"onDeselected",value:function onDeselected(){this.color="#ffffff"}},{key:"onClick",value:function onClick(){console.log("ServerActorComponent.onClick"),this.color="#ffa0a0",this.actorClick.emit()}}]),AbstractServerActor}(atft_AbstractEmptyDirective);atft_AbstractServerActor.decorators=[{type:core.Directive}],atft_AbstractServerActor.propDecorators={label:[{type:core.Input}],render:[{type:core.Output}],selected:[{type:core.Output}],deselected:[{type:core.Output}],actorClick:[{type:core.Output}],icon:[{type:core.Input}],showFrame:[{type:core.Input}]};var ServerBarrelActorComponent=function(_AbstractServerActor){_inherits(ServerBarrelActorComponent,_AbstractServerActor);var _super44=_createSuper(ServerBarrelActorComponent);function ServerBarrelActorComponent(){return _classCallCheck(this,ServerBarrelActorComponent),_super44.apply(this,arguments)}return ServerBarrelActorComponent}(atft_AbstractServerActor);ServerBarrelActorComponent.decorators=[{type:core.Component,args:[{selector:"atft-server-barrel-actor",providers:[provideParent(ServerBarrelActorComponent)],template:'\n    <atft-empty name="server-box">\n\n      \x3c!-- TODO: template? --\x3e\n      <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n        <atft-svg-loader *ngIf="icon" [icon]="icon" overrideMaterialColor="#ffffff"\n                         material="basic" [maxX]="6" [maxY]="6" [translateZ]="13.1" [rotateZ]="(180 | deg2rad)" [rotateY]="(180 | deg2rad)">\n        </atft-svg-loader>\n\n        <atft-cylinder-mesh *ngFor="let z of [2, 6.5, 11]"\n                            [height]="4" [radiusTop]="6" [radiusBottom]="6" [radialSegments]="30" [openEnded]="false"\n                            material="phong" [materialColor]="color" [translateZ]="z" [rotateX]="(90 | deg2rad)">\n        </atft-cylinder-mesh>\n      </atft-empty>\n\n      <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                      [material]="\'basic\'" [materialColor]="\'0xDADADA\'" [translateY]="-11" [translateZ]="0.2">\n      </atft-text-mesh>\n      <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                       [materialColor]="color">\n      </atft-frame-mesh>\n    </atft-empty>\n  '}]}];var ServerStandActorComponent=function(_AbstractServerActor2){_inherits(ServerStandActorComponent,_AbstractServerActor2);var _super45=_createSuper(ServerStandActorComponent);function ServerStandActorComponent(){return _classCallCheck(this,ServerStandActorComponent),_super45.apply(this,arguments)}return ServerStandActorComponent}(atft_AbstractServerActor);ServerStandActorComponent.decorators=[{type:core.Component,args:[{selector:"atft-server-stand-actor",providers:[provideParent(ServerStandActorComponent)],template:'\n    <atft-empty name="server-box">\n\n      \x3c!-- TODO: template? --\x3e\n      <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n        <atft-box-mesh [height]="10" [width]="10" [depth]="14" material="phong" [materialColor]="color" [translateZ]="7"\n                       atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n          <atft-svg-loader *ngIf="icon" [icon]="icon" overrideMaterialColor="#ffffff"\n                           material="basic" [maxX]="8" [maxY]="8" [translateZ]="0"\n                           [translateY]="-5.1" [rotateX]="(90 | deg2rad)" [rotateZ]="(180 | deg2rad)" [rotateY]="(180 | deg2rad)">\n          </atft-svg-loader>\n        </atft-box-mesh>\n      </atft-empty>\n\n      <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                      material="basic" materialColor="#DADADA" [translateY]="-11" [translateZ]="0.1"\n      [depthWrite]="true">\n      </atft-text-mesh>\n      <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.2" material="basic"\n                       [depthWrite]="true" [materialColor]="color">\n      </atft-frame-mesh>\n    </atft-empty>\n  '}]}];var ServerCompactActorComponent=function(_AbstractServerActor3){_inherits(ServerCompactActorComponent,_AbstractServerActor3);var _super46=_createSuper(ServerCompactActorComponent);function ServerCompactActorComponent(){return _classCallCheck(this,ServerCompactActorComponent),_super46.apply(this,arguments)}return ServerCompactActorComponent}(atft_AbstractServerActor);ServerCompactActorComponent.decorators=[{type:core.Component,args:[{selector:"atft-server-compact-actor",providers:[provideParent(ServerCompactActorComponent)],template:'\n      <atft-empty name="server-box">\n\n          \x3c!-- TODO: template? --\x3e\n          <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n              <atft-box-mesh [height]="10" [width]="10" [depth]="3" material="phong" [materialColor]="color" [translateZ]="1.5"\n                             atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n                  <atft-svg-loader #svg *ngIf="icon" [icon]="icon" overrideMaterialColor="#ffffff"\n                                   material="basic" [maxX]="6" [maxY]="6" [translateZ]="1.6"\n                                   [translateY]="0" [rotateZ]="(180 | deg2rad)" [rotateY]="(180 | deg2rad)">\n                  </atft-svg-loader>\n              </atft-box-mesh>\n          </atft-empty>\n\n          <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                          material="basic" materialColor="#DADADA" [translateY]="-11" [translateZ]="0.2">\n          </atft-text-mesh>\n          <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                           [materialColor]="color">\n          </atft-frame-mesh>\n      </atft-empty>\n  '}]}];var ServerIconActorComponent=function(_AbstractServerActor4){_inherits(ServerIconActorComponent,_AbstractServerActor4);var _super47=_createSuper(ServerIconActorComponent);function ServerIconActorComponent(){return _classCallCheck(this,ServerIconActorComponent),_super47.apply(this,arguments)}return ServerIconActorComponent}(atft_AbstractServerActor);ServerIconActorComponent.decorators=[{type:core.Component,args:[{selector:"atft-server-icon-actor",providers:[provideParent(ServerIconActorComponent)],template:'\n    <atft-empty name="server-box">\n\n      <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n        <atft-svg-loader #svg *ngIf="icon" [icon]="icon" overrideMaterialColor="#ffffff" [translateZ]="0.1"\n                         material="basic" [maxX]="13" [maxY]="13"\n                         [translateY]="0" [rotateZ]="(180 | deg2rad)" [rotateY]="(180 | deg2rad)">\n        </atft-svg-loader>\n      </atft-empty>\n\n      <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                      material="basic" materialColor="#DADADA" [translateY]="-11" [translateZ]="0.2">\n      </atft-text-mesh>\n      <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                       [materialColor]="color">\n      </atft-frame-mesh>\n\n    </atft-empty>\n  '}]}];var WorkstationActorComponent=function(_AbstractServerActor5){_inherits(WorkstationActorComponent,_AbstractServerActor5);var _super48=_createSuper(WorkstationActorComponent);function WorkstationActorComponent(){var _this54;return _classCallCheck(this,WorkstationActorComponent),(_this54=_super48.apply(this,arguments)).videoSrc="https://raw.githubusercontent.com/makimenko/files/master/angular-template-for-threejs/videos/ui/retro_futuristic_ui_360p.mp4",_this54}return WorkstationActorComponent}(atft_AbstractServerActor);WorkstationActorComponent.decorators=[{type:core.Component,args:[{selector:"atft-workstation-actor",providers:[provideParent(WorkstationActorComponent)],template:'\n    <atft-empty name="server-box">\n\n      \x3c!-- TODO: template? --\x3e\n      <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n        <atft-box-mesh [height]="10" [width]="10" [depth]="0.5" material="phong" [materialColor]="color" [translateZ]="0.5">\n        </atft-box-mesh>\n        <atft-box-mesh [height]="12.25" [width]="21" [depth]="1" [materialColor]="color" material="phong"\n                       [rotateX]="(80 | deg2rad)" [translateZ]="7">\n\n          <atft-video-mesh *ngIf="videoSrc" [height]="11.25" [width]="20" [translateZ]="0.6" [videoSrc]="videoSrc">\n          </atft-video-mesh>\n          <atft-box-mesh *ngIf="!videoSrc" [height]="11.25" [width]="20" [depth]="0" [translateZ]="0.6" materialColor="#ffffff"\n                         [depthWrite]="false">\n          </atft-box-mesh>\n\n        </atft-box-mesh>\n      </atft-empty>\n\n      <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                      material="basic" materialColor="#DADADA" [translateY]="-11" [translateZ]="0.2">\n      </atft-text-mesh>\n      <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                       [materialColor]="color">\n      </atft-frame-mesh>\n    </atft-empty>\n  '}]}],WorkstationActorComponent.propDecorators={videoSrc:[{type:core.Input}]};var atft_GridActorComponent=function(_AbstractEmptyDirecti3){_inherits(GridActorComponent,_AbstractEmptyDirecti3);var _super49=_createSuper(GridActorComponent);function GridActorComponent(){var _this55;return _classCallCheck(this,GridActorComponent),(_this55=_super49.apply(this,arguments)).size=5,_this55.iterationsX=20,_this55.iterationsY=20,_this55.offset=1.05,_this55.render=new core.EventEmitter,_this55.gridEnter=new core.EventEmitter,_this55.deselected=new core.EventEmitter,_this55.gridClick=new core.EventEmitter,_this55.color="#A0A0A0",_this55}return _createClass(GridActorComponent,[{key:"onMouseEnter",value:function onMouseEnter(event){var pos=this.getLinePosition(event);pos&&this.gridEnter.emit(pos)}},{key:"onMouseClick",value:function onMouseClick(event){var pos=this.getLinePosition(event);pos&&this.gridClick.emit(pos)}},{key:"getLinePosition",value:function getLinePosition(event){if(event.face){var meshPosition=this.grid.getObject().geometry.attributes.position,geometry=new three_module.j;geometry.setAttribute("position",new three_module.i(new Float32Array(12),3));var linePosition=new three_module.H(geometry,new three_module.J({color:16777215,transparent:!0})).geometry.attributes.position;return linePosition.copyAt(0,meshPosition,event.face.a),linePosition.copyAt(1,meshPosition,event.face.b),linePosition.copyAt(2,meshPosition,event.face.c),linePosition.copyAt(3,meshPosition,event.face.a),linePosition}return null}},{key:"onDeselected",value:function onDeselected(){}}]),GridActorComponent}(atft_AbstractEmptyDirective);atft_GridActorComponent.decorators=[{type:core.Component,args:[{selector:"atft-grid-actor",providers:[provideParent(atft_GridActorComponent)],template:'\n    <atft-grid-mesh #grid [size]="size" [iterationsX]="iterationsX" [iterationsY]="iterationsY" [offset]="offset"\n                    (click)="onMouseClick($event)"\n                    (mouseEnter)="onMouseEnter($event)"\n                    (mouseExit)="onDeselected()"\n                    [materialColor]="color"\n                    atft-raycaster-group\n    ></atft-grid-mesh>\n  '}]}],atft_GridActorComponent.propDecorators={grid:[{type:core.ViewChild,args:["grid",{static:!0}]}],size:[{type:core.Input}],iterationsX:[{type:core.Input}],iterationsY:[{type:core.Input}],offset:[{type:core.Input}],render:[{type:core.Output}],gridEnter:[{type:core.Output}],deselected:[{type:core.Output}],gridClick:[{type:core.Output}]};var atft_DagreUtils=function(){function DagreUtils(){_classCallCheck(this,DagreUtils)}return _createClass(DagreUtils,null,[{key:"modelToGraph",value:function modelToGraph(model){var g=new dagre.graphlib.Graph({compound:!0,multigraph:!0});return g.setGraph(this.getLayout(model)),g.setDefaultEdgeLabel((function(){return{}})),this.updateGraph(g,model),Object(dagre.layout)(g),g}},{key:"updateBaseInfo",value:function updateBaseInfo(g,baseInfo){baseInfo&&baseInfo.forEach((function(node){g.setNode(node.name,{label:node.label,width:18,height:18}),node.composition&&g.setParent(node.name,node.composition)}))}},{key:"updateEdges",value:function updateEdges(g,model){model.edges&&model.edges.forEach((function(edge){g.setEdge(edge.from,edge.to,{name:edge.name})}))}},{key:"updateGraph",value:function updateGraph(g,model){this.updateBaseInfo(g,model.compositions),this.updateBaseInfo(g,model.nodes),this.updateEdges(g,model)}},{key:"getLayout",value:function getLayout(model){return model.layout}}]),DagreUtils}(),atft_DagreLayoutComponent=function(_AbstractEmptyDirecti4){_inherits(DagreLayoutComponent,_AbstractEmptyDirecti4);var _super50=_createSuper(DagreLayoutComponent);function DagreLayoutComponent(rendererService,parent){var _this56;return _classCallCheck(this,DagreLayoutComponent),(_this56=_super50.call(this,rendererService,parent)).rendererService=rendererService,_this56.parent=parent,_this56.align="DL",_this56.rankdir="BT",_this56.nodesep=15,_this56.edgesep=1,_this56.ranksep=15,_this56.marginx=0,_this56.marginy=0,_this56.ranker="network-simplex",_this56.centered=!0,_this56.updated=new core.EventEmitter,_this56.graphModel={layout:{},nodes:[],edges:[]},_this56}return _createClass(DagreLayoutComponent,[{key:"ngAfterViewInit",value:function ngAfterViewInit(){_get(_getPrototypeOf(DagreLayoutComponent.prototype),"ngAfterViewInit",this).call(this)}},{key:"ngAfterContentInit",value:function ngAfterContentInit(){this.layout()}},{key:"layout",value:function layout(){this.graphModel.layout={align:this.align,rankdir:this.rankdir,nodesep:this.nodesep,edgesep:this.edgesep,ranksep:this.ranksep,marginx:this.marginx,marginy:this.marginy,ranker:this.ranker},this.graph=atft_DagreUtils.modelToGraph(this.graphModel),this.syncGraphContainer(this.graph),this.updated.emit(),this.rendererService.render()}},{key:"syncGraphContainer",value:function syncGraphContainer(g){this.object&&this.centered&&(this.translateX=-g.graph().width/2,this.translateY=-g.graph().height/2,this.applyTranslation())}},{key:"ngOnChanges",value:function ngOnChanges(changes){if(_get(_getPrototypeOf(DagreLayoutComponent.prototype),"ngOnChanges",this).call(this,changes),this.object){var modified=!1;["align","rankdir","ranksep","nodesep","edgesep","marginx","marginy","ranker"].some((function(propName){return propName in changes}))&&(this.layout(),modified=!0),modified&&this.changed.emit()}}},{key:"ngOnDestroy",value:function ngOnDestroy(){_get(_getPrototypeOf(DagreLayoutComponent.prototype),"ngOnDestroy",this).call(this),this.graph=void 0,this.graphModel=void 0}},{key:"getGraphModel",value:function getGraphModel(){return this.graphModel}},{key:"refreshLayout",value:function refreshLayout(){this.graph&&this.layout()}},{key:"getGraph",value:function getGraph(){return this.graph}}]),DagreLayoutComponent}(atft_AbstractEmptyDirective);atft_DagreLayoutComponent.decorators=[{type:core.Component,args:[{selector:"atft-dagre-layout",providers:[provideParent(atft_DagreLayoutComponent)],template:"\n    <ng-content></ng-content>"}]}],atft_DagreLayoutComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]}]},atft_DagreLayoutComponent.propDecorators={align:[{type:core.Input}],rankdir:[{type:core.Input}],nodesep:[{type:core.Input}],edgesep:[{type:core.Input}],ranksep:[{type:core.Input}],marginx:[{type:core.Input}],marginy:[{type:core.Input}],ranker:[{type:core.Input}],centered:[{type:core.Input}],updated:[{type:core.Output}]};var LineEndType,EdgeType,DagreNodeComponent=function(_AbstractEmptyDirecti5){_inherits(DagreNodeComponent,_AbstractEmptyDirecti5);var _super51=_createSuper(DagreNodeComponent);function DagreNodeComponent(rendererService,parent,injector){var _this57;return _classCallCheck(this,DagreNodeComponent),(_this57=_super51.call(this,rendererService,parent)).rendererService=rendererService,_this57.parent=parent,_this57.injector=injector,_this57.translateZ=0,_this57.dagreLayout=_this57.injector.get(atft_DagreLayoutComponent),_this57.dagreLayout||console.warn("DagreNodeComponent.constructor: atft-dagre-layout not found!"),_this57.syncGraph=_this57.syncGraph.bind(_assertThisInitialized(_this57)),_this57.graphUpdated=_this57.dagreLayout.updated.subscribe(_this57.syncGraph),_this57}return _createClass(DagreNodeComponent,[{key:"ngOnInit",value:function ngOnInit(){_get(_getPrototypeOf(DagreNodeComponent.prototype),"ngOnInit",this).call(this),this.addNode()}},{key:"addNode",value:function addNode(){this.dagreLayout&&this.dagreLayout.getGraphModel()&&(this.dagreLayout.getChildren().push(this),this.dagreLayout.getGraphModel().nodes.push({name:this.name,label:this.name,composition:this.composition}),this.dagreLayout.refreshLayout())}},{key:"ngOnDestroy",value:function ngOnDestroy(){_get(_getPrototypeOf(DagreNodeComponent.prototype),"ngOnDestroy",this).call(this),this.removeNode()}},{key:"removeNode",value:function removeNode(){var _a,_this58=this;this.dagreLayout&&this.dagreLayout.getGraphModel()&&(null===(_a=this.graphUpdated)||void 0===_a||_a.unsubscribe(),this.dagreLayout.removeChildByName(this.name),this.dagreLayout.getGraphModel().nodes=this.dagreLayout.getGraphModel().nodes.filter((function(i){return i.name!==_this58.name})),this.dagreLayout.refreshLayout())}},{key:"syncGraphNodes",value:function syncGraphNodes(g){var _this59=this;g.nodes().forEach((function(name){if(name===_this59.name){var node=g.node(name);_this59.translateX=node.x,_this59.translateY=node.y,_this59.applyTranslation()}}))}},{key:"syncGraph",value:function syncGraph(){this.object&&this.syncGraphNodes(this.dagreLayout.getGraph())}}]),DagreNodeComponent}(atft_AbstractEmptyDirective);DagreNodeComponent.decorators=[{type:core.Component,args:[{selector:"atft-dagre-node",providers:[provideParent(DagreNodeComponent)],template:"<template #container></template><ng-content></ng-content>"}]}],DagreNodeComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]},{type:core.Injector}]},DagreNodeComponent.propDecorators={composition:[{type:core.Input}],translateZ:[{type:core.Input}],container:[{type:core.ViewChild,args:["container",{read:core.ViewContainerRef,static:!0}]}]},function(LineEndType){LineEndType.none="none",LineEndType.circle="circle",LineEndType.arrow="arrow"}(LineEndType||(LineEndType={})),function(EdgeType){EdgeType.sequence="sequence",EdgeType.association="association",EdgeType.message="message",EdgeType.line="line"}(EdgeType||(EdgeType={}));var atft_DagreEdgeComponent=function(_LineConnectorCompone){_inherits(DagreEdgeComponent,_LineConnectorCompone);var _super52=_createSuper(DagreEdgeComponent);function DagreEdgeComponent(rendererService,parent,animationService,injector){var _this60;return _classCallCheck(this,DagreEdgeComponent),(_this60=_super52.call(this,rendererService,parent,animationService)).rendererService=rendererService,_this60.parent=parent,_this60.animationService=animationService,_this60.injector=injector,_this60.startType=LineEndType.circle,_this60.endType=LineEndType.arrow,_this60.dagreLayout=_this60.injector.get(atft_DagreLayoutComponent),_this60.dagreLayout||console.warn("DagreEdgeComponent.constructor: atft-dagre-layout not found!"),_this60.syncGraph=_this60.syncGraph.bind(_assertThisInitialized(_this60)),_this60.graphUpdated=_this60.dagreLayout.updated.subscribe(_this60.syncGraph),_this60}return _createClass(DagreEdgeComponent,[{key:"type",set:function set(val){switch(val){case EdgeType.association:this.animated=!1,this.solid=!1,this.startType=LineEndType.none,this.endType=LineEndType.arrow;break;case EdgeType.message:this.animated=!0,this.solid=!1,this.dashSize=1,this.startType=LineEndType.circle,this.endType=LineEndType.arrow;break;case EdgeType.line:this.animated=!1,this.solid=!0,this.startType=LineEndType.none,this.endType=LineEndType.none;break;case EdgeType.sequence:this.animated=!1,this.solid=!0,this.startType=LineEndType.none,this.endType=LineEndType.arrow;break;default:this.animated=!0,this.solid=!1,this.dashSize=4,this.startType=LineEndType.circle,this.endType=LineEndType.arrow}}},{key:"newObject3DInstance",value:function newObject3DInstance(){var lineObject=_get(_getPrototypeOf(DagreEdgeComponent.prototype),"newObject3DInstance",this).call(this);return this.appendLineEnds(lineObject),lineObject}},{key:"appendLineEnds",value:function appendLineEnds(lineObject){var material=new three_module.X({color:this.materialColor,opacity:this.opacity,transparent:this.opacity<1,depthWrite:!0}),startGeometry=this.getConnectorEndGeometry(this.startType);startGeometry&&(this.lineStart=new three_module.W(startGeometry,material),lineObject.add(this.lineStart));var endGeometry=this.getConnectorEndGeometry(this.endType);endGeometry&&(this.lineEnd=new three_module.W(endGeometry,material),lineObject.add(this.lineEnd))}},{key:"getConnectorEndGeometry",value:function getConnectorEndGeometry(type){switch(type){case LineEndType.circle:return new three_module.k(.7,16);case LineEndType.arrow:var shape=new three_module.xb;return shape.moveTo(0,-.5),shape.lineTo(1,2),shape.lineTo(0,1.7),shape.lineTo(-1,2),new three_module.yb(shape);default:return}}},{key:"ngOnInit",value:function ngOnInit(){_get(_getPrototypeOf(DagreEdgeComponent.prototype),"ngOnInit",this).call(this),this.addEdge()}},{key:"addEdge",value:function addEdge(){this.dagreLayout&&this.dagreLayout.getGraphModel()&&(this.dagreLayout.getChildren().push(this),this.from&&this.to?this.dagreLayout.getGraphModel().edges.push({name:this.name,from:this.from,to:this.to}):console.warn("DagreEdgeComponent.addChild: edge source/target is undefined"),this.dagreLayout.refreshLayout())}},{key:"ngOnDestroy",value:function ngOnDestroy(){_get(_getPrototypeOf(DagreEdgeComponent.prototype),"ngOnDestroy",this).call(this),this.removeEdge()}},{key:"removeEdge",value:function removeEdge(){var _a,_this61=this;this.dagreLayout&&this.dagreLayout.getGraphModel()&&(null===(_a=this.graphUpdated)||void 0===_a||_a.unsubscribe(),this.dagreLayout.removeChildByName(this.name),this.dagreLayout.getGraphModel().edges=this.dagreLayout.getGraphModel().edges.filter((function(i){return i.name!==_this61.name})),this.dagreLayout.refreshLayout())}},{key:"syncGraph",value:function syncGraph(){this.object&&this.syncGraphEdges(this.dagreLayout.getGraph())}},{key:"syncGraphEdges",value:function syncGraphEdges(g){var _this62=this;g.edges().forEach((function(e){var edge=g.edge(e);edge.name===_this62.name&&(_this62.positions=[],edge.points.forEach((function(p){Number.isNaN(p.x)||Number.isNaN(p.y)||_this62.positions.push(p.x,p.y,.1)})),_this62.updateEnds(_this62.positions),_this62.updateLineGeometry())}))}},{key:"updateEnds",value:function updateEnds(positions){var p=this.positions;(null==p?void 0:p.length)>=9&&(this.updateEnd(this.lineStart,new three_module.Mb(p[3],p[4],p[5]),new three_module.Mb(p[0],p[1],p[2])),this.updateEnd(this.lineEnd,new three_module.Mb(p[p.length-6],p[p.length-5],p[p.length-4]),new three_module.Mb(p[p.length-3],p[p.length-2],p[p.length-1])))}},{key:"updateEnd",value:function updateEnd(lineSide,prevPoint,endPoint){if(lineSide){var angle=prevPoint.clone().sub(endPoint).angleTo(new three_module.Mb(0,1,0));angle=prevPoint.x<endPoint.x?angle:-angle,lineSide.rotation.set(0,0,angle),lineSide.position.set(endPoint.x||0,endPoint.y||0,endPoint.z||0)}}},{key:"getPositions",value:function getPositions(){return this.positions?this.positions:[0,0,0,0,0,0]}}]),DagreEdgeComponent}(atft_LineConnectorComponent);atft_DagreEdgeComponent.decorators=[{type:core.Component,args:[{selector:"atft-dagre-edge",providers:[provideParent(atft_DagreEdgeComponent)],template:"<ng-content></ng-content>"}]}],atft_DagreEdgeComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]},{type:atft_AnimationService},{type:core.Injector}]},atft_DagreEdgeComponent.propDecorators={from:[{type:core.Input}],to:[{type:core.Input}],startType:[{type:core.Input}],endType:[{type:core.Input}],type:[{type:core.Input}]};var atft_DagreCompositionComponent=function(_AbstractEmptyDirecti6){_inherits(DagreCompositionComponent,_AbstractEmptyDirecti6);var _super53=_createSuper(DagreCompositionComponent);function DagreCompositionComponent(rendererService,parent,injector,cdRef){var _this63;return _classCallCheck(this,DagreCompositionComponent),(_this63=_super53.call(this,rendererService,parent)).rendererService=rendererService,_this63.parent=parent,_this63.injector=injector,_this63.cdRef=cdRef,_this63.border="plane",_this63.render=new core.EventEmitter,_this63.selected=new core.EventEmitter,_this63.deselected=new core.EventEmitter,_this63.color="#A0A0A0",_this63.dagreLayout=_this63.injector.get(atft_DagreLayoutComponent),_this63.dagreLayout||console.warn("DagreCompositionComponent.constructor: atft-dagre-layout not found!"),_this63.syncGraph=_this63.syncGraph.bind(_assertThisInitialized(_this63)),_this63.graphUpdated=_this63.dagreLayout.updated.subscribe(_this63.syncGraph),_this63}return _createClass(DagreCompositionComponent,[{key:"height",get:function get(){return this._height},set:function set(height){this._height=height,this.translateLabelY=this._height/2-3,this.cdRef.destroyed||this.cdRef.detectChanges()}},{key:"onSelected",value:function onSelected(){this.color="#A4A4A4"}},{key:"onDeselected",value:function onDeselected(){this.color="#A0A0A0"}},{key:"onClick",value:function onClick(){this.color="#A0A0A0"}},{key:"ngOnInit",value:function ngOnInit(){_get(_getPrototypeOf(DagreCompositionComponent.prototype),"ngOnInit",this).call(this),this.addNode()}},{key:"addNode",value:function addNode(){this.dagreLayout&&this.dagreLayout.getGraphModel()&&(this.dagreLayout.getChildren().push(this),this.dagreLayout.getGraphModel().nodes.push({name:this.name,label:this.label,composition:this.composition}),this.dagreLayout.refreshLayout())}},{key:"ngOnDestroy",value:function ngOnDestroy(){_get(_getPrototypeOf(DagreCompositionComponent.prototype),"ngOnDestroy",this).call(this),this.removeNode()}},{key:"removeNode",value:function removeNode(){var _a,_this64=this;this.dagreLayout&&this.dagreLayout.getGraphModel()&&(null===(_a=this.graphUpdated)||void 0===_a||_a.unsubscribe(),this.dagreLayout.removeChildByName(this.name),this.dagreLayout.getGraphModel().nodes=this.dagreLayout.getGraphModel().nodes.filter((function(i){return i.name!==_this64.name})),this.dagreLayout.refreshLayout())}},{key:"syncGraphNodes",value:function syncGraphNodes(g){var _this65=this;g.nodes().forEach((function(name){if(name===_this65.name){var node=g.node(name);_this65.translateX=node.x,_this65.translateY=node.y,_this65.applyTranslation(),_this65.width=node.width,_this65.height=node.height}}))}},{key:"syncGraph",value:function syncGraph(){this.object&&this.syncGraphNodes(this.dagreLayout.getGraph())}}]),DagreCompositionComponent}(atft_AbstractEmptyDirective);atft_DagreCompositionComponent.decorators=[{type:core.Component,args:[{selector:"atft-dagre-composition",providers:[provideParent(atft_DagreCompositionComponent)],template:'\n    <atft-plane-mesh *ngIf="border!=\'frame\'" atft-raycaster-group [width]="width" [height]="height" [materialColor]="color"\n                     [depthWrite]="true"\n                     (mouseEnter)="onSelected()"\n                     (mouseExit)="onDeselected()">\n      <atft-text-mesh [centered]="true" [text]="label" [size]="3" [translateY]="translateLabelY"\n                      materialColor="#E0E0E0">\n      </atft-text-mesh>\n    </atft-plane-mesh>\n\n    <atft-frame-mesh *ngIf="border==\'frame\'" [sizeX]="width" [sizeY]="height" [thickness]="2" [materialColor]="color"\n                     [depthWrite]="true"\n                     atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()">\n      <atft-text-mesh [centered]="true" [text]="label" [size]="3" [translateY]="translateLabelY"\n                      materialColor="#E0E0E0">\n      </atft-text-mesh>\n    </atft-frame-mesh>\n\n  '}]}],atft_DagreCompositionComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]},{type:core.Injector},{type:core.ChangeDetectorRef}]},atft_DagreCompositionComponent.propDecorators={label:[{type:core.Input}],border:[{type:core.Input}],height:[{type:core.Input}],width:[{type:core.Input}],render:[{type:core.Output}],selected:[{type:core.Output}],deselected:[{type:core.Output}],composition:[{type:core.Input}]};var ModelActorComponent=function(_AbstractServerActor6){_inherits(ModelActorComponent,_AbstractServerActor6);var _super54=_createSuper(ModelActorComponent);function ModelActorComponent(rendererService,parent,modelService){var _this66;return _classCallCheck(this,ModelActorComponent),(_this66=_super54.call(this,rendererService,parent)).rendererService=rendererService,_this66.parent=parent,_this66.modelService=modelService,_this66}return _createClass(ModelActorComponent,[{key:"model",get:function get(){return this.model},set:function set(model){var iconProvider=this.modelService.getSource(model);this.modelPath=iconProvider.url}}]),ModelActorComponent}(atft_AbstractServerActor);ModelActorComponent.decorators=[{type:core.Component,args:[{selector:"atft-model-actor",providers:[provideParent(ModelActorComponent)],template:'\n    <atft-empty>\n\n      <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n        <atft-obj-loader *ngIf="modelPath" [model]="modelPath">\n        </atft-obj-loader>\n      </atft-empty>\n\n      <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                      material="basic" materialColor="#DADADA" [translateY]="-11" [translateZ]="0.2">\n      </atft-text-mesh>\n      <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                       [materialColor]="color">\n      </atft-frame-mesh>\n\n    </atft-empty>\n  '}]}],ModelActorComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]},{type:ModelService}]},ModelActorComponent.propDecorators={model:[{type:core.Input}]};var ActorRepositoryService=function(){function ActorRepositoryService(resolver){_classCallCheck(this,ActorRepositoryService),this.resolver=resolver,this.list=new Map,this.register("stand",ServerStandActorComponent),this.register("compact",ServerCompactActorComponent),this.register("barrel",ServerBarrelActorComponent),this.register("icon",ServerIconActorComponent),this.register("workstation",WorkstationActorComponent),this.register("model",ModelActorComponent)}return _createClass(ActorRepositoryService,[{key:"register",value:function register(id,component){this.defaultId||(this.defaultId=id),this.list.set(id,component)}},{key:"getComponentFactory",value:function getComponentFactory(id){var comp=this.list.get(null!=id?id:this.defaultId);return this.resolver.resolveComponentFactory(comp)}}]),ActorRepositoryService}();ActorRepositoryService.decorators=[{type:core.Injectable}],ActorRepositoryService.ctorParameters=function(){return[{type:core.ComponentFactoryResolver}]};var atft_DagreYamlParserComponent=function(_AbstractEmptyDirecti7){_inherits(DagreYamlParserComponent,_AbstractEmptyDirecti7);var _super55=_createSuper(DagreYamlParserComponent);function DagreYamlParserComponent(rendererService,parent,resolver,actorRepository){var _this67;return _classCallCheck(this,DagreYamlParserComponent),(_this67=_super55.call(this,rendererService,parent)).rendererService=rendererService,_this67.parent=parent,_this67.resolver=resolver,_this67.actorRepository=actorRepository,_this67.status=new core.EventEmitter,_this67.instances=[],_this67}return _createClass(DagreYamlParserComponent,[{key:"ngAfterViewInit",value:function ngAfterViewInit(){_get(_getPrototypeOf(DagreYamlParserComponent.prototype),"ngAfterViewInit",this).call(this),this.parseAndCreate()}},{key:"ngOnChanges",value:function ngOnChanges(changes){_get(_getPrototypeOf(DagreYamlParserComponent.prototype),"ngOnChanges",this).call(this,changes),this.object&&["yaml"].some((function(propName){return propName in changes}))&&this.parseAndCreate()}},{key:"parseAndCreate",value:function parseAndCreate(){var _a,_b,_c,_this68=this;if(this.yaml)try{this.destroyAll();var model=Object(browser.parse)(this.yaml);model&&model.nodes&&model.nodes.length>0&&(null===(_a=model.compositions)||void 0===_a||_a.forEach((function(i){return _this68.createComposition(i)})),null===(_b=model.nodes)||void 0===_b||_b.forEach((function(i){return _this68.createNode(i)})),null===(_c=model.edges)||void 0===_c||_c.forEach((function(i){return _this68.createEdge(i)}))),this.status.emit(!0)}catch(e){throw console.warn("DagreYamlParserComponent.parseAndCreate failed",e),this.status.emit(!1),e}}},{key:"getNodeComponent",value:function getNodeComponent(id){return this.actorRepository.getComponentFactory(id)}},{key:"createNode",value:function createNode(node){var nodeFactory=this.resolver.resolveComponentFactory(DagreNodeComponent),nodeRef=this.container.createComponent(nodeFactory);nodeRef.instance.name=node.name,nodeRef.instance.composition=node.composition,this.instances.push(nodeRef);var serverFactory=this.getNodeComponent(node.model?"model":node.type),serverRef=nodeRef.instance.container.createComponent(serverFactory);serverRef.instance.name=node.name,serverRef.instance.label=node.label?node.label:node.name,serverRef.instance.icon=node.icon,serverRef.instance.model=node.model,this.instances.push(serverRef)}},{key:"createEdge",value:function createEdge(edge){var factory=this.resolver.resolveComponentFactory(atft_DagreEdgeComponent),edgeRef=this.container.createComponent(factory);edgeRef.instance.from=edge.from,edgeRef.instance.to=edge.to,edge.type&&(edgeRef.instance.type=edge.type),edge.color&&(edgeRef.instance.materialColor=edge.color),this.instances.push(edgeRef)}},{key:"destroyAll",value:function destroyAll(){this.instances.forEach((function(i){i.destroy()})),this.instances=[]}},{key:"createComposition",value:function createComposition(composition){var factory=this.resolver.resolveComponentFactory(atft_DagreCompositionComponent),compositionRef=this.container.createComponent(factory);compositionRef.instance.name=composition.name,compositionRef.instance.label=composition.label?composition.label:composition.name,compositionRef.instance.composition=composition.composition,compositionRef.instance.border=composition.border,this.instances.push(compositionRef)}}]),DagreYamlParserComponent}(atft_AbstractEmptyDirective);atft_DagreYamlParserComponent.decorators=[{type:core.Component,args:[{selector:"atft-dagre-yaml-parser",providers:[provideParent(atft_DagreYamlParserComponent)],template:"\n    <template #container></template>"}]}],atft_DagreYamlParserComponent.ctorParameters=function(){return[{type:atft_RendererService},{type:atft_AbstractObject3D,decorators:[{type:core.SkipSelf},{type:core.Optional}]},{type:core.ComponentFactoryResolver},{type:ActorRepositoryService}]},atft_DagreYamlParserComponent.propDecorators={yaml:[{type:core.Input}],status:[{type:core.Output}],container:[{type:core.ViewChild,args:["container",{read:core.ViewContainerRef}]}]};var virtual_city_stories_a,virtual_city_stories_b;core.NgModule,common.b;const modelPath="https://raw.githubusercontent.com/makimenko/files/master/angular-template-for-threejs/model/";let virtual_city_stories_StorybookFlyComponent=class StorybookFlyComponent{constructor(animationService){this.animationService=animationService,this.clock=new three_module.l,this.colorA200="#9FA8DA"}ngAfterViewInit(){this.initCameraMovementClip(),this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate),this.animationService.start()}initCameraMovementClip(){const positionKF=new three_module.Ob(".position",[0,10,20],[0,50,600,-30,10,400,10,50,200]),cameraMoveClip=new three_module.c("Hello",20,[positionKF]);this.mixer=new three_module.d(this.cameraComponent.camera);const clipAction=this.mixer.clipAction(cameraMoveClip);clipAction.setLoop(three_module.P,1),clipAction.clampWhenFinished=!0,clipAction.play()}animate(){this.mixer&&this.mixer.update(this.clock.getDelta())}ngOnDestroy(){var _a;null===(_a=this.animation)||void 0===_a||_a.unsubscribe()}};Object(tslib_es6.b)([Object(core.ViewChild)("cam"),Object(tslib_es6.c)("design:type","function"==typeof(virtual_city_stories_a=void 0!==atft_PerspectiveCameraComponent&&atft_PerspectiveCameraComponent)?virtual_city_stories_a:Object)],virtual_city_stories_StorybookFlyComponent.prototype,"cameraComponent",void 0),virtual_city_stories_StorybookFlyComponent=Object(tslib_es6.b)([Object(core.Component)({template:`\n    <atft-renderer-canvas>\n      <atft-perspective-camera #cam [zAxisUp]="true" positionX=0 [positionY]=50 [positionZ]=z>\n      </atft-perspective-camera>\n\n      \x3c!-- Foreground --\x3e\n      <atft-scene name="scene" background="#000000">\n\n        <atft-ambient-light color="#FFFFFF" [intensity]="0.9"></atft-ambient-light>\n\n        <atft-point-light [intensity]="0.1" [distance]="1000" [translateX]=90 [translateY]=90\n                          [translateZ]=90></atft-point-light>\n        <atft-point-light [intensity]="0.1" [distance]="1000" [translateX]="-60" [translateY]="-60"\n                          [translateZ]="50"></atft-point-light>\n\n        <atft-text-actor text="Introducing Angular Template for Three.js" [translateX]="-200" [translateY]="50" [translateZ]="-50"\n                         [animate]="false" [minDelay]="5" [maxDelay]="5" [materialColor]="colorA200"\n                         [scaleX]="0.5" [scaleY]="0.5"\n                         atft-dashed-draw [dashColor]="colorA200" [dashIncrement]="5">\n        </atft-text-actor>\n\n        <atft-text-actor text="Hello, virtual city!" [translateX]="100" [translateY]="5" [translateZ]="-100"\n                         [animate]="false" [minDelay]="10" [maxDelay]="10" [materialColor]="colorA200"\n                         atft-dashed-draw [dashColor]="colorA200" [dashIncrement]="5">\n        </atft-text-actor>\n\n        <atft-text-actor text="Coding allow us to construct and visit believable imaginary cities,\nprovide us with glimpses of ancient urbanism, and let us immerse ourselves\nin the wildest utopias and darkest dystopias of our possible futures.\nThey are an unprecedented canvas for experimenting with the urban environment,\nand an utterly unique medium for experiencing cities both imagined\nand real in truly immersive ways." [translateX]="-50" [translateY]="100" [translateZ]="-50"\n                         [animate]="false" [minDelay]="10" [maxDelay]="10" [materialColor]="colorA200"\n                         [scaleX]="0.3" [scaleY]="0.3" [dashIncrement]="50"\n                         atft-dashed-draw [dashColor]="colorA200">\n        </atft-text-actor>\n\n        <atft-obj-loader\n          model="${modelPath}/SampleArea/Base.obj"\n          material="${modelPath}/SampleArea/Base.mtl"\n          resourcePath="${modelPath}/">\n        </atft-obj-loader>\n\n        <atft-obj-loader atft-dashed-draw dashColor="#303030" [dashIncrement]="150" [initialOpacity]="0.2"\n                         model="${modelPath}/SampleArea/Zone.obj"\n                         material="${modelPath}/SampleArea/Zone.mtl"\n                         resourcePath="${modelPath}/">\n        </atft-obj-loader>\n\n        <atft-obj-loader *ngFor="let item of [].constructor(5); let i = index"\n                         atft-dashed-draw dashColor="#303030" [dashIncrement]="20+(5*i)" [initialOpacity]="0.2"\n                         model="${modelPath}/SampleArea/House{{i+1}}.obj"\n                         material="${modelPath}/SampleArea/House{{i+1}}.mtl"\n                         resourcePath="${modelPath}/">\n        </atft-obj-loader>\n      </atft-scene>\n    </atft-renderer-canvas>\n  `}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(virtual_city_stories_b=void 0!==animation.a&&animation.a)?virtual_city_stories_b:Object])],virtual_city_stories_StorybookFlyComponent);__webpack_exports__.default={title:"All-in-One/Virtual City",decorators:[Object(client.moduleMetadata)({imports:[atft_module.a,ux.a]})],args:{},argTypes:{}};const VirtualCity=args=>({component:virtual_city_stories_StorybookFlyComponent,props:args});VirtualCity.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookFlyComponent,\n  props: args\n})"}},VirtualCity.parameters)},1438:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Connector",(function(){return Connector})),__webpack_require__.d(__webpack_exports__,"Mesh",(function(){return Mesh})),__webpack_require__.d(__webpack_exports__,"Plane",(function(){return Plane})),__webpack_require__.d(__webpack_exports__,"Grid",(function(){return Grid}));var _a,_b,_c,_d,tslib_es6=__webpack_require__(1),client=__webpack_require__(24),atft_module=__webpack_require__(21),core=__webpack_require__(0),performance_scene_wrapper=__webpack_require__(233),animation_service=__webpack_require__(50),perspective_camera_component=(__webpack_require__(331),__webpack_require__(117),__webpack_require__(332)),three_module=(__webpack_require__(333),__webpack_require__(2));class performance_stories_AbstractCameraRotation{constructor(animationService){this.animationService=animationService,this.clock=new three_module.l,this.matrix=new three_module.V,this.period=20,this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate),animationService.start()}animate(){this.camera&&(this.matrix.makeRotationZ(2*this.clock.getDelta()*Math.PI/this.period),this.camera.camera.position.applyMatrix4(this.matrix),this.camera.camera.lookAt(new three_module.Mb))}ngOnDestroy(){var _a;null===(_a=this.animation)||void 0===_a||_a.unsubscribe()}}Object(tslib_es6.b)([Object(core.ViewChild)(perspective_camera_component.a,{static:!1}),Object(tslib_es6.c)("design:type",Object)],performance_stories_AbstractCameraRotation.prototype,"camera",void 0);let StorybookConnectorPerformanceComponent=class StorybookConnectorPerformanceComponent extends performance_stories_AbstractCameraRotation{constructor(animationService){super(animationService),this.animationService=animationService}};StorybookConnectorPerformanceComponent=Object(tslib_es6.b)([Object(core.Component)({template:Object(performance_scene_wrapper.a)('\n<div *ngFor="let item of [].constructor(200); let i = index">\n  <atft-empty #a [translateY]="50" [translateX]="(-i*2)+50" [translateZ]="5+i">\n  </atft-empty>\n  <atft-empty #b [translateY]="-50" [translateX]="(-i)+50" [translateZ]="5-i">\n  </atft-empty>\n  <atft-line-connector [source]="a" [target]="b" materialColor="#ff0000" [animated]="true" transparent="false">\n  </atft-line-connector>\n  </div>\n  ')}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(_a=void 0!==animation_service.a&&animation_service.a)?_a:Object])],StorybookConnectorPerformanceComponent);let StorybookGridPerformanceComponent=class StorybookGridPerformanceComponent extends performance_stories_AbstractCameraRotation{constructor(animationService){super(animationService),this.animationService=animationService}};StorybookGridPerformanceComponent=Object(tslib_es6.b)([Object(core.Component)({template:Object(performance_scene_wrapper.a)('\n  <atft-grid-mesh [size]="5" [iterationsX]="50" [iterationsY]="50" [offset]="1.05"></atft-grid-mesh>\n  ')}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(_b=void 0!==animation_service.a&&animation_service.a)?_b:Object])],StorybookGridPerformanceComponent);let StorybookMeshPerformanceComponent=class StorybookMeshPerformanceComponent extends performance_stories_AbstractCameraRotation{constructor(animationService){super(animationService),this.animationService=animationService,this.size=5,this.iterations=50,this.offset=1.05*this.size,this.translate=this.iterations*this.offset/2}};StorybookMeshPerformanceComponent=Object(tslib_es6.b)([Object(core.Component)({template:Object(performance_scene_wrapper.a)('\n  <div *ngFor="let item of [].constructor(iterations); let x = index">\n    <div *ngFor="let item of [].constructor(iterations); let y = index">\n        <atft-empty [translateX]="(x*offset)-translate" [translateY]="(y*offset)-translate">\n            <atft-box-mesh [height]="size" [width]="size" [depth]="size" materialColor="#dadaff">\n            </atft-box-mesh>\n        </atft-empty>\n    </div>\n  </div>\n  ')}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(_c=void 0!==animation_service.a&&animation_service.a)?_c:Object])],StorybookMeshPerformanceComponent);let StorybookPlanePerformanceComponent=class StorybookPlanePerformanceComponent extends performance_stories_AbstractCameraRotation{constructor(animationService){super(animationService),this.animationService=animationService,this.size=5,this.iterations=50,this.offset=1.05*this.size,this.translate=this.iterations*this.offset/2}};StorybookPlanePerformanceComponent=Object(tslib_es6.b)([Object(core.Component)({template:Object(performance_scene_wrapper.a)('\n  <div *ngFor="let item of [].constructor(iterations); let x = index">\n    <div *ngFor="let item of [].constructor(iterations); let y = index">\n        <atft-empty [translateX]="(x*offset)-translate" [translateY]="(y*offset)-translate">\n            <atft-plane-mesh [height]="size" [width]="size" materialColor="#dadaff">\n            </atft-plane-mesh>\n        </atft-empty>\n    </div>\n  </div>\n  ')}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(_d=void 0!==animation_service.a&&animation_service.a)?_d:Object])],StorybookPlanePerformanceComponent);__webpack_exports__.default={title:"Other/Performance",decorators:[Object(client.moduleMetadata)({imports:[atft_module.a]})]};const Connector=args=>({component:StorybookConnectorPerformanceComponent,props:args}),Mesh=args=>({component:StorybookMeshPerformanceComponent,props:args}),Plane=args=>({component:StorybookPlanePerformanceComponent,props:args}),Grid=args=>({component:StorybookGridPerformanceComponent,props:args});Connector.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookConnectorPerformanceComponent,\n  props: args\n})"}},Connector.parameters),Mesh.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookMeshPerformanceComponent,\n  props: args\n})"}},Mesh.parameters),Plane.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookPlanePerformanceComponent,\n  props: args\n})"}},Plane.parameters),Grid.parameters=Object.assign({storySource:{source:"(args) => ({\n  component: StorybookGridPerformanceComponent,\n  props: args\n})"}},Grid.parameters)},146:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractModelLoader}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_abstract_lazy_object_3d__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(250);let AbstractModelLoader=class AbstractModelLoader extends _abstract_lazy_object_3d__WEBPACK_IMPORTED_MODULE_2__.a{set model(newModelUrl){this._model=newModelUrl,this.object&&super.startLoading()}get model(){return this._model}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",String),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",[String])],AbstractModelLoader.prototype,"model",null),AbstractModelLoader=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Directive)()],AbstractModelLoader)},172:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BoxMeshComponent}));var BoxMeshComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(85);let BoxMeshComponent=BoxMeshComponent_1=class BoxMeshComponent extends _abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.width=1,this.height=1,this.depth=1,this.widthSegments=1,this.heightSegments=1,this.depthSegments=1}newObject3DInstance(){const geometry=new three__WEBPACK_IMPORTED_MODULE_2__.h(this.width,this.height,this.depth,this.widthSegments,this.heightSegments,this.depthSegments),material=this.getMaterial(),mesh=new three__WEBPACK_IMPORTED_MODULE_2__.W(geometry,material);return this.applyShadowProps(mesh),mesh}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],BoxMeshComponent.prototype,"width",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],BoxMeshComponent.prototype,"height",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],BoxMeshComponent.prototype,"depth",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],BoxMeshComponent.prototype,"widthSegments",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],BoxMeshComponent.prototype,"heightSegments",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],BoxMeshComponent.prototype,"depthSegments",void 0),BoxMeshComponent=BoxMeshComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-box-mesh",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(BoxMeshComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],BoxMeshComponent)},173:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RendererCanvasComponent}));var _a,_b,_c,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_renderer_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);let RendererCanvasComponent=class RendererCanvasComponent{constructor(rendererService){this.rendererService=rendererService,this.preserveDrawingBuffer=!1,this.onResize=this.onResize.bind(this)}ngOnInit(){this.rendererService.initialize(this.canvas,this.preserveDrawingBuffer),this.resetCanvas()}get renderPane(){return this.canvasRef}get canvas(){return this.canvasRef.nativeElement}onResize(event){this.resetCanvas()}resetCanvas(){this.rendererService.resize(this.canvas,"100px"),this.rendererService.resize(this.canvas,"100%")}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ViewChild)("canvas",{static:!0}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type","function"==typeof(_a=void 0!==_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef)?_a:Object)],RendererCanvasComponent.prototype,"canvasRef",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],RendererCanvasComponent.prototype,"preserveDrawingBuffer",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.HostListener)("window:resize",["$event"]),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Function),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_b="undefined"!=typeof Event&&Event)?_b:Object]),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:returntype",void 0)],RendererCanvasComponent.prototype,"onResize",null),RendererCanvasComponent=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-renderer-canvas",template:(__webpack_require__(386).default||__webpack_require__(386)).length?__webpack_require__(386).default||__webpack_require__(386):"",styles:[(__webpack_require__(387).default||__webpack_require__(387)).length?__webpack_require__(387).default||__webpack_require__(387):""]}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_c=void 0!==_renderer_service__WEBPACK_IMPORTED_MODULE_2__.a&&_renderer_service__WEBPACK_IMPORTED_MODULE_2__.a)?_c:Object])],RendererCanvasComponent)},191:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=":host {\n  display: flex;\n  flex: 1;\n  height: 100%;\n}"},198:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return effectsSceneWrapper}));const effectsSceneWrapper=content=>`\n  <atft-orbit-controls style="height:100%" rotateSpeed=1 zoomSpeed=1.2>\n      <atft-renderer-canvas>\n          <atft-perspective-camera [zAxisUp]="true" positionX=40 [positionY]=-100\n                [positionZ]=50 atft-raycaster-camera atft-raycaster-enable>\n          </atft-perspective-camera>\n          <atft-scene name="scene" [background]="background">\n          ${content}\n\n          <atft-point-light [intensity]="0.5" [distance]="1000" [translateX]=90 [translateY]=90\n                            [translateZ]=90></atft-point-light>\n          <atft-point-light [intensity]="0.8" [distance]="1000" [translateX]="-60" [translateY]="-60"\n                            [translateZ]="50"></atft-point-light>\n\n          <atft-box-mesh *ngFor="let item of [].constructor(20); let i = index"\n                [height]="10" [width]="10" [depth]="10" material="phong" materialColor="#1111ff"\n                [translateX]="(i*15)-150"></atft-box-mesh>\n\n\n          </atft-scene>\n      </atft-renderer-canvas>\n  </atft-orbit-controls>\n`},199:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return UxActorModule}));var TextActorComponent_1,_a,_b,_c,tslib_es6=__webpack_require__(1),core=__webpack_require__(0),common=__webpack_require__(9),atft_module=__webpack_require__(21),util=__webpack_require__(12),helper=__webpack_require__(116),animation=__webpack_require__(45),renderer=__webpack_require__(38),object=__webpack_require__(20);let text_actor_component_TextActorComponent=TextActorComponent_1=class TextActorComponent extends helper.a{constructor(rendererService,parent,animationService){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.animationService=animationService,this.animate=!1,this.materialColor="#5DADE2",this.minDelay=5,this.maxDelay=10,this.subscribed=!1,this.currentPos=0,this.maxPos=0,this.i=0}ngAfterViewInit(){super.ngAfterViewInit(),this.updateText()}updateText(){this.text&&this.text.length>0&&(this.animate?(this.subscribed||(this.updateAnimation=this.updateAnimation.bind(this),this.animation=this.animationService.animate.subscribe(this.updateAnimation),this.subscribed=!0,this.animationService.start()),this.currentPos=0,this.maxPos=this.text.length,this.currentText="",this.currentDelay=this.randomInt(this.minDelay,this.maxDelay)):this.currentText=this.text)}ngOnDestroy(){super.ngOnDestroy(),this.done()}updateAnimation(){this.subscribed&&(this.i++,this.i%this.currentDelay==0&&(this.currentPos++,this.currentPos<=this.maxPos?(this.currentText=this.text.substr(0,this.currentPos),this.currentDelay=this.randomInt(this.minDelay,this.maxDelay)):this.done()))}done(){var _a;this.subscribed&&(this.subscribed=!1,this.i=0,null===(_a=this.animation)||void 0===_a||_a.unsubscribe())}randomInt(min,max){return Math.round(Math.random()*(max-min)+min)}ngOnChanges(changes){if(!this.object)return;super.ngOnChanges(changes);let modified=!1;["text"].some(propName=>propName in changes)&&(this.updateText(),modified=!0),["animate"].some(propName=>propName in changes)&&(this.animate?this.updateText():(this.done(),this.currentText=this.text),modified=!0),modified&&(this.changed.emit(),this.rendererService.render())}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],text_actor_component_TextActorComponent.prototype,"text",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],text_actor_component_TextActorComponent.prototype,"animate",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],text_actor_component_TextActorComponent.prototype,"materialColor",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],text_actor_component_TextActorComponent.prototype,"minDelay",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],text_actor_component_TextActorComponent.prototype,"maxDelay",void 0),text_actor_component_TextActorComponent=TextActorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-text-actor",providers:[Object(util.c)(TextActorComponent_1)],template:'\n    <atft-text-mesh [text]="currentText" [centered]="false" [materialColor]="materialColor">\n    </atft-text-mesh>\n  '}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(_a=void 0!==renderer.a&&renderer.a)?_a:Object,"function"==typeof(_b=void 0!==object.b&&object.b)?_b:Object,"function"==typeof(_c=void 0!==animation.a&&animation.a)?_c:Object])],text_actor_component_TextActorComponent);var LoaderActorComponent_1,loader_actor_component_a,loader_actor_component_b,loader_actor_component_c,three_module=__webpack_require__(2);let loader_actor_component_LoaderActorComponent=LoaderActorComponent_1=class LoaderActorComponent extends helper.a{constructor(rendererService,parent,animationService){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.animationService=animationService,this.animate=!0,this.materialColor="#5DADE2",this.subscribed=!1,this.i=0}ngAfterViewInit(){super.ngAfterViewInit(),this.init(),this.start()}getMaterial(){return Object(util.a)(this.materialColor,"basic")}init(){const geometry=new three_module.tb(.85,1,64,1,0,1.8*Math.PI),material=this.getMaterial();this.ring1=new three_module.W(geometry,material),this.ring1.scale.set(70,70,1),this.object.add(this.ring1),this.ring2=new three_module.W(geometry,material),this.ring2.scale.set(60,60,1),this.object.add(this.ring2),this.ring3=new three_module.W(geometry,material),this.ring3.scale.set(50,50,1),this.object.add(this.ring3)}start(){this.animate&&(this.updateAnimation=this.updateAnimation.bind(this),this.animation=this.animationService.animate.subscribe(this.updateAnimation),this.subscribed=!0,this.animationService.start())}ngOnDestroy(){super.ngOnDestroy(),this.stop()}updateAnimation(){this.subscribed&&(this.i++,this.ring1.scale.set(70+10*Math.sin(this.i/20)+12,70+10*Math.sin(this.i/20)+12,1),this.ring1.rotateZ(Math.sin(this.i/100)/5),this.ring2.rotateZ(Math.cos(this.i/70)/10),this.ring3.rotateZ(Math.sin(this.i/50)/20))}stop(){var _a;this.subscribed&&(this.subscribed=!1,this.i=0,null===(_a=this.animation)||void 0===_a||_a.unsubscribe())}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],loader_actor_component_LoaderActorComponent.prototype,"animate",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],loader_actor_component_LoaderActorComponent.prototype,"materialColor",void 0),loader_actor_component_LoaderActorComponent=LoaderActorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-loader-actor",providers:[Object(util.c)(LoaderActorComponent_1)],template:""}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(loader_actor_component_a=void 0!==renderer.a&&renderer.a)?loader_actor_component_a:Object,"function"==typeof(loader_actor_component_b=void 0!==object.b&&object.b)?loader_actor_component_b:Object,"function"==typeof(loader_actor_component_c=void 0!==animation.a&&animation.a)?loader_actor_component_c:Object])],loader_actor_component_LoaderActorComponent);let UxActorModule=class UxActorModule{};UxActorModule=Object(tslib_es6.b)([Object(core.NgModule)({imports:[common.b,atft_module.a],declarations:[text_actor_component_TextActorComponent,loader_actor_component_LoaderActorComponent],exports:[text_actor_component_TextActorComponent,loader_actor_component_LoaderActorComponent]})],UxActorModule)},20:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return abstract_object_3d.a})),__webpack_require__.d(__webpack_exports__,"a",(function(){return abstract_empty_directive_AbstractEmptyDirective})),__webpack_require__.d(__webpack_exports__,"g",(function(){return scene_component.a})),__webpack_require__.d(__webpack_exports__,"c",(function(){return helper.a})),__webpack_require__.d(__webpack_exports__,"f",(function(){return loader.c})),__webpack_require__.d(__webpack_exports__,"d",(function(){return grid_mesh_component.a})),__webpack_require__.d(__webpack_exports__,"e",(function(){return line_connector_component.a}));__webpack_require__(302);var abstract_object_3d=__webpack_require__(10),tslib_es6=__webpack_require__(1),core=__webpack_require__(0),three_module=__webpack_require__(2);let abstract_empty_directive_AbstractEmptyDirective=class AbstractEmptyDirective extends abstract_object_3d.a{newObject3DInstance(){return new three_module.db}};abstract_empty_directive_AbstractEmptyDirective=Object(tslib_es6.b)([Object(core.Directive)()],abstract_empty_directive_AbstractEmptyDirective);__webpack_require__(250),__webpack_require__(251);var scene_component=__webpack_require__(330),helper=__webpack_require__(116),loader=(__webpack_require__(308),__webpack_require__(309),__webpack_require__(311),__webpack_require__(310),__webpack_require__(312),__webpack_require__(201)),grid_mesh_component=(__webpack_require__(320),__webpack_require__(85),__webpack_require__(321),__webpack_require__(324),__webpack_require__(325),__webpack_require__(172),__webpack_require__(323),__webpack_require__(322),__webpack_require__(326)),line_connector_component=(__webpack_require__(327),__webpack_require__(303),__webpack_require__(335));__webpack_require__(328),__webpack_require__(329)},200:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return StatsService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three_examples_jsm_libs_stats_module_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(409);let StatsService=class StatsService{constructor(){document.body.addEventListener("keydown",event=>{event.altKey&&"s"===event.key&&this.toggle()})}update(){this.stats&&this.stats.update()}toggle(){this.stats?this.remove():this.create()}create(){this.stats||(this.stats=Object(three_examples_jsm_libs_stats_module_js__WEBPACK_IMPORTED_MODULE_2__.a)(),document.body.appendChild(this.stats.dom))}remove(){this.stats&&(this.stats.dom.remove(),this.stats.dom=null,this.stats=null)}ngOnDestroy(){this.remove()}};StatsService=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",[])],StatsService)},201:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(313),__webpack_require__(315),__webpack_require__(314),__webpack_require__(317),__webpack_require__(319),__webpack_require__(146);var _services__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(232);__webpack_require__.d(__webpack_exports__,"a",(function(){return _services__WEBPACK_IMPORTED_MODULE_6__.a})),__webpack_require__.d(__webpack_exports__,"b",(function(){return _services__WEBPACK_IMPORTED_MODULE_6__.b})),__webpack_require__.d(__webpack_exports__,"c",(function(){return _services__WEBPACK_IMPORTED_MODULE_6__.c})),__webpack_require__.d(__webpack_exports__,"d",(function(){return _services__WEBPACK_IMPORTED_MODULE_6__.d})),__webpack_require__.d(__webpack_exports__,"e",(function(){return _services__WEBPACK_IMPORTED_MODULE_6__.e}))},21:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftModule}));var RaycasterEvent,tslib_es6=__webpack_require__(1),core=__webpack_require__(0),atft_camera_module=__webpack_require__(331),atft_object_module=__webpack_require__(302),common=__webpack_require__(9),OrbitControls=__webpack_require__(230),renderer_service=__webpack_require__(8),three_module=__webpack_require__(2);!function(RaycasterEvent){RaycasterEvent.mouseEnter="mouseEnter",RaycasterEvent.mouseExit="mouseExit",RaycasterEvent.click="click"}(RaycasterEvent||(RaycasterEvent={}));let raycaster_service_RaycasterService=class RaycasterService{constructor(){this.raycaster=new three_module.rb,this.enabled=!1,this.groups=[],this.paused=!1,this.onMouseMove=this.onMouseMove.bind(this),this.onClick=this.onClick.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.subscribe()}ngOnDestroy(){this.disable(),this.unsubscribe()}subscribe(){window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("click",this.onClick),window.addEventListener("touchstart",this.onTouchStart)}unsubscribe(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("click",this.onClick),window.removeEventListener("touchstart",this.onTouchStart)}enable(){this.enabled=!0}disable(){this.enabled=!1}pause(){this.paused=!0}resume(){this.paused=!1}get isEnabled(){return this.enabled}setCamera(camera){this.camera=camera}addGroup(group){this.groups.push(group)}onMouseMove(event){if(!this.isReady())return;const i=this.getFirstIntersectedGroup(event.layerX,event.layerY);this.selected&&this.selected===i.object||(this.selected&&(this.selected.dispatchEvent({type:RaycasterEvent.mouseExit}),this.selected=null),i&&i.object&&(this.selected=i.object,this.selected.dispatchEvent({type:RaycasterEvent.mouseEnter,face:i.face})))}onClick(event){if(!this.isReady(!0))return;const i=this.getFirstIntersectedGroup(event.layerX,event.layerY);i&&i.object&&i.object.dispatchEvent({type:RaycasterEvent.click,face:i.face})}onTouchStart(event){if(!this.isReady())return;const i=this.getFirstIntersectedGroup(event.touches[0].clientX,event.touches[0].clientY);i&&i.object&&i.object.dispatchEvent({type:RaycasterEvent.click,face:i.face})}isReady(ignorePaused){return this.enabled&&(ignorePaused||!this.paused)&&this.camera&&this.camera.camera&&this.groups&&this.groups.length>0}getFirstIntersectedGroup(x,y){x=x/window.innerWidth*2-1,y=-y/window.innerHeight*2+1;const mouseVector=new three_module.Mb(x,y,.5);let face,nearestIntersection,nearestGroup;this.raycaster.setFromCamera(mouseVector,this.camera.camera);for(let k=0;k<this.groups.length;k++){const i=this.groups[k].getObject(),intersection=this.raycaster.intersectObject(i,!0);intersection.length>0&&(!nearestIntersection||nearestIntersection.distance>intersection[0].distance)&&(nearestIntersection=intersection[0],face=nearestIntersection.face,nearestGroup=i)}return nearestGroup?{object:nearestGroup,face:face}:{object:null,face:null}}};raycaster_service_RaycasterService=Object(tslib_es6.b)([Object(core.Injectable)(),Object(tslib_es6.c)("design:paramtypes",[])],raycaster_service_RaycasterService);var _a,_b,_c,_d,_e,abstract_camera=__webpack_require__(117),renderer_canvas_component=__webpack_require__(173);let AbstractOrbitControls=class AbstractOrbitControls{constructor(rendererService,raycasterService){this.rendererService=rendererService,this.raycasterService=raycasterService}ngOnChanges(changes){this.controls&&changes.listeningControlElement&&(this.controls.dispose(),this.setUpControls())}ngOnDestroy(){this.controls&&this.controls.dispose()}configureListeners(){this.controls.addEventListener("change",()=>{this.rendererService.render()}),this.raycasterService.isEnabled&&(this.controls.addEventListener("start",()=>{this.raycasterService.pause()}),this.controls.addEventListener("end",()=>{this.raycasterService.resume()}))}ngAfterViewInit(){if(void 0===this.childCameras||void 0===this.childCameras.first)throw new Error("Camera is not found");if(!this.webGlRenderer)throw new Error("webGlRenderer is not found");this.listeningControlElement=this.webGlRenderer.renderPane,this.setUpControls(),this.configureListeners(),this.rendererService.render()}};var orbit_controls_component_a,orbit_controls_component_b;Object(tslib_es6.b)([Object(core.ContentChildren)(abstract_camera.a,{descendants:!0}),Object(tslib_es6.c)("design:type","function"==typeof(_a=void 0!==core.QueryList&&core.QueryList)?_a:Object)],AbstractOrbitControls.prototype,"childCameras",void 0),Object(tslib_es6.b)([Object(core.ContentChild)(renderer_canvas_component.a,{static:!1}),Object(tslib_es6.c)("design:type","function"==typeof(_b=void 0!==renderer_canvas_component.a&&renderer_canvas_component.a)?_b:Object)],AbstractOrbitControls.prototype,"webGlRenderer",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type","function"==typeof(_c=void 0!==core.ElementRef&&core.ElementRef)?_c:Object)],AbstractOrbitControls.prototype,"listeningControlElement",void 0),AbstractOrbitControls=Object(tslib_es6.b)([Object(core.Directive)(),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(_d=void 0!==renderer_service.a&&renderer_service.a)?_d:Object,"function"==typeof(_e=void 0!==raycaster_service_RaycasterService&&raycaster_service_RaycasterService)?_e:Object])],AbstractOrbitControls);let orbit_controls_component_OrbitControlsComponent=class OrbitControlsComponent extends AbstractOrbitControls{constructor(rendererService,raycasterService){super(rendererService,raycasterService),this.rendererService=rendererService,this.raycasterService=raycasterService,this.rotateSpeed=1,this.zoomSpeed=1.2}setUpControls(){this.controls=new OrbitControls.b(this.childCameras.first.camera,this.listeningControlElement&&this.listeningControlElement.nativeElement),this.controls.rotateSpeed=this.rotateSpeed,this.controls.zoomSpeed=this.zoomSpeed}ngOnChanges(changes){this.controls&&(super.ngOnChanges(changes),changes.rotateSpeed&&(this.controls.rotateSpeed=this.rotateSpeed),changes.zoomSpeed&&(this.controls.zoomSpeed=this.zoomSpeed))}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],orbit_controls_component_OrbitControlsComponent.prototype,"rotateSpeed",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],orbit_controls_component_OrbitControlsComponent.prototype,"zoomSpeed",void 0),orbit_controls_component_OrbitControlsComponent=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-orbit-controls",template:"\n      <ng-content></ng-content>",styles:[(__webpack_require__(191).default||__webpack_require__(191)).length?__webpack_require__(191).default||__webpack_require__(191):""]}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(orbit_controls_component_a=void 0!==renderer_service.a&&renderer_service.a)?orbit_controls_component_a:Object,"function"==typeof(orbit_controls_component_b=void 0!==raycaster_service_RaycasterService&&raycaster_service_RaycasterService)?orbit_controls_component_b:Object])],orbit_controls_component_OrbitControlsComponent);var map_controls_component_a,map_controls_component_b,map_controls_component_c,animation_service=__webpack_require__(50);let map_controls_component_MapControlsComponent=class MapControlsComponent extends AbstractOrbitControls{constructor(rendererService,raycasterService,animationService){super(rendererService,raycasterService),this.rendererService=rendererService,this.raycasterService=raycasterService,this.animationService=animationService,this.rotateSpeed=1,this.zoomSpeed=1.2,this.autoRotate=!1,this.autoRotateSpeed=.5,this.enableDamping=!1,this.dampingFactor=.1,this.screenSpacePanning=!1,this.minDistance=20,this.maxDistance=200,this.maxPolarAngle=Math.PI/2-.1,this.panSpeed=1.2,this.minZoom=0,this.maxZoom=1/0}ngOnChanges(changes){this.controls&&(super.ngOnChanges(changes),changes.rotateSpeed&&(this.controls.rotateSpeed=this.rotateSpeed),changes.zoomSpeed&&(this.controls.zoomSpeed=this.zoomSpeed))}setUpControls(){this.controls=new OrbitControls.a(this.childCameras.first.camera,this.listeningControlElement&&this.listeningControlElement.nativeElement),this.controls.rotateSpeed=this.rotateSpeed,this.controls.zoomSpeed=this.zoomSpeed,this.controls.panSpeed=this.panSpeed,this.controls.autoRotate=this.autoRotate,this.controls.autoRotateSpeed=this.autoRotateSpeed,this.controls.enableDamping=this.enableDamping,this.controls.dampingFactor=this.dampingFactor,this.controls.screenSpacePanning=this.screenSpacePanning,this.controls.minDistance=this.minDistance,this.controls.maxDistance=this.maxDistance,this.controls.maxPolarAngle=this.maxPolarAngle,this.controls.minZoom=this.minZoom,this.controls.maxZoom=this.maxZoom,this.controls.update(),(this.autoRotate||this.enableDamping)&&(this.animation=this.animationService.animate.subscribe(()=>{this.controls.update()}),this.controls.addEventListener("change",()=>{this.rendererService.render()}),this.animationService.start()),this.rendererService.render()}ngOnDestroy(){var _a;super.ngOnDestroy(),null===(_a=this.animation)||void 0===_a||_a.unsubscribe()}reset(){this.controls.reset()}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"rotateSpeed",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"zoomSpeed",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"autoRotate",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"autoRotateSpeed",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"enableDamping",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"dampingFactor",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"screenSpacePanning",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"minDistance",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"maxDistance",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Number)],map_controls_component_MapControlsComponent.prototype,"maxPolarAngle",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"panSpeed",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"minZoom",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],map_controls_component_MapControlsComponent.prototype,"maxZoom",void 0),map_controls_component_MapControlsComponent=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-map-controls",template:"\n    <ng-content></ng-content>",styles:[(__webpack_require__(191).default||__webpack_require__(191)).length?__webpack_require__(191).default||__webpack_require__(191):""]}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(map_controls_component_a=void 0!==renderer_service.a&&renderer_service.a)?map_controls_component_a:Object,"function"==typeof(map_controls_component_b=void 0!==raycaster_service_RaycasterService&&raycaster_service_RaycasterService)?map_controls_component_b:Object,"function"==typeof(map_controls_component_c=void 0!==animation_service.a&&animation_service.a)?map_controls_component_c:Object])],map_controls_component_MapControlsComponent);let AtftControlModule=class AtftControlModule{};AtftControlModule=Object(tslib_es6.b)([Object(core.NgModule)({declarations:[orbit_controls_component_OrbitControlsComponent,map_controls_component_MapControlsComponent],imports:[common.b],exports:[orbit_controls_component_OrbitControlsComponent,map_controls_component_MapControlsComponent]})],AtftControlModule);let Deg2RadPipe=class Deg2RadPipe{transform(degrees){return degrees/180*Math.PI}};Deg2RadPipe=Object(tslib_es6.b)([Object(core.Pipe)({name:"deg2rad"})],Deg2RadPipe);let Rad2DegPipe=class Rad2DegPipe{transform(radians){return radians*(180/Math.PI)}};Rad2DegPipe=Object(tslib_es6.b)([Object(core.Pipe)({name:"rad2deg"})],Rad2DegPipe);let AtftPipeModule=class AtftPipeModule{};AtftPipeModule=Object(tslib_es6.b)([Object(core.NgModule)({imports:[common.b],declarations:[Deg2RadPipe,Rad2DegPipe],exports:[Deg2RadPipe,Rad2DegPipe]})],AtftPipeModule);var raycaster_group_directive_a,raycaster_group_directive_b,atft_renderer_module=__webpack_require__(334),atft_animation_module=__webpack_require__(304),abstract_object_3d=__webpack_require__(10);let raycaster_group_directive_RaycasterGroupDirective=class RaycasterGroupDirective{constructor(host,raycasterService){this.host=host,this.raycasterService=raycasterService,this.mouseEnter=new core.EventEmitter,this.mouseExit=new core.EventEmitter,this.click=new core.EventEmitter,this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseExit=this.onMouseExit.bind(this),this.onClick=this.onClick.bind(this)}ngAfterViewInit(){this.raycasterService.addGroup(this.host),this.subscribeEvents()}subscribeEvents(){const obj=this.host.getObject();obj.addEventListener(RaycasterEvent.mouseEnter,this.onMouseEnter),obj.addEventListener(RaycasterEvent.mouseExit,this.onMouseExit),obj.addEventListener(RaycasterEvent.click,this.onClick)}unSubscribeEvents(){const obj=this.host.getObject();obj&&(obj.removeEventListener(RaycasterEvent.mouseEnter,this.onMouseEnter),obj.removeEventListener(RaycasterEvent.mouseExit,this.onMouseExit),obj.removeEventListener(RaycasterEvent.click,this.onClick))}onMouseExit(){this.mouseExit.emit({component:this.host})}onMouseEnter(event){this.mouseEnter.emit({component:this.host,face:event.face})}onClick(event){this.click.emit({component:this.host,face:event.face})}ngOnDestroy(){this.unSubscribeEvents()}};var raycaster_camera_directive_a,raycaster_camera_directive_b;Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],raycaster_group_directive_RaycasterGroupDirective.prototype,"mouseEnter",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],raycaster_group_directive_RaycasterGroupDirective.prototype,"mouseExit",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],raycaster_group_directive_RaycasterGroupDirective.prototype,"click",void 0),raycaster_group_directive_RaycasterGroupDirective=Object(tslib_es6.b)([Object(core.Directive)({selector:"[atft-raycaster-group]"}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(raycaster_group_directive_a=void 0!==abstract_object_3d.a&&abstract_object_3d.a)?raycaster_group_directive_a:Object,"function"==typeof(raycaster_group_directive_b=void 0!==raycaster_service_RaycasterService&&raycaster_service_RaycasterService)?raycaster_group_directive_b:Object])],raycaster_group_directive_RaycasterGroupDirective);let RaycasterCameraDirective=class RaycasterCameraDirective{constructor(host,raycasterService){this.host=host,this.raycasterService=raycasterService}ngAfterViewInit(){this.raycasterService.setCamera(this.host)}};var raycaster_enable_directive_a;RaycasterCameraDirective=Object(tslib_es6.b)([Object(core.Directive)({selector:"[atft-raycaster-camera]"}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(raycaster_camera_directive_a=void 0!==abstract_camera.a&&abstract_camera.a)?raycaster_camera_directive_a:Object,"function"==typeof(raycaster_camera_directive_b=void 0!==raycaster_service_RaycasterService&&raycaster_service_RaycasterService)?raycaster_camera_directive_b:Object])],RaycasterCameraDirective);let RaycasterEnableDirective=class RaycasterEnableDirective{constructor(raycasterService){this.raycasterService=raycasterService}ngAfterViewInit(){this.raycasterService.enable()}};RaycasterEnableDirective=Object(tslib_es6.b)([Object(core.Directive)({selector:"[atft-raycaster-enable]"}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(raycaster_enable_directive_a=void 0!==raycaster_service_RaycasterService&&raycaster_service_RaycasterService)?raycaster_enable_directive_a:Object])],RaycasterEnableDirective);let AtftRaycasterModule=class AtftRaycasterModule{};AtftRaycasterModule=Object(tslib_es6.b)([Object(core.NgModule)({imports:[common.b],declarations:[raycaster_group_directive_RaycasterGroupDirective,RaycasterCameraDirective,RaycasterEnableDirective],providers:[raycaster_service_RaycasterService],exports:[raycaster_group_directive_RaycasterGroupDirective,RaycasterCameraDirective,RaycasterEnableDirective]})],AtftRaycasterModule);var stats_auto_show_directive_a,stats_service=__webpack_require__(200);let StatsAutoShowDirective=class StatsAutoShowDirective{constructor(statsService){this.statsService=statsService}ngAfterViewInit(){this.statsService.create()}};StatsAutoShowDirective=Object(tslib_es6.b)([Object(core.Directive)({selector:"[atft-stats-auto-show]"}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(stats_auto_show_directive_a=void 0!==stats_service.a&&stats_service.a)?stats_auto_show_directive_a:Object])],StatsAutoShowDirective);let AtftStatsModule=class AtftStatsModule{};var dashed_draw_directive_a,dashed_draw_directive_b;AtftStatsModule=Object(tslib_es6.b)([Object(core.NgModule)({imports:[common.b],providers:[stats_service.a],declarations:[StatsAutoShowDirective],exports:[StatsAutoShowDirective]})],AtftStatsModule);let dashed_draw_directive_DashedDrawDirective=class DashedDrawDirective{constructor(host,animationService){this.host=host,this.animationService=animationService,this.dashColor="#FF0000",this.dashIncrement=10,this.hideDash=!1,this.stop=!1}ngAfterViewInit(){this.tryToFindGeometry(),this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate),this.animationService.start()}tryToFindGeometry(){this.host.getObject().traverse(child=>{const findMesh=child instanceof three_module.W?child:child.children[0];if(findMesh&&findMesh instanceof three_module.W&&!this.edges){const edgesGeom=new three_module.r(findMesh.geometry,8);this.edges=new three_module.L(edgesGeom,new three_module.K({color:this.dashColor})),this.edges.computeLineDistances(),this.edges.material.dashSize=0,this.edges.material.gapSize=this.edges.geometry.attributes.lineDistance.array[this.edges.geometry.attributes.lineDistance.count-1],this.material=findMesh.material,this.initialOpacity>=0&&(this.material.transparent||(this.material.transparent=!0),this.material.opacity=this.initialOpacity),findMesh.add(this.edges)}})}animate(){this.stop||(this.edges?(this.edges.material.dashSize+=this.dashIncrement,this.edges.material.dashSize>=this.edges.material.gapSize&&(this.hideDash&&(this.edges.parent.children=[]),this.targetOpacity>=0&&(this.material.opacity=this.targetOpacity,1===this.targetOpacity&&(this.material.transparent=!1)),this.stop=!0)):this.tryToFindGeometry())}ngOnDestroy(){var _a;null===(_a=this.animation)||void 0===_a||_a.unsubscribe()}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dashed_draw_directive_DashedDrawDirective.prototype,"dashColor",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dashed_draw_directive_DashedDrawDirective.prototype,"dashIncrement",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dashed_draw_directive_DashedDrawDirective.prototype,"initialOpacity",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dashed_draw_directive_DashedDrawDirective.prototype,"targetOpacity",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dashed_draw_directive_DashedDrawDirective.prototype,"hideDash",void 0),dashed_draw_directive_DashedDrawDirective=Object(tslib_es6.b)([Object(core.Directive)({selector:"[atft-dashed-draw]"}),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(dashed_draw_directive_a=void 0!==abstract_object_3d.a&&abstract_object_3d.a)?dashed_draw_directive_a:Object,"function"==typeof(dashed_draw_directive_b=void 0!==animation_service.a&&animation_service.a)?dashed_draw_directive_b:Object])],dashed_draw_directive_DashedDrawDirective);var fog_component_a,fog_component_b,lib_object=__webpack_require__(20);let fog_component_FogComponent=class FogComponent{constructor(rendererService,parent){this.rendererService=rendererService,this.parent=parent,this.color="#0000AA",this.near=10,this.far=100}ngAfterViewInit(){this.parent&&this.parent.getObject()&&this.parent.getObject().isScene&&(this.scene=this.parent.getObject(),this.enableFog())}enableFog(){this.scene.fog=new three_module.v(this.color,this.near,this.far),this.rendererService.render()}disableFog(){this.scene.fog=void 0,this.rendererService.render()}ngOnDestroy(){this.disableFog()}ngOnChanges(changes){this.scene&&["color","near","far"].some(propName=>propName in changes)&&this.enableFog()}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],fog_component_FogComponent.prototype,"color",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],fog_component_FogComponent.prototype,"near",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],fog_component_FogComponent.prototype,"far",void 0),fog_component_FogComponent=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-fog",template:""}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(fog_component_a=void 0!==renderer_service.a&&renderer_service.a)?fog_component_a:Object,"function"==typeof(fog_component_b=void 0!==lib_object.g&&lib_object.g)?fog_component_b:Object])],fog_component_FogComponent);var effect_composer_component_a,effect_composer_component_b,effect_composer_component_c,BokehPass=__webpack_require__(422),EffectComposer=__webpack_require__(177),RenderPass=__webpack_require__(231);let effect_composer_component_EffectComposerComponent=class EffectComposerComponent{constructor(rendererService,parentScene){this.rendererService=rendererService,this.parentScene=parentScene,this.renderToScreen=!0}ngAfterViewInit(){this.initComposer()}ngOnDestroy(){this.rendererService.setComposer(null),this.composer=null,this.rendererService.render()}ngOnChanges(changes){}initComposer(){if(!this.composer&&this.rendererService.getWebGlRenderer()){this.composer=new EffectComposer.a(this.rendererService.getWebGlRenderer()),this.composer.renderToScreen=this.renderToScreen;const renderPass=new RenderPass.a(this.parentScene.getObject(),this.rendererService.getCamera().camera);this.addPass(renderPass),this.sceneBackgroundTarget&&(this.sceneBackgroundTarget.getObject().background=this.composer.writeBuffer.texture),this.rendererService.setComposer(this)}}addPass(pass){this.initComposer(),this.composer.addPass(pass)}removePass(pass){if(this.composer&&this.composer.passes.length>1){const passes=this.composer.passes,index=passes.indexOf(pass,0);index>-1&&passes.splice(index,1),1===passes.length&&(this.composer=void 0)}}render(){this.composer&&this.composer.render(.1)}getComposer(){return this.composer}};var abstract_compose_effect_a,abstract_compose_effect_b;Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],effect_composer_component_EffectComposerComponent.prototype,"renderToScreen",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type","function"==typeof(effect_composer_component_a=void 0!==lib_object.g&&lib_object.g)?effect_composer_component_a:Object)],effect_composer_component_EffectComposerComponent.prototype,"sceneBackgroundTarget",void 0),effect_composer_component_EffectComposerComponent=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-effect-composer",template:""}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(effect_composer_component_b=void 0!==renderer_service.a&&renderer_service.a)?effect_composer_component_b:Object,"function"==typeof(effect_composer_component_c=void 0!==lib_object.g&&lib_object.g)?effect_composer_component_c:Object])],effect_composer_component_EffectComposerComponent);let AbstractComposeEffect=class AbstractComposeEffect{constructor(rendererService,composer){this.rendererService=rendererService,this.composer=composer,this.pass=[]}enable(){this.composer&&(this.initPasses(),this.pass.forEach(pass=>this.composer.addPass(pass)),this.rendererService.render())}disable(){this.composer&&(this.pass.forEach(pass=>this.composer.removePass(pass)),this.rendererService.render())}ngAfterViewInit(){this.enable()}ngOnDestroy(){this.disable()}ngOnChanges(changes){this.pass&&this.applyChanges(changes)&&this.rendererService.render()}};var dof_component_a,dof_component_b;AbstractComposeEffect=Object(tslib_es6.b)([Object(core.Directive)(),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(abstract_compose_effect_a=void 0!==renderer_service.a&&renderer_service.a)?abstract_compose_effect_a:Object,"function"==typeof(abstract_compose_effect_b=void 0!==effect_composer_component_EffectComposerComponent&&effect_composer_component_EffectComposerComponent)?abstract_compose_effect_b:Object])],AbstractComposeEffect);let dof_component_DofComponent=class DofComponent extends AbstractComposeEffect{constructor(rendererService,composer){super(rendererService,composer),this.rendererService=rendererService,this.composer=composer,this.focus=1,this.aperture=.025,this.maxblur=.01}applyChanges(changes){let modified=!1;return this.pass[0]&&(["focus"].some(propName=>propName in changes)&&(this.pass[0].uniforms.focus.value=this.focus,modified=!0),["aperture"].some(propName=>propName in changes)&&(this.pass[0].uniforms.aperture.value=this.aperture,modified=!0),["maxblur"].some(propName=>propName in changes)&&(this.pass[0].uniforms.maxblur.value=this.maxblur,modified=!0)),modified}initPasses(){this.pass.push(new BokehPass.a(this.rendererService.getScene().getObject(),this.rendererService.getCamera().camera,{focus:this.focus,aperture:this.aperture,maxblur:this.maxblur,width:window.innerWidth,height:window.innerHeight}))}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dof_component_DofComponent.prototype,"focus",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dof_component_DofComponent.prototype,"aperture",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dof_component_DofComponent.prototype,"maxblur",void 0),dof_component_DofComponent=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-dof",template:""}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(dof_component_a=void 0!==renderer_service.a&&renderer_service.a)?dof_component_a:Object,"function"==typeof(dof_component_b=void 0!==effect_composer_component_EffectComposerComponent&&effect_composer_component_EffectComposerComponent)?dof_component_b:Object])],dof_component_DofComponent);var dot_screen_component_a,dot_screen_component_b,ShaderPass=__webpack_require__(76),DotScreenShader=__webpack_require__(415);let dot_screen_component_DotScreenComponent=class DotScreenComponent extends AbstractComposeEffect{constructor(rendererService,composer){super(rendererService,composer),this.rendererService=rendererService,this.composer=composer,this.scale=4}initPasses(){this.pass.push(new ShaderPass.a(DotScreenShader.a))}applyChanges(changes){return!1}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dot_screen_component_DotScreenComponent.prototype,"scale",void 0),dot_screen_component_DotScreenComponent=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-dot-screen",template:""}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(dot_screen_component_a=void 0!==renderer_service.a&&renderer_service.a)?dot_screen_component_a:Object,"function"==typeof(dot_screen_component_b=void 0!==effect_composer_component_EffectComposerComponent&&effect_composer_component_EffectComposerComponent)?dot_screen_component_b:Object])],dot_screen_component_DotScreenComponent);var blur_component_a,blur_component_b,VerticalBlurShader=__webpack_require__(260),HorizontalBlurShader=__webpack_require__(261);let blur_component_BlurComponent=class BlurComponent extends AbstractComposeEffect{constructor(rendererService,composer){super(rendererService,composer),this.rendererService=rendererService,this.composer=composer}initPasses(){this.pass.push(new ShaderPass.a(VerticalBlurShader.a)),this.pass.push(new ShaderPass.a(HorizontalBlurShader.a)),this.pass.push(new ShaderPass.a(VerticalBlurShader.a)),this.pass.push(new ShaderPass.a(HorizontalBlurShader.a))}applyChanges(changes){return!1}};blur_component_BlurComponent=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-blur",template:""}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(blur_component_a=void 0!==renderer_service.a&&renderer_service.a)?blur_component_a:Object,"function"==typeof(blur_component_b=void 0!==effect_composer_component_EffectComposerComponent&&effect_composer_component_EffectComposerComponent)?blur_component_b:Object])],blur_component_BlurComponent);let AtftEffectModule=class AtftEffectModule{};AtftEffectModule=Object(tslib_es6.b)([Object(core.NgModule)({imports:[common.b],declarations:[dashed_draw_directive_DashedDrawDirective,fog_component_FogComponent,dof_component_DofComponent,dot_screen_component_DotScreenComponent,effect_composer_component_EffectComposerComponent,blur_component_BlurComponent],exports:[dashed_draw_directive_DashedDrawDirective,fog_component_FogComponent,dof_component_DofComponent,dot_screen_component_DotScreenComponent,effect_composer_component_EffectComposerComponent,blur_component_BlurComponent]})],AtftEffectModule);let AtftModule=class AtftModule{};AtftModule=Object(tslib_es6.b)([Object(core.NgModule)({imports:[atft_camera_module.a,atft_object_module.a,AtftControlModule,AtftPipeModule,atft_renderer_module.a,atft_animation_module.a,AtftRaycasterModule,AtftStatsModule,AtftEffectModule],exports:[atft_camera_module.a,atft_object_module.a,AtftControlModule,AtftPipeModule,atft_renderer_module.a,atft_animation_module.a,AtftRaycasterModule,AtftStatsModule,AtftEffectModule]})],AtftModule)},224:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return EmptyComponent}));var EmptyComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10);let EmptyComponent=EmptyComponent_1=class EmptyComponent extends _abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent}newObject3DInstance(){return new three__WEBPACK_IMPORTED_MODULE_2__.db}};EmptyComponent=EmptyComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-empty",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(EmptyComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],EmptyComponent)},232:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return font_service.a})),__webpack_require__.d(__webpack_exports__,"e",(function(){return svg_loader_service_SvgLoaderService})),__webpack_require__.d(__webpack_exports__,"b",(function(){return icon_service_IconService})),__webpack_require__.d(__webpack_exports__,"d",(function(){return obj_loader_service.a})),__webpack_require__.d(__webpack_exports__,"c",(function(){return model_service_ModelService}));var font_service=__webpack_require__(318),tslib_es6=__webpack_require__(1),core=__webpack_require__(0),abstract_cache_service=__webpack_require__(257),three_module=__webpack_require__(2);class SVGLoader_SVGLoader extends three_module.N{constructor(manager){super(manager),this.defaultDPI=90,this.defaultUnit="px",this.defs=[],this.defaultDPI=90,this.defaultUnit="px"}load(url,onLoad,onProgress,onError){const scope=this,loader=new three_module.t(scope.manager);loader.setPath(scope.path),loader.setRequestHeader(scope.requestHeader),loader.setWithCredentials(scope.withCredentials),loader.load(url,(function(text){try{onLoad(scope.parse(text))}catch(e){onError?onError(e):console.error(e),scope.manager.itemError(url)}}),onProgress,onError)}parse(text){const scope=this;function parseArcCommand(path,rx,ry,x_axis_rotation,large_arc_flag,sweep_flag,start,end){if(0==rx||0==ry)return void path.lineTo(end.x,end.y);x_axis_rotation=x_axis_rotation*Math.PI/180,rx=Math.abs(rx),ry=Math.abs(ry);const dx2=(start.x-end.x)/2,dy2=(start.y-end.y)/2,x1p=Math.cos(x_axis_rotation)*dx2+Math.sin(x_axis_rotation)*dy2,y1p=-Math.sin(x_axis_rotation)*dx2+Math.cos(x_axis_rotation)*dy2;let rxs=rx*rx,rys=ry*ry;const x1ps=x1p*x1p,y1ps=y1p*y1p,cr=x1ps/rxs+y1ps/rys;if(cr>1){const s=Math.sqrt(cr);rxs=(rx*=s)*rx,rys=(ry*=s)*ry}const dq=rxs*y1ps+rys*x1ps,pq=(rxs*rys-dq)/dq;let q=Math.sqrt(Math.max(0,pq));large_arc_flag===sweep_flag&&(q=-q);const cxp=q*rx*y1p/ry,cyp=-q*ry*x1p/rx,cx=Math.cos(x_axis_rotation)*cxp-Math.sin(x_axis_rotation)*cyp+(start.x+end.x)/2,cy=Math.sin(x_axis_rotation)*cxp+Math.cos(x_axis_rotation)*cyp+(start.y+end.y)/2,theta=svgAngle(1,0,(x1p-cxp)/rx,(y1p-cyp)/ry),delta=svgAngle((x1p-cxp)/rx,(y1p-cyp)/ry,(-x1p-cxp)/rx,(-y1p-cyp)/ry)%(2*Math.PI);path.currentPath.absellipse(cx,cy,rx,ry,theta,theta+delta,0===sweep_flag,x_axis_rotation)}function svgAngle(ux,uy,vx,vy){const dot=ux*vx+uy*vy,len=Math.sqrt(ux*ux+uy*uy)*Math.sqrt(vx*vx+vy*vy);let ang=Math.acos(Math.max(-1,Math.min(1,dot/len)));return ux*vy-uy*vx<0&&(ang=-ang),ang}function parseStyle(node,style){style=Object.assign({},style);let stylesheetStyles={};if(node.hasAttribute("class")){const classSelectors=node.getAttribute("class").split(/\s/).filter(Boolean).map(i=>i.trim());for(let i=0;i<classSelectors.length;i++)stylesheetStyles=Object.assign(stylesheetStyles,stylesheets["."+classSelectors[i]])}function addStyle(svgName,jsName,adjustFunction){void 0===adjustFunction&&(adjustFunction=function copy(v){if(v.startsWith("url")){let ref=v.match(/url\(#(.*)\)/);return ref&&ref[1]?scope.defs[ref[1]]:v}return v}),node.hasAttribute(svgName)&&(style[jsName]=adjustFunction(node.getAttribute(svgName))),stylesheetStyles[svgName]&&(style[jsName]=adjustFunction(stylesheetStyles[svgName])),node.style&&""!==node.style[svgName]&&(style[jsName]=adjustFunction(node.style[svgName]))}function clamp(v){return Math.max(0,Math.min(1,parseFloatWithUnits(v)))}function positive(v){return Math.max(0,parseFloatWithUnits(v))}return node.hasAttribute("id")&&(stylesheetStyles=Object.assign(stylesheetStyles,stylesheets["#"+node.getAttribute("id")])),addStyle("fill","fill"),addStyle("fill-opacity","fillOpacity",clamp),addStyle("opacity","opacity",clamp),addStyle("stroke","stroke"),addStyle("stroke-opacity","strokeOpacity",clamp),addStyle("stroke-width","strokeWidth",positive),addStyle("stroke-linejoin","strokeLineJoin"),addStyle("stroke-linecap","strokeLineCap"),addStyle("stroke-miterlimit","strokeMiterLimit",positive),addStyle("visibility","visibility"),style}function getReflection(a,b){return a-(b-a)}function parseFloats(input,flags,stride){if("string"!=typeof input)throw new TypeError("Invalid input: "+typeof input);const RE={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let state=0,seenComma=!0,number="",exponent="";const result=[];function throwSyntaxError(current,i,partial){throw new SyntaxError('Unexpected character "'+current+'" at index '+i+".")}function newNumber(){""!==number&&(""===exponent?result.push(Number(number)):result.push(Number(number)*Math.pow(10,Number(exponent)))),number="",exponent=""}let current;const length=input.length;for(let i=0;i<length;i++)if(current=input[i],Array.isArray(flags)&&flags.includes(result.length%stride)&&RE.FLAGS.test(current))state=1,number=current,newNumber();else{if(0===state){if(RE.WHITESPACE.test(current))continue;if(RE.DIGIT.test(current)||RE.SIGN.test(current)){state=1,number=current;continue}if(RE.POINT.test(current)){state=2,number=current;continue}RE.COMMA.test(current)&&(seenComma&&throwSyntaxError(current,i),seenComma=!0)}if(1===state){if(RE.DIGIT.test(current)){number+=current;continue}if(RE.POINT.test(current)){number+=current,state=2;continue}if(RE.EXP.test(current)){state=3;continue}RE.SIGN.test(current)&&1===number.length&&RE.SIGN.test(number[0])&&throwSyntaxError(current,i)}if(2===state){if(RE.DIGIT.test(current)){number+=current;continue}if(RE.EXP.test(current)){state=3;continue}RE.POINT.test(current)&&"."===number[number.length-1]&&throwSyntaxError(current,i)}if(3===state){if(RE.DIGIT.test(current)){exponent+=current;continue}if(RE.SIGN.test(current)){if(""===exponent){exponent+=current;continue}1===exponent.length&&RE.SIGN.test(exponent)&&throwSyntaxError(current,i)}}RE.WHITESPACE.test(current)?(newNumber(),state=0,seenComma=!1):RE.COMMA.test(current)?(newNumber(),state=0,seenComma=!0):RE.SIGN.test(current)?(newNumber(),state=1,number=current):RE.POINT.test(current)?(newNumber(),state=2,number=current):throwSyntaxError(current,i)}return newNumber(),result}const units=["mm","cm","in","pt","pc","px"],unitConversion={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function parseFloatWithUnits(string){let theUnit="px";if("string"==typeof string||string instanceof String)for(let i=0,n=units.length;i<n;i++){const u=units[i];if(string.endsWith(u)){theUnit=u,string=string.substring(0,string.length-u.length);break}}let scale=void 0;return"px"===theUnit&&"px"!==scope.defaultUnit?scale=unitConversion.in[scope.defaultUnit]/scope.defaultDPI:(scale=unitConversion[theUnit][scope.defaultUnit],scale<0&&(scale=unitConversion[theUnit].in*scope.defaultDPI)),scale*parseFloat(string)}function getTransformScaleX(m){const te=m.elements;return Math.sqrt(te[0]*te[0]+te[1]*te[1])}function getTransformScaleY(m){const te=m.elements;return Math.sqrt(te[3]*te[3]+te[4]*te[4])}const paths=[],stylesheets={},transformStack=[],tempTransform0=new three_module.U,tempTransform1=new three_module.U,tempTransform2=new three_module.U,tempTransform3=new three_module.U,tempV2=new three_module.Lb,tempV3=new three_module.Mb,currentTransform=new three_module.U,xml=(new DOMParser).parseFromString(text,"image/svg+xml");!function parseNode(node,style){if(1!==node.nodeType)return;const transform=function getNodeTransform(node){if(!(node.hasAttribute("transform")||"use"===node.nodeName&&(node.hasAttribute("x")||node.hasAttribute("y"))))return null;const transform=function parseNodeTransform(node){const transform=new three_module.U,currentTransform=tempTransform0;if("use"===node.nodeName&&(node.hasAttribute("x")||node.hasAttribute("y"))){const tx=parseFloatWithUnits(node.getAttribute("x")),ty=parseFloatWithUnits(node.getAttribute("y"));transform.translate(tx,ty)}if(node.hasAttribute("transform")){const transformsTexts=node.getAttribute("transform").split(")");for(let tIndex=transformsTexts.length-1;tIndex>=0;tIndex--){const transformText=transformsTexts[tIndex].trim();if(""===transformText)continue;const openParPos=transformText.indexOf("("),closeParPos=transformText.length;if(openParPos>0&&openParPos<closeParPos){const transformType=transformText.substr(0,openParPos),array=parseFloats(transformText.substr(openParPos+1,closeParPos-openParPos-1));switch(currentTransform.identity(),transformType){case"translate":if(array.length>=1){const tx=array[0];let ty=tx;array.length>=2&&(ty=array[1]),currentTransform.translate(tx,ty)}break;case"rotate":if(array.length>=1){let angle=0,cx=0,cy=0;angle=-array[0]*Math.PI/180,array.length>=3&&(cx=array[1],cy=array[2]),tempTransform1.identity().translate(-cx,-cy),tempTransform2.identity().rotate(angle),tempTransform3.multiplyMatrices(tempTransform2,tempTransform1),tempTransform1.identity().translate(cx,cy),currentTransform.multiplyMatrices(tempTransform1,tempTransform3)}break;case"scale":if(array.length>=1){const scaleX=array[0];let scaleY=scaleX;array.length>=2&&(scaleY=array[1]),currentTransform.scale(scaleX,scaleY)}break;case"skewX":1===array.length&&currentTransform.set(1,Math.tan(array[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===array.length&&currentTransform.set(1,0,0,Math.tan(array[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===array.length&&currentTransform.set(array[0],array[2],array[4],array[1],array[3],array[5],0,0,1)}}transform.premultiply(currentTransform)}}return transform}(node);transformStack.length>0&&transform.premultiply(transformStack[transformStack.length-1]);return currentTransform.copy(transform),transformStack.push(transform),transform}(node);let traverseChildNodes=!0,path=null;switch(node.nodeName){case"svg":break;case"style":!function parseCSSStylesheet(node){if(!node.sheet||!node.sheet.cssRules||!node.sheet.cssRules.length)return;for(let i=0;i<node.sheet.cssRules.length;i++){const stylesheet=node.sheet.cssRules[i];if(1!==stylesheet.type)continue;const selectorList=stylesheet.selectorText.split(/,/gm).filter(Boolean).map(i=>i.trim());for(let j=0;j<selectorList.length;j++)stylesheets[selectorList[j]]=Object.assign(stylesheets[selectorList[j]]||{},stylesheet.style)}}(node);break;case"g":style=parseStyle(node,style);break;case"path":style=parseStyle(node,style),node.hasAttribute("d")&&(path=function parsePathNode(node){const path=new three_module.zb,point=new three_module.Lb,control=new three_module.Lb,firstPoint=new three_module.Lb;let isFirstPoint=!0,doSetFirstPoint=!1;const commands=node.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let i=0,l=commands.length;i<l;i++){const command=commands[i],type=command.charAt(0),data=command.substr(1).trim();let numbers;switch(!0===isFirstPoint&&(doSetFirstPoint=!0,isFirstPoint=!1),type){case"M":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=2)point.x=numbers[j+0],point.y=numbers[j+1],control.x=point.x,control.y=point.y,0===j?path.moveTo(point.x,point.y):path.lineTo(point.x,point.y),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"H":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j++)point.x=numbers[j],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"V":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j++)point.y=numbers[j],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"L":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=2)point.x=numbers[j+0],point.y=numbers[j+1],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"C":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=6)path.bezierCurveTo(numbers[j+0],numbers[j+1],numbers[j+2],numbers[j+3],numbers[j+4],numbers[j+5]),control.x=numbers[j+2],control.y=numbers[j+3],point.x=numbers[j+4],point.y=numbers[j+5],0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"S":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=4)path.bezierCurveTo(getReflection(point.x,control.x),getReflection(point.y,control.y),numbers[j+0],numbers[j+1],numbers[j+2],numbers[j+3]),control.x=numbers[j+0],control.y=numbers[j+1],point.x=numbers[j+2],point.y=numbers[j+3],0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"Q":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=4)path.quadraticCurveTo(numbers[j+0],numbers[j+1],numbers[j+2],numbers[j+3]),control.x=numbers[j+0],control.y=numbers[j+1],point.x=numbers[j+2],point.y=numbers[j+3],0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"T":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=2){const rx=getReflection(point.x,control.x),ry=getReflection(point.y,control.y);path.quadraticCurveTo(rx,ry,numbers[j+0],numbers[j+1]),control.x=rx,control.y=ry,point.x=numbers[j+0],point.y=numbers[j+1],0===j&&!0===doSetFirstPoint&&firstPoint.copy(point)}break;case"A":numbers=parseFloats(data,[3,4],7);for(let j=0,jl=numbers.length;j<jl;j+=7){if(numbers[j+5]==point.x&&numbers[j+6]==point.y)continue;const start=point.clone();point.x=numbers[j+5],point.y=numbers[j+6],control.x=point.x,control.y=point.y,parseArcCommand(path,numbers[j],numbers[j+1],numbers[j+2],numbers[j+3],numbers[j+4],start,point),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point)}break;case"m":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=2)point.x+=numbers[j+0],point.y+=numbers[j+1],control.x=point.x,control.y=point.y,0===j?path.moveTo(point.x,point.y):path.lineTo(point.x,point.y),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"h":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j++)point.x+=numbers[j],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"v":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j++)point.y+=numbers[j],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"l":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=2)point.x+=numbers[j+0],point.y+=numbers[j+1],control.x=point.x,control.y=point.y,path.lineTo(point.x,point.y),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"c":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=6)path.bezierCurveTo(point.x+numbers[j+0],point.y+numbers[j+1],point.x+numbers[j+2],point.y+numbers[j+3],point.x+numbers[j+4],point.y+numbers[j+5]),control.x=point.x+numbers[j+2],control.y=point.y+numbers[j+3],point.x+=numbers[j+4],point.y+=numbers[j+5],0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"s":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=4)path.bezierCurveTo(getReflection(point.x,control.x),getReflection(point.y,control.y),point.x+numbers[j+0],point.y+numbers[j+1],point.x+numbers[j+2],point.y+numbers[j+3]),control.x=point.x+numbers[j+0],control.y=point.y+numbers[j+1],point.x+=numbers[j+2],point.y+=numbers[j+3],0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"q":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=4)path.quadraticCurveTo(point.x+numbers[j+0],point.y+numbers[j+1],point.x+numbers[j+2],point.y+numbers[j+3]),control.x=point.x+numbers[j+0],control.y=point.y+numbers[j+1],point.x+=numbers[j+2],point.y+=numbers[j+3],0===j&&!0===doSetFirstPoint&&firstPoint.copy(point);break;case"t":numbers=parseFloats(data);for(let j=0,jl=numbers.length;j<jl;j+=2){const rx=getReflection(point.x,control.x),ry=getReflection(point.y,control.y);path.quadraticCurveTo(rx,ry,point.x+numbers[j+0],point.y+numbers[j+1]),control.x=rx,control.y=ry,point.x=point.x+numbers[j+0],point.y=point.y+numbers[j+1],0===j&&!0===doSetFirstPoint&&firstPoint.copy(point)}break;case"a":numbers=parseFloats(data,[3,4],7);for(let j=0,jl=numbers.length;j<jl;j+=7){if(0==numbers[j+5]&&0==numbers[j+6])continue;const start=point.clone();point.x+=numbers[j+5],point.y+=numbers[j+6],control.x=point.x,control.y=point.y,parseArcCommand(path,numbers[j],numbers[j+1],numbers[j+2],numbers[j+3],numbers[j+4],start,point),0===j&&!0===doSetFirstPoint&&firstPoint.copy(point)}break;case"Z":case"z":path.currentPath.autoClose=!0,path.currentPath.curves.length>0&&(point.copy(firstPoint),path.currentPath.currentPoint.copy(point),isFirstPoint=!0);break;default:console.warn(command)}doSetFirstPoint=!1}return path}(node));break;case"rect":style=parseStyle(node,style),path=function parseRectNode(node){const x=parseFloatWithUnits(node.getAttribute("x")||0),y=parseFloatWithUnits(node.getAttribute("y")||0),rx=parseFloatWithUnits(node.getAttribute("rx")||0),ry=parseFloatWithUnits(node.getAttribute("ry")||0),w=parseFloatWithUnits(node.getAttribute("width")),h=parseFloatWithUnits(node.getAttribute("height")),path=new three_module.zb;path.moveTo(x+2*rx,y),path.lineTo(x+w-2*rx,y),(0!==rx||0!==ry)&&path.bezierCurveTo(x+w,y,x+w,y,x+w,y+2*ry);path.lineTo(x+w,y+h-2*ry),(0!==rx||0!==ry)&&path.bezierCurveTo(x+w,y+h,x+w,y+h,x+w-2*rx,y+h);path.lineTo(x+2*rx,y+h),(0!==rx||0!==ry)&&path.bezierCurveTo(x,y+h,x,y+h,x,y+h-2*ry);path.lineTo(x,y+2*ry),(0!==rx||0!==ry)&&path.bezierCurveTo(x,y,x,y,x+2*rx,y);return path}(node);break;case"polygon":style=parseStyle(node,style),path=function parsePolygonNode(node){function iterator(match,a,b){const x=parseFloatWithUnits(a),y=parseFloatWithUnits(b);0===index?path.moveTo(x,y):path.lineTo(x,y),index++}const path=new three_module.zb;let index=0;return node.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,iterator),path.currentPath.autoClose=!0,path}(node);break;case"polyline":style=parseStyle(node,style),path=function parsePolylineNode(node){function iterator(match,a,b){const x=parseFloatWithUnits(a),y=parseFloatWithUnits(b);0===index?path.moveTo(x,y):path.lineTo(x,y),index++}const path=new three_module.zb;let index=0;return node.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,iterator),path.currentPath.autoClose=!1,path}(node);break;case"circle":style=parseStyle(node,style),path=function parseCircleNode(node){const x=parseFloatWithUnits(node.getAttribute("cx")||0),y=parseFloatWithUnits(node.getAttribute("cy")||0),r=parseFloatWithUnits(node.getAttribute("r")||0),subpath=new three_module.hb;subpath.absarc(x,y,r,0,2*Math.PI,!0);const path=new three_module.zb;return path.subPaths.push(subpath),path}(node);break;case"ellipse":style=parseStyle(node,style),path=function parseEllipseNode(node){const x=parseFloatWithUnits(node.getAttribute("cx")||0),y=parseFloatWithUnits(node.getAttribute("cy")||0),rx=parseFloatWithUnits(node.getAttribute("rx")||0),ry=parseFloatWithUnits(node.getAttribute("ry")||0),subpath=new three_module.hb;subpath.absellipse(x,y,rx,ry,0,2*Math.PI,!0,0);const path=new three_module.zb;return path.subPaths.push(subpath),path}(node);break;case"line":style=parseStyle(node,style),path=function parseLineNode(node){const x1=parseFloatWithUnits(node.getAttribute("x1")||0),y1=parseFloatWithUnits(node.getAttribute("y1")||0),x2=parseFloatWithUnits(node.getAttribute("x2")||0),y2=parseFloatWithUnits(node.getAttribute("y2")||0),path=new three_module.zb;return path.moveTo(x1,y1),path.lineTo(x2,y2),path.currentPath.autoClose=!1,path}(node);break;case"defs":traverseChildNodes=!1,function parseDefs(node){scope.defs||(scope.defs=[]);const nodes=node.childNodes;for(const node of nodes){const stops=node.childNodes;for(const stop of stops)if(stop.hasAttribute&&stop.hasAttribute("stop-color")){scope.defs[node.id]=stop.getAttribute("stop-color");break}}}(node);break;case"use":style=parseStyle(node,style);const usedNodeId=node.href.baseVal.substring(1),usedNode=node.viewportElement.getElementById(usedNodeId);usedNode?parseNode(usedNode,style):console.warn("SVGLoader: 'use node' references non-existent node id: "+usedNodeId)}if(path&&(void 0!==style.fill&&"none"!==style.fill&&path.color.setStyle(style.fill),function transformPath(path,m){function transfVec2(v2){tempV3.set(v2.x,v2.y,1).applyMatrix3(m),v2.set(tempV3.x,tempV3.y)}const isRotated=function isTransformRotated(m){return 0!==m.elements[1]||0!==m.elements[3]}(m),subPaths=path.subPaths;for(let i=0,n=subPaths.length;i<n;i++){const curves=subPaths[i].curves;for(let j=0;j<curves.length;j++){const curve=curves[j];curve.isLineCurve?(transfVec2(curve.v1),transfVec2(curve.v2)):curve.isCubicBezierCurve?(transfVec2(curve.v0),transfVec2(curve.v1),transfVec2(curve.v2),transfVec2(curve.v3)):curve.isQuadraticBezierCurve?(transfVec2(curve.v0),transfVec2(curve.v1),transfVec2(curve.v2)):curve.isEllipseCurve&&(isRotated&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),tempV2.set(curve.aX,curve.aY),transfVec2(tempV2),curve.aX=tempV2.x,curve.aY=tempV2.y,curve.xRadius*=getTransformScaleX(m),curve.yRadius*=getTransformScaleY(m))}}}(path,currentTransform),paths.push(path),path.userData={node:node,style:style}),traverseChildNodes){const nodes=node.childNodes;for(let i=0;i<nodes.length;i++)parseNode(nodes[i],style)}transform&&(transformStack.pop(),transformStack.length>0?currentTransform.copy(transformStack[transformStack.length-1]):currentTransform.identity())}(xml.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:paths,xml:xml.documentElement}}static createShapes(shapePath){const IntersectionLocationType_ORIGIN=0,IntersectionLocationType_DESTINATION=1,IntersectionLocationType_BETWEEN=2,IntersectionLocationType_LEFT=3,IntersectionLocationType_RIGHT=4,IntersectionLocationType_BEHIND=5,IntersectionLocationType_BEYOND=6,classifyResult={loc:IntersectionLocationType_ORIGIN,t:0};function findEdgeIntersection(a0,a1,b0,b1){const x1=a0.x,x2=a1.x,x3=b0.x,x4=b1.x,y1=a0.y,y2=a1.y,y3=b0.y,y4=b1.y,nom1=(x4-x3)*(y1-y3)-(y4-y3)*(x1-x3),denom=(y4-y3)*(x2-x1)-(x4-x3)*(y2-y1),t1=nom1/denom,t2=((x2-x1)*(y1-y3)-(y2-y1)*(x1-x3))/denom;if(0===denom&&0!==nom1||t1<=0||t1>=1||t2<0||t2>1)return null;if(0===nom1&&0===denom){for(let i=0;i<2;i++){if(classifyPoint(0===i?b0:b1,a0,a1),classifyResult.loc==IntersectionLocationType_ORIGIN){const point=0===i?b0:b1;return{x:point.x,y:point.y,t:classifyResult.t}}if(classifyResult.loc==IntersectionLocationType_BETWEEN){return{x:+(x1+classifyResult.t*(x2-x1)).toPrecision(10),y:+(y1+classifyResult.t*(y2-y1)).toPrecision(10),t:classifyResult.t}}}return null}for(let i=0;i<2;i++)if(classifyPoint(0===i?b0:b1,a0,a1),classifyResult.loc==IntersectionLocationType_ORIGIN){const point=0===i?b0:b1;return{x:point.x,y:point.y,t:classifyResult.t}}return{x:+(x1+t1*(x2-x1)).toPrecision(10),y:+(y1+t1*(y2-y1)).toPrecision(10),t:t1}}function classifyPoint(p,edgeStart,edgeEnd){const ax=edgeEnd.x-edgeStart.x,ay=edgeEnd.y-edgeStart.y,bx=p.x-edgeStart.x,by=p.y-edgeStart.y,sa=ax*by-bx*ay;if(p.x===edgeStart.x&&p.y===edgeStart.y)return classifyResult.loc=IntersectionLocationType_ORIGIN,void(classifyResult.t=0);if(p.x===edgeEnd.x&&p.y===edgeEnd.y)return classifyResult.loc=IntersectionLocationType_DESTINATION,void(classifyResult.t=1);if(sa<-Number.EPSILON)return void(classifyResult.loc=IntersectionLocationType_LEFT);if(sa>Number.EPSILON)return void(classifyResult.loc=IntersectionLocationType_RIGHT);if(ax*bx<0||ay*by<0)return void(classifyResult.loc=IntersectionLocationType_BEHIND);if(Math.sqrt(ax*ax+ay*ay)<Math.sqrt(bx*bx+by*by))return void(classifyResult.loc=IntersectionLocationType_BEYOND);let t;t=0!==ax?bx/ax:by/ay,classifyResult.loc=IntersectionLocationType_BETWEEN,classifyResult.t=t}function getScanlineIntersections(scanline,boundingBox,paths){const center=new three_module.Lb;boundingBox.getCenter(center);const allIntersections=[];return paths.forEach(path=>{if(path.boundingBox.containsPoint(center)){(function getIntersections(path1,path2){const intersectionsRaw=[],intersections=[];for(let index=1;index<path1.length;index++){const path1EdgeStart=path1[index-1],path1EdgeEnd=path1[index];for(let index2=1;index2<path2.length;index2++){const intersection=findEdgeIntersection(path1EdgeStart,path1EdgeEnd,path2[index2-1],path2[index2]);null!==intersection&&void 0===intersectionsRaw.find(i=>i.t<=intersection.t+Number.EPSILON&&i.t>=intersection.t-Number.EPSILON)&&(intersectionsRaw.push(intersection),intersections.push(new three_module.Lb(intersection.x,intersection.y)))}}return intersections})(scanline,path.points).forEach(p=>{allIntersections.push({identifier:path.identifier,isCW:path.isCW,point:p})})}}),allIntersections.sort((i1,i2)=>i1.point.x-i2.point.x),allIntersections}let identifier=0,scanlineMinX=999999999,scanlineMaxX=-999999999,simplePaths=shapePath.subPaths.map(p=>{const points=p.getPoints();let maxY=-999999999,minY=999999999,maxX=-999999999,minX=999999999;for(let i=0;i<points.length;i++){const p=points[i];p.y>maxY&&(maxY=p.y),p.y<minY&&(minY=p.y),p.x>maxX&&(maxX=p.x),p.x<minX&&(minX=p.x)}return scanlineMaxX<=maxX&&(scanlineMaxX=maxX+1),scanlineMinX>=minX&&(scanlineMinX=minX-1),{points:points,isCW:three_module.Ab.isClockWise(points),identifier:identifier++,boundingBox:new three_module.f(new three_module.Lb(minX,minY),new three_module.Lb(maxX,maxY))}});simplePaths=simplePaths.filter(sp=>sp.points.length>0);const isAHole=simplePaths.map(p=>function isHoleTo(simplePath,allPaths,scanlineMinX,scanlineMaxX,_fillRule){null!=_fillRule&&""!==_fillRule||(_fillRule="nonzero");const centerBoundingBox=new three_module.Lb;simplePath.boundingBox.getCenter(centerBoundingBox);const scanlineIntersections=getScanlineIntersections([new three_module.Lb(scanlineMinX,centerBoundingBox.y),new three_module.Lb(scanlineMaxX,centerBoundingBox.y)],simplePath.boundingBox,allPaths);scanlineIntersections.sort((i1,i2)=>i1.point.x-i2.point.x);const baseIntersections=[],otherIntersections=[];scanlineIntersections.forEach(i=>{i.identifier===simplePath.identifier?baseIntersections.push(i):otherIntersections.push(i)});const firstXOfPath=baseIntersections[0].point.x,stack=[];let i=0;for(;i<otherIntersections.length&&otherIntersections[i].point.x<firstXOfPath;)stack.length>0&&stack[stack.length-1]===otherIntersections[i].identifier?stack.pop():stack.push(otherIntersections[i].identifier),i++;if(stack.push(simplePath.identifier),"evenodd"===_fillRule){const isHole=stack.length%2==0,isHoleFor=stack[stack.length-2];return{identifier:simplePath.identifier,isHole:isHole,for:isHoleFor}}if("nonzero"===_fillRule){let isHole=!0,isHoleFor=null,lastCWValue=null;for(let i=0;i<stack.length;i++){const identifier=stack[i];isHole?(lastCWValue=allPaths[identifier].isCW,isHole=!1,isHoleFor=identifier):lastCWValue!==allPaths[identifier].isCW&&(lastCWValue=allPaths[identifier].isCW,isHole=!0)}return{identifier:simplePath.identifier,isHole:isHole,for:isHoleFor}}console.warn('fill-rule: "'+_fillRule+'" is currently not implemented.')}(p,simplePaths,scanlineMinX,scanlineMaxX,shapePath.userData.style.fillRule)),shapesToReturn=[];return simplePaths.forEach(p=>{if(!isAHole[p.identifier].isHole){const shape=new three_module.xb(p.points);isAHole.filter(h=>h.isHole&&h.for===p.identifier).forEach(h=>{const path=simplePaths[h.identifier];shape.holes.push(new three_module.hb(path.points))}),shapesToReturn.push(shape)}}),shapesToReturn}static getStrokeStyle(width,color,lineJoin,lineCap,miterLimit){return{strokeColor:color=void 0!==color?color:"#000",strokeWidth:width=void 0!==width?width:1,strokeLineJoin:lineJoin=void 0!==lineJoin?lineJoin:"miter",strokeLineCap:lineCap=void 0!==lineCap?lineCap:"butt",strokeMiterLimit:miterLimit=void 0!==miterLimit?miterLimit:4}}static pointsToStroke(points,style,arcDivisions,minDistance){const vertices=[],normals=[],uvs=[];if(0===SVGLoader_SVGLoader.pointsToStrokeWithBuffers(points,style,arcDivisions,minDistance,vertices,normals,uvs))return null;const geometry=new three_module.j;return geometry.setAttribute("position",new three_module.u(vertices,3)),geometry.setAttribute("normal",new three_module.u(normals,3)),geometry.setAttribute("uv",new three_module.u(uvs,2)),geometry}static pointsToStrokeWithBuffers(points,style,arcDivisions,minDistance,vertices,normals,uvs,vertexOffset){const tempV2_1=new three_module.Lb,tempV2_2=new three_module.Lb,tempV2_3=new three_module.Lb,tempV2_4=new three_module.Lb,tempV2_5=new three_module.Lb,tempV2_6=new three_module.Lb,tempV2_7=new three_module.Lb,lastPointL=new three_module.Lb,lastPointR=new three_module.Lb,point0L=new three_module.Lb,point0R=new three_module.Lb,currentPointL=new three_module.Lb,currentPointR=new three_module.Lb,nextPointL=new three_module.Lb,nextPointR=new three_module.Lb,innerPoint=new three_module.Lb,outerPoint=new three_module.Lb;arcDivisions=void 0!==arcDivisions?arcDivisions:12,minDistance=void 0!==minDistance?minDistance:.001,vertexOffset=void 0!==vertexOffset?vertexOffset:0;const numPoints=(points=function removeDuplicatedPoints(points){let dupPoints=!1;for(let i=1,n=points.length-1;i<n;i++)if(points[i].distanceTo(points[i+1])<minDistance){dupPoints=!0;break}if(!dupPoints)return points;const newPoints=[];newPoints.push(points[0]);for(let i=1,n=points.length-1;i<n;i++)points[i].distanceTo(points[i+1])>=minDistance&&newPoints.push(points[i]);return newPoints.push(points[points.length-1]),newPoints}(points)).length;if(numPoints<2)return 0;const isClosed=points[0].equals(points[numPoints-1]);let currentPoint,nextPoint,previousPoint=points[0];const strokeWidth2=style.strokeWidth/2,deltaU=1/(numPoints-1);let u1,innerSideModified,joinIsOnLeftSide,isMiter,u0=0,initialJoinIsOnLeftSide=!1,numVertices=0,currentCoordinate=3*vertexOffset,currentCoordinateUV=2*vertexOffset;getNormal(points[0],points[1],tempV2_1).multiplyScalar(strokeWidth2),lastPointL.copy(points[0]).sub(tempV2_1),lastPointR.copy(points[0]).add(tempV2_1),point0L.copy(lastPointL),point0R.copy(lastPointR);for(let iPoint=1;iPoint<numPoints;iPoint++){currentPoint=points[iPoint],nextPoint=iPoint===numPoints-1?isClosed?points[1]:void 0:points[iPoint+1];const normal1=tempV2_1;if(getNormal(previousPoint,currentPoint,normal1),tempV2_3.copy(normal1).multiplyScalar(strokeWidth2),currentPointL.copy(currentPoint).sub(tempV2_3),currentPointR.copy(currentPoint).add(tempV2_3),u1=u0+deltaU,innerSideModified=!1,void 0!==nextPoint){getNormal(currentPoint,nextPoint,tempV2_2),tempV2_3.copy(tempV2_2).multiplyScalar(strokeWidth2),nextPointL.copy(currentPoint).sub(tempV2_3),nextPointR.copy(currentPoint).add(tempV2_3),joinIsOnLeftSide=!0,tempV2_3.subVectors(nextPoint,previousPoint),normal1.dot(tempV2_3)<0&&(joinIsOnLeftSide=!1),1===iPoint&&(initialJoinIsOnLeftSide=joinIsOnLeftSide),tempV2_3.subVectors(nextPoint,currentPoint),tempV2_3.normalize();const dot=Math.abs(normal1.dot(tempV2_3));if(0!==dot){const miterSide=strokeWidth2/dot;tempV2_3.multiplyScalar(-miterSide),tempV2_4.subVectors(currentPoint,previousPoint),tempV2_5.copy(tempV2_4).setLength(miterSide).add(tempV2_3),innerPoint.copy(tempV2_5).negate();const miterLength2=tempV2_5.length(),segmentLengthPrev=tempV2_4.length();tempV2_4.divideScalar(segmentLengthPrev),tempV2_6.subVectors(nextPoint,currentPoint);const segmentLengthNext=tempV2_6.length();switch(tempV2_6.divideScalar(segmentLengthNext),tempV2_4.dot(innerPoint)<segmentLengthPrev&&tempV2_6.dot(innerPoint)<segmentLengthNext&&(innerSideModified=!0),outerPoint.copy(tempV2_5).add(currentPoint),innerPoint.add(currentPoint),isMiter=!1,innerSideModified?joinIsOnLeftSide?(nextPointR.copy(innerPoint),currentPointR.copy(innerPoint)):(nextPointL.copy(innerPoint),currentPointL.copy(innerPoint)):makeSegmentTriangles(),style.strokeLineJoin){case"bevel":makeSegmentWithBevelJoin(joinIsOnLeftSide,innerSideModified,u1);break;case"round":createSegmentTrianglesWithMiddleSection(joinIsOnLeftSide,innerSideModified),joinIsOnLeftSide?makeCircularSector(currentPoint,currentPointL,nextPointL,u1,0):makeCircularSector(currentPoint,nextPointR,currentPointR,u1,1);break;case"miter":case"miter-clip":default:const miterFraction=strokeWidth2*style.strokeMiterLimit/miterLength2;if(miterFraction<1){if("miter-clip"!==style.strokeLineJoin){makeSegmentWithBevelJoin(joinIsOnLeftSide,innerSideModified,u1);break}createSegmentTrianglesWithMiddleSection(joinIsOnLeftSide,innerSideModified),joinIsOnLeftSide?(tempV2_6.subVectors(outerPoint,currentPointL).multiplyScalar(miterFraction).add(currentPointL),tempV2_7.subVectors(outerPoint,nextPointL).multiplyScalar(miterFraction).add(nextPointL),addVertex(currentPointL,u1,0),addVertex(tempV2_6,u1,0),addVertex(currentPoint,u1,.5),addVertex(currentPoint,u1,.5),addVertex(tempV2_6,u1,0),addVertex(tempV2_7,u1,0),addVertex(currentPoint,u1,.5),addVertex(tempV2_7,u1,0),addVertex(nextPointL,u1,0)):(tempV2_6.subVectors(outerPoint,currentPointR).multiplyScalar(miterFraction).add(currentPointR),tempV2_7.subVectors(outerPoint,nextPointR).multiplyScalar(miterFraction).add(nextPointR),addVertex(currentPointR,u1,1),addVertex(tempV2_6,u1,1),addVertex(currentPoint,u1,.5),addVertex(currentPoint,u1,.5),addVertex(tempV2_6,u1,1),addVertex(tempV2_7,u1,1),addVertex(currentPoint,u1,.5),addVertex(tempV2_7,u1,1),addVertex(nextPointR,u1,1))}else innerSideModified?(joinIsOnLeftSide?(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(outerPoint,u1,0),addVertex(lastPointR,u0,1),addVertex(outerPoint,u1,0),addVertex(innerPoint,u1,1)):(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(outerPoint,u1,1),addVertex(lastPointL,u0,0),addVertex(innerPoint,u1,0),addVertex(outerPoint,u1,1)),joinIsOnLeftSide?nextPointL.copy(outerPoint):nextPointR.copy(outerPoint)):joinIsOnLeftSide?(addVertex(currentPointL,u1,0),addVertex(outerPoint,u1,0),addVertex(currentPoint,u1,.5),addVertex(currentPoint,u1,.5),addVertex(outerPoint,u1,0),addVertex(nextPointL,u1,0)):(addVertex(currentPointR,u1,1),addVertex(outerPoint,u1,1),addVertex(currentPoint,u1,.5),addVertex(currentPoint,u1,.5),addVertex(outerPoint,u1,1),addVertex(nextPointR,u1,1)),isMiter=!0}}else makeSegmentTriangles()}else makeSegmentTriangles();isClosed||iPoint!==numPoints-1||addCapGeometry(points[0],point0L,point0R,joinIsOnLeftSide,!0,u0),u0=u1,previousPoint=currentPoint,lastPointL.copy(nextPointL),lastPointR.copy(nextPointR)}if(isClosed){if(innerSideModified&&vertices){let lastOuter=outerPoint,lastInner=innerPoint;initialJoinIsOnLeftSide!==joinIsOnLeftSide&&(lastOuter=innerPoint,lastInner=outerPoint),joinIsOnLeftSide?(isMiter||initialJoinIsOnLeftSide)&&(lastInner.toArray(vertices,0),lastInner.toArray(vertices,9),isMiter&&lastOuter.toArray(vertices,3)):!isMiter&&initialJoinIsOnLeftSide||(lastInner.toArray(vertices,3),lastInner.toArray(vertices,9),isMiter&&lastOuter.toArray(vertices,0))}}else addCapGeometry(currentPoint,currentPointL,currentPointR,joinIsOnLeftSide,!1,u1);return numVertices;function getNormal(p1,p2,result){return result.subVectors(p2,p1),result.set(-result.y,result.x).normalize()}function addVertex(position,u,v){vertices&&(vertices[currentCoordinate]=position.x,vertices[currentCoordinate+1]=position.y,vertices[currentCoordinate+2]=0,normals&&(normals[currentCoordinate]=0,normals[currentCoordinate+1]=0,normals[currentCoordinate+2]=1),currentCoordinate+=3,uvs&&(uvs[currentCoordinateUV]=u,uvs[currentCoordinateUV+1]=v,currentCoordinateUV+=2)),numVertices+=3}function makeCircularSector(center,p1,p2,u,v){tempV2_1.copy(p1).sub(center).normalize(),tempV2_2.copy(p2).sub(center).normalize();let angle=Math.PI;const dot=tempV2_1.dot(tempV2_2);Math.abs(dot)<1&&(angle=Math.abs(Math.acos(dot))),angle/=arcDivisions,tempV2_3.copy(p1);for(let i=0,il=arcDivisions-1;i<il;i++)tempV2_4.copy(tempV2_3).rotateAround(center,angle),addVertex(tempV2_3,u,v),addVertex(tempV2_4,u,v),addVertex(center,u,.5),tempV2_3.copy(tempV2_4);addVertex(tempV2_4,u,v),addVertex(p2,u,v),addVertex(center,u,.5)}function makeSegmentTriangles(){addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(currentPointL,u1,0),addVertex(lastPointR,u0,1),addVertex(currentPointL,u1,1),addVertex(currentPointR,u1,0)}function makeSegmentWithBevelJoin(joinIsOnLeftSide,innerSideModified,u){innerSideModified?joinIsOnLeftSide?(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(currentPointL,u1,0),addVertex(lastPointR,u0,1),addVertex(currentPointL,u1,0),addVertex(innerPoint,u1,1),addVertex(currentPointL,u,0),addVertex(nextPointL,u,0),addVertex(innerPoint,u,.5)):(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(currentPointR,u1,1),addVertex(lastPointL,u0,0),addVertex(innerPoint,u1,0),addVertex(currentPointR,u1,1),addVertex(currentPointR,u,1),addVertex(nextPointR,u,0),addVertex(innerPoint,u,.5)):joinIsOnLeftSide?(addVertex(currentPointL,u,0),addVertex(nextPointL,u,0),addVertex(currentPoint,u,.5)):(addVertex(currentPointR,u,1),addVertex(nextPointR,u,0),addVertex(currentPoint,u,.5))}function createSegmentTrianglesWithMiddleSection(joinIsOnLeftSide,innerSideModified){innerSideModified&&(joinIsOnLeftSide?(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(currentPointL,u1,0),addVertex(lastPointR,u0,1),addVertex(currentPointL,u1,0),addVertex(innerPoint,u1,1),addVertex(currentPointL,u0,0),addVertex(currentPoint,u1,.5),addVertex(innerPoint,u1,1),addVertex(currentPoint,u1,.5),addVertex(nextPointL,u0,0),addVertex(innerPoint,u1,1)):(addVertex(lastPointR,u0,1),addVertex(lastPointL,u0,0),addVertex(currentPointR,u1,1),addVertex(lastPointL,u0,0),addVertex(innerPoint,u1,0),addVertex(currentPointR,u1,1),addVertex(currentPointR,u0,1),addVertex(innerPoint,u1,0),addVertex(currentPoint,u1,.5),addVertex(currentPoint,u1,.5),addVertex(innerPoint,u1,0),addVertex(nextPointR,u0,1)))}function addCapGeometry(center,p1,p2,joinIsOnLeftSide,start,u){switch(style.strokeLineCap){case"round":start?makeCircularSector(center,p2,p1,u,.5):makeCircularSector(center,p1,p2,u,.5);break;case"square":if(start)tempV2_1.subVectors(p1,center),tempV2_2.set(tempV2_1.y,-tempV2_1.x),tempV2_3.addVectors(tempV2_1,tempV2_2).add(center),tempV2_4.subVectors(tempV2_2,tempV2_1).add(center),joinIsOnLeftSide?(tempV2_3.toArray(vertices,3),tempV2_4.toArray(vertices,0),tempV2_4.toArray(vertices,9)):(tempV2_3.toArray(vertices,3),tempV2_3.toArray(vertices,9),tempV2_4.toArray(vertices,0));else{tempV2_1.subVectors(p2,center),tempV2_2.set(tempV2_1.y,-tempV2_1.x),tempV2_3.addVectors(tempV2_1,tempV2_2).add(center),tempV2_4.subVectors(tempV2_2,tempV2_1).add(center);const vl=vertices.length;joinIsOnLeftSide?(tempV2_3.toArray(vertices,vl-3),tempV2_4.toArray(vertices,vl-6),tempV2_4.toArray(vertices,vl-12)):(tempV2_3.toArray(vertices,vl-6),tempV2_4.toArray(vertices,vl-3),tempV2_4.toArray(vertices,vl-12))}}}}}let svg_loader_service_SvgLoaderService=class SvgLoaderService extends abstract_cache_service.a{getValue(key){return new Promise((resolve,reject)=>{(new SVGLoader_SVGLoader).load(key,data=>{resolve(data.paths)},void 0,reject)})}};svg_loader_service_SvgLoaderService=Object(tslib_es6.b)([Object(core.Injectable)()],svg_loader_service_SvgLoaderService);let AbstractAssetService=class AbstractAssetService{constructor(){this.providers=new Map,this.init()}registerProvider(key,source){this.providers.set(key,source)}setDefaultProvider(key){this.defaultProvider=key}getSource(icon){if(icon){if(icon.indexOf(":")>0){const args=icon.split(":");return this.getSourceByNamespace(args[0],args[1])}return this.getSourceByNamespace(this.defaultProvider,icon)}return this.defaultIfNotFound(icon)}getSourceByNamespace(namespace,icon){const provider=this.providers.get(namespace);if(!provider)return console.warn("Icon provider not found",provider),this.defaultIfNotFound(icon);const finalUrl=provider.url.replace("?",icon);return this.getFinalResult(finalUrl,provider)}};AbstractAssetService=Object(tslib_es6.b)([Object(core.Injectable)(),Object(tslib_es6.c)("design:paramtypes",[])],AbstractAssetService);let icon_service_IconService=class IconService extends AbstractAssetService{constructor(){super(...arguments),this.defaultProvider="md"}init(){this.registerProvider("md",{url:"https://raw.githubusercontent.com/material-icons/material-icons/master/svg/?/baseline.svg",allowColorOverride:!0,isCCW:!1,noHoles:!1}),this.registerProvider("a",{url:"assets/svg/?.svg",allowColorOverride:!0,isCCW:!1,noHoles:!1}),this.registerProvider("az",{url:"https://raw.githubusercontent.com/makimenko/files/master/azure-icons/?.svg",allowColorOverride:!1,isCCW:!1,noHoles:!1}),this.registerProvider("g",{url:"https://raw.githubusercontent.com/makimenko/files/master/google-cloud-icons/?.svg",allowColorOverride:!0,isCCW:!1,noHoles:!1}),this.registerProvider("aws",{url:"https://raw.githubusercontent.com/makimenko/files/master/aws-icons/?.svg",allowColorOverride:!1,isCCW:!1,noHoles:!0})}defaultIfNotFound(icon){return{url:icon,allowColorOverride:!0,isCCW:!1,noHoles:!1}}getFinalResult(finalUrl,provider){return{url:finalUrl,allowColorOverride:provider.allowColorOverride,isCCW:provider.isCCW,noHoles:provider.noHoles}}};icon_service_IconService=Object(tslib_es6.b)([Object(core.Injectable)()],icon_service_IconService);var obj_loader_service=__webpack_require__(316);let model_service_ModelService=class ModelService extends AbstractAssetService{constructor(){super(...arguments),this.defaultProvider="3d"}init(){this.registerProvider("3d",{url:"https://raw.githubusercontent.com/makimenko/files/master/actor-models/?.obj"})}defaultIfNotFound(icon){return{url:icon}}getFinalResult(finalUrl,provider){return{url:finalUrl}}};model_service_ModelService=Object(tslib_es6.b)([Object(core.Injectable)()],model_service_ModelService)},233:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return performanceSceneWrapper}));const performanceSceneWrapper=content=>`\n<atft-orbit-controls style="height:100%" rotateSpeed=1 zoomSpeed=1.2>\n  <atft-renderer-canvas>\n      <atft-perspective-camera [zAxisUp]="true" positionX=50 [positionY]=-20 [positionZ]=50></atft-perspective-camera>\n      <atft-scene atft-stats-auto-show>\n          <atft-point-light [intensity]="0.5" [distance]="100" [translateX]=90 [translateY]=90\n                            [translateZ]=90></atft-point-light>\n          <atft-point-light [intensity]="0.8" [distance]="1000" [translateX]="-60" [translateY]="-60"\n                            [translateZ]="50"></atft-point-light>\n          ${content}\n      </atft-scene>\n  </atft-renderer-canvas>\n</atft-orbit-controls>\n`},250:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractLazyObject3D}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10),three__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2);let AbstractLazyObject3D=class AbstractLazyObject3D extends _abstract_object_3d__WEBPACK_IMPORTED_MODULE_2__.a{constructor(){super(...arguments),this.parentInitialized=!1}afterInit(){super.afterInit(),this.parentInitialized=!0,this.startLoading()}startLoading(){this.loadLazyObject().then(obj=>{this.lazyObject&&super.getObject().remove(this.lazyObject),this.lazyObject=obj,super.getObject().add(obj),this.rendererService.render(),setTimeout(()=>{this.rendererService.render()},10)}).catch(err=>{console.error(err)})}ngOnDestroy(){this.lazyObject&&super.getObject().remove(this.lazyObject)}newObject3DInstance(){return new three__WEBPACK_IMPORTED_MODULE_3__.db}};AbstractLazyObject3D=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Directive)()],AbstractLazyObject3D)},251:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ContentProjectionComponent}));var ContentProjectionComponent_1,_a,_b,_c,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_helper_empty_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(224),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(12);let ContentProjectionComponent=ContentProjectionComponent_1=class ContentProjectionComponent extends _helper_empty_component__WEBPACK_IMPORTED_MODULE_2__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent}addChild(object){this.contentProjection?this.contentProjection.addChild(object):console.error('ContentProjectionComponent error: #contentProjection name not found! Embedded child object in "ng-content" can not be attached to parentScene object')}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.ViewChild)("contentProjection"),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type","function"==typeof(_a=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_3__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object)],ContentProjectionComponent.prototype,"contentProjection",void 0),ContentProjectionComponent=ContentProjectionComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-content-projection",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_5__.c)(ContentProjectionComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_b=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_4__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_4__.a)?_b:Object,"function"==typeof(_c=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_3__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_3__.a)?_c:Object])],ContentProjectionComponent)},257:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractCacheService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);class AbstractCacheService{constructor(){this.cache=new Map}load(key){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){const cacheHit=this.cache.get(key);if(cacheHit)return cacheHit;{const cacheMiss=this.getValue(key);return this.cache.set(key,cacheMiss),cacheMiss}}))}}},302:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftObjectModule}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_connector_atft_connector_module__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(303),_helper_atft_helper_module__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(305),_light_atft_light_module__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(308),_loader_atft_loader_module__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(313),_mesh_atft_mesh_module__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(320),_text_atft_text_module__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(328),_angular_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9),_scene_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(330),_content_projection_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(251),_loader__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(201);let AtftObjectModule=class AtftObjectModule{};AtftObjectModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({imports:[_angular_common__WEBPACK_IMPORTED_MODULE_8__.b,_connector_atft_connector_module__WEBPACK_IMPORTED_MODULE_2__.a,_helper_atft_helper_module__WEBPACK_IMPORTED_MODULE_3__.a,_light_atft_light_module__WEBPACK_IMPORTED_MODULE_4__.a,_loader_atft_loader_module__WEBPACK_IMPORTED_MODULE_5__.a,_mesh_atft_mesh_module__WEBPACK_IMPORTED_MODULE_6__.a,_text_atft_text_module__WEBPACK_IMPORTED_MODULE_7__.a],declarations:[_scene_component__WEBPACK_IMPORTED_MODULE_9__.a,_content_projection_component__WEBPACK_IMPORTED_MODULE_10__.a],exports:[_scene_component__WEBPACK_IMPORTED_MODULE_9__.a,_connector_atft_connector_module__WEBPACK_IMPORTED_MODULE_2__.a,_helper_atft_helper_module__WEBPACK_IMPORTED_MODULE_3__.a,_light_atft_light_module__WEBPACK_IMPORTED_MODULE_4__.a,_loader_atft_loader_module__WEBPACK_IMPORTED_MODULE_5__.a,_mesh_atft_mesh_module__WEBPACK_IMPORTED_MODULE_6__.a,_text_atft_text_module__WEBPACK_IMPORTED_MODULE_7__.a],providers:[_loader__WEBPACK_IMPORTED_MODULE_11__.a,_loader__WEBPACK_IMPORTED_MODULE_11__.e,_loader__WEBPACK_IMPORTED_MODULE_11__.b,_loader__WEBPACK_IMPORTED_MODULE_11__.d,_loader__WEBPACK_IMPORTED_MODULE_11__.c]})],AtftObjectModule)},303:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftConnectorModule}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_line_connector_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(335);let AtftConnectorModule=class AtftConnectorModule{};AtftConnectorModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[_line_connector_component__WEBPACK_IMPORTED_MODULE_3__.a],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.b],exports:[_line_connector_component__WEBPACK_IMPORTED_MODULE_3__.a]})],AtftConnectorModule)},304:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftAnimationModule}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_animation_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(50);let AtftAnimationModule=class AtftAnimationModule{};AtftAnimationModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({providers:[_animation_service__WEBPACK_IMPORTED_MODULE_2__.a]})],AtftAnimationModule)},305:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftHelperModule}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_axes_helper_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(306),_empty_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(224),_grid_helper_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(307);let AtftHelperModule=class AtftHelperModule{};AtftHelperModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[_axes_helper_component__WEBPACK_IMPORTED_MODULE_3__.a,_empty_component__WEBPACK_IMPORTED_MODULE_4__.a,_grid_helper_component__WEBPACK_IMPORTED_MODULE_5__.a],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.b],exports:[_axes_helper_component__WEBPACK_IMPORTED_MODULE_3__.a,_empty_component__WEBPACK_IMPORTED_MODULE_4__.a,_grid_helper_component__WEBPACK_IMPORTED_MODULE_5__.a]})],AtftHelperModule)},306:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AxesHelperComponent}));var AxesHelperComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10);let AxesHelperComponent=AxesHelperComponent_1=class AxesHelperComponent extends _abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.size=50}newObject3DInstance(){return new three__WEBPACK_IMPORTED_MODULE_2__.e(this.size)}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AxesHelperComponent.prototype,"size",void 0),AxesHelperComponent=AxesHelperComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-axes-helper",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(AxesHelperComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],AxesHelperComponent)},307:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GridHelperComponent}));var GridHelperComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10);let GridHelperComponent=GridHelperComponent_1=class GridHelperComponent extends _abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent}newObject3DInstance(){return new three__WEBPACK_IMPORTED_MODULE_2__.y(this.size,this.divisions)}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],GridHelperComponent.prototype,"size",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],GridHelperComponent.prototype,"divisions",void 0),GridHelperComponent=GridHelperComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-grid-helper",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(GridHelperComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],GridHelperComponent)},308:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftLightModule}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_point_light_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(309),_hemisphere_light_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(310),_directional_light_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(311),_ambient_light_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(312);let AtftLightModule=class AtftLightModule{};AtftLightModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[_directional_light_component__WEBPACK_IMPORTED_MODULE_5__.a,_hemisphere_light_component__WEBPACK_IMPORTED_MODULE_4__.a,_point_light_component__WEBPACK_IMPORTED_MODULE_3__.a,_ambient_light_component__WEBPACK_IMPORTED_MODULE_6__.a],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.b],exports:[_directional_light_component__WEBPACK_IMPORTED_MODULE_5__.a,_hemisphere_light_component__WEBPACK_IMPORTED_MODULE_4__.a,_point_light_component__WEBPACK_IMPORTED_MODULE_3__.a,_ambient_light_component__WEBPACK_IMPORTED_MODULE_6__.a]})],AtftLightModule)},309:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PointLightComponent}));var PointLightComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10);let PointLightComponent=PointLightComponent_1=class PointLightComponent extends _abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.color="#FFFFFF",this.intensity=1,this.distance=500,this.castShadow=!1}newObject3DInstance(){const light=new three__WEBPACK_IMPORTED_MODULE_2__.kb(this.color,this.intensity,this.distance);return!0===this.castShadow&&(light.castShadow=this.castShadow,light.shadow.mapSize.width=1024,light.shadow.mapSize.height=1024,light.shadow.camera.near=.5,light.shadow.camera.far=500,light.shadow.bias=-.001,light.shadow.radius=1),light}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],PointLightComponent.prototype,"color",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],PointLightComponent.prototype,"intensity",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],PointLightComponent.prototype,"distance",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],PointLightComponent.prototype,"castShadow",void 0),PointLightComponent=PointLightComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-point-light",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(PointLightComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],PointLightComponent)},310:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return HemisphereLightComponent}));var HemisphereLightComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10);let HemisphereLightComponent=HemisphereLightComponent_1=class HemisphereLightComponent extends _abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.skyColor="#ffffff",this.groundColor="#444444",this.intensity=1}newObject3DInstance(){return new three__WEBPACK_IMPORTED_MODULE_2__.A(this.skyColor,this.groundColor,this.intensity)}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],HemisphereLightComponent.prototype,"skyColor",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],HemisphereLightComponent.prototype,"groundColor",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],HemisphereLightComponent.prototype,"intensity",void 0),HemisphereLightComponent=HemisphereLightComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-hemisphere-light",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(HemisphereLightComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],HemisphereLightComponent)},311:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DirectionalLightComponent}));var DirectionalLightComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10);let DirectionalLightComponent=DirectionalLightComponent_1=class DirectionalLightComponent extends _abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.color="#FFFFFF",this.intensity=1,this.target=new three__WEBPACK_IMPORTED_MODULE_2__.db,this.castShadow=!0}newObject3DInstance(){const light=new three__WEBPACK_IMPORTED_MODULE_2__.p(this.color,this.intensity);return light.target=this.target,!0===this.castShadow&&(light.castShadow=this.castShadow,light.shadow.camera.top=100,light.shadow.camera.bottom=-100,light.shadow.camera.left=-100,light.shadow.camera.right=100,light.shadow.camera.near=.1,light.shadow.camera.far=500,light.shadow.mapSize.set(1024,1024),light.shadow.bias=-.001),light}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],DirectionalLightComponent.prototype,"color",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],DirectionalLightComponent.prototype,"intensity",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],DirectionalLightComponent.prototype,"target",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],DirectionalLightComponent.prototype,"castShadow",void 0),DirectionalLightComponent=DirectionalLightComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-directional-light",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(DirectionalLightComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],DirectionalLightComponent)},312:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AmbientLightComponent}));var AmbientLightComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10);let AmbientLightComponent=AmbientLightComponent_1=class AmbientLightComponent extends _abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.color="#FFFFFF",this.intensity=.8}newObject3DInstance(){const light=new three__WEBPACK_IMPORTED_MODULE_2__.b(this.color);return light.intensity=this.intensity,light}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AmbientLightComponent.prototype,"color",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AmbientLightComponent.prototype,"intensity",void 0),AmbientLightComponent=AmbientLightComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-ambient-light",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(AmbientLightComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],AmbientLightComponent)},313:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftLoaderModule}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_object_loader_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(314),_obj_loader_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(315),_svg_loader_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(317),_stl_loader_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(319);let AtftLoaderModule=class AtftLoaderModule{};AtftLoaderModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[_obj_loader_component__WEBPACK_IMPORTED_MODULE_4__.a,_object_loader_component__WEBPACK_IMPORTED_MODULE_3__.a,_svg_loader_component__WEBPACK_IMPORTED_MODULE_5__.a,_stl_loader_component__WEBPACK_IMPORTED_MODULE_6__.a],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.b],exports:[_obj_loader_component__WEBPACK_IMPORTED_MODULE_4__.a,_object_loader_component__WEBPACK_IMPORTED_MODULE_3__.a,_svg_loader_component__WEBPACK_IMPORTED_MODULE_5__.a,_stl_loader_component__WEBPACK_IMPORTED_MODULE_6__.a]})],AtftLoaderModule)},314:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ObjectLoaderComponent}));var ObjectLoaderComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_abstract_model_loader__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(146);let ObjectLoaderComponent=ObjectLoaderComponent_1=class ObjectLoaderComponent extends _abstract_model_loader__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.loader=new three__WEBPACK_IMPORTED_MODULE_2__.eb}loadLazyObject(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){return new Promise((resolve,reject)=>{this.loader.load(this.model,model=>{resolve(model)},void 0,reject)})}))}};ObjectLoaderComponent=ObjectLoaderComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-object-loader",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(ObjectLoaderComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],ObjectLoaderComponent)},315:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ObjLoaderComponent}));var ObjLoaderComponent_1,_a,_b,_c,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three_examples_jsm_loaders_MTLLoader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(412),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_abstract_model_loader__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(146),_services_obj_loader_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(316);let ObjLoaderComponent=ObjLoaderComponent_1=class ObjLoaderComponent extends _abstract_model_loader__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent,objLoader){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.objLoader=objLoader,this.mtlLoader=new three_examples_jsm_loaders_MTLLoader__WEBPACK_IMPORTED_MODULE_2__.a}set texturePath(newTexturePath){this.resourcePath=newTexturePath}loadLazyObject(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){if(this.material){const preloadingStep=new Promise((resolve,reject)=>{this.mtlLoader.setResourcePath(this.resourcePath),this.mtlLoader.load(this.material,materialCreator=>{materialCreator.preload(),this.objLoader.setMaterials(materialCreator),resolve()},void 0,reject)});yield preloadingStep}return(yield this.objLoader.load(this.model)).clone()}))}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",String)],ObjLoaderComponent.prototype,"material",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",String),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",[String])],ObjLoaderComponent.prototype,"texturePath",null),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",String)],ObjLoaderComponent.prototype,"resourcePath",void 0),ObjLoaderComponent=ObjLoaderComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-obj-loader",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(ObjLoaderComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object,"function"==typeof(_c=void 0!==_services_obj_loader_service__WEBPACK_IMPORTED_MODULE_7__.a&&_services_obj_loader_service__WEBPACK_IMPORTED_MODULE_7__.a)?_c:Object])],ObjLoaderComponent)},316:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ObjLoaderService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_abstract_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(257),three_examples_jsm_loaders_OBJLoader__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(411);let ObjLoaderService=class ObjLoaderService extends _abstract_cache_service__WEBPACK_IMPORTED_MODULE_2__.a{constructor(){super(...arguments),this.loader=new three_examples_jsm_loaders_OBJLoader__WEBPACK_IMPORTED_MODULE_3__.a}getValue(key){return new Promise((resolve,reject)=>{this.loader.load(key,model=>{resolve(model)},void 0,reject)})}setMaterials(materialCreator){this.loader.setMaterials(materialCreator)}};ObjLoaderService=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)()],ObjLoaderService)},317:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SVGLoaderComponent}));var SVGLoaderComponent_1,_a,_b,_c,_d,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),_abstract_model_loader__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(146),_services__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(232),three__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2);let SVGLoaderComponent=SVGLoaderComponent_1=class SVGLoaderComponent extends _abstract_model_loader__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService,parent,svgLoader,iconService){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.svgLoader=svgLoader,this.iconService=iconService,this._overrideMaterialColor=void 0,this.material="basic",this.depthWrite=!0,this.centered=!0,this.isCCW=!1,this.noHoles=!1}get overrideMaterialColor(){return this._overrideMaterialColor}set overrideMaterialColor(value){this._overrideMaterialColor=value,this.object&&this.startLoading()}set icon(icon){const iconProvider=this.iconService.getSource(icon);this.model=iconProvider.url,this.isCCW=iconProvider.isCCW,this.noHoles=iconProvider.noHoles,iconProvider.allowColorOverride||(this.overrideMaterialColor=void 0)}get icon(){return this.model}loadLazyObject(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){const paths=yield this.svgLoader.load(this.model),group=new three__WEBPACK_IMPORTED_MODULE_7__.z;for(const path of paths){const color=this._overrideMaterialColor?this._overrideMaterialColor:path.color,material=Object(_util__WEBPACK_IMPORTED_MODULE_3__.a)(color,this.material,this.depthWrite),shapes=path.toShapes(this.isCCW,this.noHoles);for(const shape of shapes){const geometry=new three__WEBPACK_IMPORTED_MODULE_7__.yb(shape),mesh=new three__WEBPACK_IMPORTED_MODULE_7__.W(geometry,material);group.add(mesh)}}return(this.maxX||this.maxY)&&Object(_util__WEBPACK_IMPORTED_MODULE_3__.d)(group,new three__WEBPACK_IMPORTED_MODULE_7__.Mb(this.maxX,this.maxY,0)),this.centered&&Object(_util__WEBPACK_IMPORTED_MODULE_3__.b)(group),group}))}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",String),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",[String])],SVGLoaderComponent.prototype,"overrideMaterialColor",null),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",String),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",[String])],SVGLoaderComponent.prototype,"icon",null),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],SVGLoaderComponent.prototype,"material",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],SVGLoaderComponent.prototype,"depthWrite",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],SVGLoaderComponent.prototype,"maxX",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],SVGLoaderComponent.prototype,"maxY",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],SVGLoaderComponent.prototype,"centered",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],SVGLoaderComponent.prototype,"isCCW",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],SVGLoaderComponent.prototype,"noHoles",void 0),SVGLoaderComponent=SVGLoaderComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-svg-loader",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_3__.c)(SVGLoaderComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_4__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_4__.a)?_b:Object,"function"==typeof(_c=void 0!==_services__WEBPACK_IMPORTED_MODULE_6__.e&&_services__WEBPACK_IMPORTED_MODULE_6__.e)?_c:Object,"function"==typeof(_d=void 0!==_services__WEBPACK_IMPORTED_MODULE_6__.b&&_services__WEBPACK_IMPORTED_MODULE_6__.b)?_d:Object])],SVGLoaderComponent)},318:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FontService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_abstract_cache_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(257);let FontService=class FontService extends _abstract_cache_service__WEBPACK_IMPORTED_MODULE_3__.a{getValue(key){return new Promise(resolve=>{(new three__WEBPACK_IMPORTED_MODULE_2__.w).load(key,resolve)})}};FontService=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)()],FontService)},319:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return StlLoaderComponent}));var StlLoaderComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_abstract_model_loader__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(146),three_examples_jsm_loaders_STLLoader__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(413);let StlLoaderComponent=StlLoaderComponent_1=class StlLoaderComponent extends _abstract_model_loader__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.loader=new three_examples_jsm_loaders_STLLoader__WEBPACK_IMPORTED_MODULE_7__.a,this.materialColor="#FFFFFF",this.depthWrite=!0}loadLazyObject(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){return new Promise((resolve,reject)=>{this.loader.load(this.model,geometry=>{const material=Object(_util__WEBPACK_IMPORTED_MODULE_4__.a)(this.materialColor,this.material,this.depthWrite),mesh=new three__WEBPACK_IMPORTED_MODULE_2__.W(geometry,material);resolve(mesh)},void 0,reject)})}))}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",String)],StlLoaderComponent.prototype,"material",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],StlLoaderComponent.prototype,"materialColor",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],StlLoaderComponent.prototype,"depthWrite",void 0),StlLoaderComponent=StlLoaderComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-stl-loader",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(StlLoaderComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],StlLoaderComponent)},320:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftMeshModule}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_box_mesh_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(172),_cylinder_mesh_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(321),_frame_mesh_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(322),_plane_mesh_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(323),_sphere_mesh_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(324),_torus_mesh_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(325),_grid_mesh_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(326),_video_mesh_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(327);let AtftMeshModule=class AtftMeshModule{};AtftMeshModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[_box_mesh_component__WEBPACK_IMPORTED_MODULE_3__.a,_cylinder_mesh_component__WEBPACK_IMPORTED_MODULE_4__.a,_frame_mesh_component__WEBPACK_IMPORTED_MODULE_5__.a,_plane_mesh_component__WEBPACK_IMPORTED_MODULE_6__.a,_sphere_mesh_component__WEBPACK_IMPORTED_MODULE_7__.a,_torus_mesh_component__WEBPACK_IMPORTED_MODULE_8__.a,_grid_mesh_component__WEBPACK_IMPORTED_MODULE_9__.a,_video_mesh_component__WEBPACK_IMPORTED_MODULE_10__.a],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.b],exports:[_box_mesh_component__WEBPACK_IMPORTED_MODULE_3__.a,_cylinder_mesh_component__WEBPACK_IMPORTED_MODULE_4__.a,_frame_mesh_component__WEBPACK_IMPORTED_MODULE_5__.a,_plane_mesh_component__WEBPACK_IMPORTED_MODULE_6__.a,_sphere_mesh_component__WEBPACK_IMPORTED_MODULE_7__.a,_torus_mesh_component__WEBPACK_IMPORTED_MODULE_8__.a,_grid_mesh_component__WEBPACK_IMPORTED_MODULE_9__.a,_video_mesh_component__WEBPACK_IMPORTED_MODULE_10__.a]})],AtftMeshModule)},321:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CylinderMeshComponent}));var CylinderMeshComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),_abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(85),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8);let CylinderMeshComponent=CylinderMeshComponent_1=class CylinderMeshComponent extends _abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_4__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.radiusTop=1,this.radiusBottom=1,this.height=1,this.radialSegments=8,this.heightSegments=1,this.openEnded=!1,this.thetaStart=0,this.thetaLength=2*Math.PI}newObject3DInstance(){const geometry=new three__WEBPACK_IMPORTED_MODULE_2__.n(this.radiusTop,this.radiusBottom,this.height,this.radialSegments,this.heightSegments,this.openEnded,this.thetaStart,this.thetaLength),material=this.getMaterial(),mesh=new three__WEBPACK_IMPORTED_MODULE_2__.W(geometry,material);return this.applyShadowProps(mesh),mesh}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],CylinderMeshComponent.prototype,"radiusTop",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],CylinderMeshComponent.prototype,"radiusBottom",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],CylinderMeshComponent.prototype,"height",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],CylinderMeshComponent.prototype,"radialSegments",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],CylinderMeshComponent.prototype,"heightSegments",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],CylinderMeshComponent.prototype,"openEnded",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],CylinderMeshComponent.prototype,"thetaStart",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],CylinderMeshComponent.prototype,"thetaLength",void 0),CylinderMeshComponent=CylinderMeshComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-cylinder-mesh",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_3__.c)(CylinderMeshComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_6__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_6__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],CylinderMeshComponent)},322:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FrameMeshComponent}));var FrameMeshComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(85);let FrameMeshComponent=FrameMeshComponent_1=class FrameMeshComponent extends _abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.thickness=2,this.sizeX=20,this.sizeY=20}getGeometry(){const halfX=this.sizeX/2,halfY=this.sizeY/2,t=this.thickness,shape=new three__WEBPACK_IMPORTED_MODULE_2__.xb;shape.moveTo(-halfX,halfY),shape.lineTo(-halfX-t,halfY+t),shape.lineTo(halfX+t,halfY+t),shape.lineTo(halfX+t,-halfY-t),shape.lineTo(-halfX-t,-halfY-t),shape.lineTo(-halfX-t,halfY+t),shape.lineTo(-halfX,halfY),shape.lineTo(-halfX,-halfY),shape.lineTo(halfX,-halfY),shape.lineTo(halfX,halfY),shape.lineTo(-halfX,halfY);return new three__WEBPACK_IMPORTED_MODULE_2__.yb(shape)}newObject3DInstance(){const material=this.getMaterial(),mesh=new three__WEBPACK_IMPORTED_MODULE_2__.W(this.getGeometry(),material);return this.applyShadowProps(mesh),mesh}ngOnChanges(changes){if(!this.object)return;super.ngOnChanges(changes);let modified=!1;if(["sizeX","sizeY","thickness"].some(propName=>propName in changes)&&this.getObject()instanceof three__WEBPACK_IMPORTED_MODULE_2__.W){const mesh=this.getObject();if(mesh.geometry instanceof three__WEBPACK_IMPORTED_MODULE_2__.yb){const currentGeometry=mesh.geometry,newGeometry=this.getGeometry();currentGeometry.attributes=newGeometry.attributes}modified=!0}modified&&(this.changed.emit(),this.rendererService.render())}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],FrameMeshComponent.prototype,"thickness",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],FrameMeshComponent.prototype,"sizeX",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],FrameMeshComponent.prototype,"sizeY",void 0),FrameMeshComponent=FrameMeshComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-frame-mesh",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(FrameMeshComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],FrameMeshComponent)},323:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PlaneMeshComponent}));var PlaneMeshComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(85);let PlaneMeshComponent=PlaneMeshComponent_1=class PlaneMeshComponent extends _abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.width=1,this.height=1,this.widthSegments=1,this.heightSegments=1}newObject3DInstance(){const geometry=new three__WEBPACK_IMPORTED_MODULE_2__.jb(this.width,this.height,this.widthSegments,this.heightSegments),material=this.getMaterial(),mesh=new three__WEBPACK_IMPORTED_MODULE_2__.W(geometry,material);return this.applyShadowProps(mesh),mesh}ngOnChanges(changes){if(!this.object)return;super.ngOnChanges(changes);let modified=!1;if(["width","height","widthSegments","heightSegments"].some(propName=>propName in changes)){if(this.getObject()instanceof three__WEBPACK_IMPORTED_MODULE_2__.W){const mesh=this.getObject();if(mesh.geometry instanceof three__WEBPACK_IMPORTED_MODULE_2__.jb){const currentGeometry=mesh.geometry,newGeometry=new three__WEBPACK_IMPORTED_MODULE_2__.jb(this.width,this.height,this.widthSegments,this.heightSegments);currentGeometry.attributes=newGeometry.attributes}}modified=!0}modified&&(this.changed.emit(),this.rendererService.render())}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],PlaneMeshComponent.prototype,"width",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],PlaneMeshComponent.prototype,"height",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],PlaneMeshComponent.prototype,"widthSegments",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],PlaneMeshComponent.prototype,"heightSegments",void 0),PlaneMeshComponent=PlaneMeshComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-plane-mesh",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(PlaneMeshComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],PlaneMeshComponent)},324:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SphereMeshComponent}));var SphereMeshComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(85);let SphereMeshComponent=SphereMeshComponent_1=class SphereMeshComponent extends _abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent}newObject3DInstance(){const geometry=new three__WEBPACK_IMPORTED_MODULE_2__.Cb(this.radius,this.widthSegments,this.hightSegments),material=this.getMaterial(),mesh=new three__WEBPACK_IMPORTED_MODULE_2__.W(geometry,material);return this.applyShadowProps(mesh),mesh}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],SphereMeshComponent.prototype,"radius",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],SphereMeshComponent.prototype,"widthSegments",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],SphereMeshComponent.prototype,"hightSegments",void 0),SphereMeshComponent=SphereMeshComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-sphere-mesh",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(SphereMeshComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],SphereMeshComponent)},325:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TorusMeshComponent}));var TorusMeshComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(85);let TorusMeshComponent=TorusMeshComponent_1=class TorusMeshComponent extends _abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.radius=.4,this.radialSegments=8,this.tubularSegments=6,this.arc=2*Math.PI}newObject3DInstance(){this.radius*=1,this.tube*=1,this.radialSegments*=1,this.tubularSegments*=1;const geometry=new three__WEBPACK_IMPORTED_MODULE_2__.Ib(this.radius,this.tube,this.radialSegments,this.tubularSegments),material=this.getMaterial(),mesh=new three__WEBPACK_IMPORTED_MODULE_2__.W(geometry,material);return this.applyShadowProps(mesh),mesh}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TorusMeshComponent.prototype,"radius",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],TorusMeshComponent.prototype,"tube",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TorusMeshComponent.prototype,"radialSegments",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TorusMeshComponent.prototype,"tubularSegments",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],TorusMeshComponent.prototype,"arc",void 0),TorusMeshComponent=TorusMeshComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-torus-mesh",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(TorusMeshComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],TorusMeshComponent)},326:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return GridMeshComponent}));var GridMeshComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(85);let GridMeshComponent=GridMeshComponent_1=class GridMeshComponent extends _abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.size=5,this.iterationsX=30,this.iterationsY=30,this.offset=1.05}newObject3DInstance(){const geometry=new three__WEBPACK_IMPORTED_MODULE_2__.j,vertices=[],d=this.size,x0=-this.iterationsX*(d*this.offset)/2,y0=-this.iterationsY*(d*this.offset)/2;let x=x0,y=y0;for(let i=0;i<this.iterationsX;i++){for(let j=0;j<this.iterationsY;j++)vertices.push(x,y,0),vertices.push(x+d,y+d,0),vertices.push(x,y+d,0),vertices.push(x+d,y+d,0),vertices.push(x,y,0),vertices.push(x+d,y,0),y+=this.size*this.offset;y=y0,x+=this.size*this.offset}geometry.setAttribute("position",new three__WEBPACK_IMPORTED_MODULE_2__.i(new Float32Array(vertices),3));const material=this.getMaterial(),mesh=new three__WEBPACK_IMPORTED_MODULE_2__.W(geometry,material);return geometry.computeBoundingBox(),geometry.computeVertexNormals(),this.applyShadowProps(mesh),mesh}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],GridMeshComponent.prototype,"size",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],GridMeshComponent.prototype,"iterationsX",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],GridMeshComponent.prototype,"iterationsY",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],GridMeshComponent.prototype,"offset",void 0),GridMeshComponent=GridMeshComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-grid-mesh",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(GridMeshComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],GridMeshComponent)},327:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return VideoMeshComponent}));var VideoMeshComponent_1,_a,_b,_c,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10),_abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(85),_animation__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(45);let VideoMeshComponent=VideoMeshComponent_1=class VideoMeshComponent extends _abstract_mesh_3d__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent,animationService){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.animationService=animationService,this.width=1,this.height=1,this.type="video/mp4",this.autoplay=!0,this.loop=!0,this.muted=!0,this.video=document.createElement("video"),this.widthSegments=1,this.heightSegments=1}newObject3DInstance(){const geometry=new three__WEBPACK_IMPORTED_MODULE_2__.jb(this.width,this.height,this.widthSegments,this.heightSegments),material=this.getMaterial(),mesh=new three__WEBPACK_IMPORTED_MODULE_2__.W(geometry,material);return this.applyShadowProps(mesh),mesh}getMaterial(){const source=document.createElement("source");source.src=this.videoSrc,source.type=this.type,this.video.appendChild(source),this.video.crossOrigin="anonymous",this.video.autoplay=!1,this.video.loop=this.loop,this.video.muted=this.muted;const texture=new three__WEBPACK_IMPORTED_MODULE_2__.Pb(this.video);return new three__WEBPACK_IMPORTED_MODULE_2__.X({color:16777215,map:texture})}animate(){}ngAfterViewInit(){super.ngAfterViewInit(),this.autoplay&&(this.animationService.start(),this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate),this.video.load(),this.video.addEventListener("canplay",()=>{this.video&&this.video.play()}))}ngOnDestroy(){var _a;this.video&&(null===(_a=this.animation)||void 0===_a||_a.unsubscribe(),this.video.pause(),this.video.remove())}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],VideoMeshComponent.prototype,"width",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],VideoMeshComponent.prototype,"height",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],VideoMeshComponent.prototype,"videoSrc",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],VideoMeshComponent.prototype,"type",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],VideoMeshComponent.prototype,"autoplay",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],VideoMeshComponent.prototype,"loop",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],VideoMeshComponent.prototype,"muted",void 0),VideoMeshComponent=VideoMeshComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-video-mesh",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(VideoMeshComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object,"function"==typeof(_c=void 0!==_animation__WEBPACK_IMPORTED_MODULE_7__.a&&_animation__WEBPACK_IMPORTED_MODULE_7__.a)?_c:Object])],VideoMeshComponent)},328:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftTextModule}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_text_mesh_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(329);let AtftTextModule=class AtftTextModule{};AtftTextModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({declarations:[_text_mesh_component__WEBPACK_IMPORTED_MODULE_3__.a],imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.b],exports:[_text_mesh_component__WEBPACK_IMPORTED_MODULE_3__.a]})],AtftTextModule)},329:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TextMeshComponent}));var TextMeshComponent_1,_a,_b,_c,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_util_fix_center__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(397),_abstract_lazy_object_3d__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(250),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(10),_loader_services_font_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(318);let TextMeshComponent=TextMeshComponent_1=class TextMeshComponent extends _abstract_lazy_object_3d__WEBPACK_IMPORTED_MODULE_6__.a{constructor(rendererService,parent,font){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.font=font,this.material="basic",this._materialColor="#DADADA",this._text="Text",this.size=10,this.height=.3,this.curveSegments=2,this.bevelEnabled=!1,this.bevelThickness=.1,this.bevelSize=.1,this.bevelOffset=0,this.bevelSegments=1,this.fontUrl="./assets/font/helvetiker_regular.typeface.json",this.castShadow=!0,this.receiveShadow=!0,this.depthWrite=!0,this.centered=!0}set materialColor(materialColor){this._materialColor=materialColor,this.object&&this.startLoading()}get materialColor(){return this._materialColor}set text(text){this._text=text,this.object&&this.startLoading()}get text(){return this._text}getMaterial(){return Object(_util__WEBPACK_IMPORTED_MODULE_4__.a)(this.materialColor,this.material,this.depthWrite)}loadLazyObject(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){const font=yield this.font.load(this.fontUrl);return this.getTextMesh(font)}))}getTextMesh(font){if(this.text){const geometry=new three__WEBPACK_IMPORTED_MODULE_2__.Fb(this.text,{font:font,size:this.size,height:this.height,curveSegments:this.curveSegments,bevelEnabled:this.bevelEnabled,bevelThickness:this.bevelThickness,bevelSize:this.bevelSize,bevelOffset:this.bevelOffset,bevelSegments:this.bevelOffset}),material=this.getMaterial(),mesh=new three__WEBPACK_IMPORTED_MODULE_2__.W(geometry,material);return mesh.castShadow=this.castShadow,mesh.receiveShadow=this.receiveShadow,this.centered&&Object(_util_fix_center__WEBPACK_IMPORTED_MODULE_5__.a)(mesh),mesh}return new three__WEBPACK_IMPORTED_MODULE_2__.W}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"material",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",[Object])],TextMeshComponent.prototype,"materialColor",null),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",String),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",[String])],TextMeshComponent.prototype,"text",null),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"size",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"height",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"curveSegments",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"bevelEnabled",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"bevelThickness",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"bevelSize",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"bevelOffset",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"bevelSegments",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"fontUrl",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"castShadow",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"receiveShadow",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"depthWrite",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],TextMeshComponent.prototype,"centered",void 0),TextMeshComponent=TextMeshComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-text-mesh",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(TextMeshComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_7__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_7__.a)?_b:Object,"function"==typeof(_c=void 0!==_loader_services_font_service__WEBPACK_IMPORTED_MODULE_8__.a&&_loader_services_font_service__WEBPACK_IMPORTED_MODULE_8__.a)?_c:Object])],TextMeshComponent)},330:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SceneComponent}));var SceneComponent_1,_a,_b,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(10);let SceneComponent=SceneComponent_1=class SceneComponent extends _abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.background="#ffffff",rendererService.setScene(this)}newObject3DInstance(){const scene=new three__WEBPACK_IMPORTED_MODULE_2__.ub;return scene.background=new three__WEBPACK_IMPORTED_MODULE_2__.m(this.background),scene}updateParent(){}ngOnChanges(changes){if(super.ngOnChanges(changes),!this.object)return;let modified=!1;["background"].some(propName=>propName in changes)&&(this.getObject().background=new three__WEBPACK_IMPORTED_MODULE_2__.m(this.background),modified=!0),modified&&this.rendererService.render()}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],SceneComponent.prototype,"background",void 0),SceneComponent=SceneComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-scene",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(SceneComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.SkipSelf)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.d)(1,Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Optional)()),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object,"function"==typeof(_b=void 0!==_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a&&_abstract_object_3d__WEBPACK_IMPORTED_MODULE_5__.a)?_b:Object])],SceneComponent)},331:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftCameraModule}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9),_perspective_camera_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(332),_orthographic_camera_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(333);let AtftCameraModule=class AtftCameraModule{};AtftCameraModule=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.NgModule)({imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.b],declarations:[_perspective_camera_component__WEBPACK_IMPORTED_MODULE_3__.a,_orthographic_camera_component__WEBPACK_IMPORTED_MODULE_4__.a],exports:[_perspective_camera_component__WEBPACK_IMPORTED_MODULE_3__.a,_orthographic_camera_component__WEBPACK_IMPORTED_MODULE_4__.a]})],AtftCameraModule)},332:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return PerspectiveCameraComponent}));var PerspectiveCameraComponent_1,_a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_camera__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(117);let PerspectiveCameraComponent=PerspectiveCameraComponent_1=class PerspectiveCameraComponent extends _abstract_camera__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService){super(rendererService),this.rendererService=rendererService}createCamera(){this.camera=new three__WEBPACK_IMPORTED_MODULE_2__.ib(this.fov,void 0,this.near,this.far)}updateAspectRatio(aspect){this.camera.aspect=aspect,this.camera.updateProjectionMatrix()}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],PerspectiveCameraComponent.prototype,"fov",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],PerspectiveCameraComponent.prototype,"near",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Number)],PerspectiveCameraComponent.prototype,"far",void 0),PerspectiveCameraComponent=PerspectiveCameraComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-perspective-camera",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(PerspectiveCameraComponent_1,_abstract_camera__WEBPACK_IMPORTED_MODULE_5__.a)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object])],PerspectiveCameraComponent)},333:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return OrthographicCameraComponent}));var OrthographicCameraComponent_1,_a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12),_abstract_camera__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(117);let OrthographicCameraComponent=OrthographicCameraComponent_1=class OrthographicCameraComponent extends _abstract_camera__WEBPACK_IMPORTED_MODULE_5__.a{constructor(rendererService){super(rendererService),this.rendererService=rendererService,this.zoom=4}createCamera(){this.camera=new three__WEBPACK_IMPORTED_MODULE_2__.fb(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/-2,window.innerHeight/2,.1,1e4),this.updateZoom()}ngOnChanges(changes){if(!this.camera)return;let mustRerender=!1;["zoom"].some(propName=>propName in changes)&&(this.updateZoom(),mustRerender=!0),mustRerender&&this.rendererService.render()}updateZoom(){this.camera.zoom=this.zoom}updateAspectRatio(aspect){this.camera.left=-1e3*aspect/2,this.camera.right=1e3*aspect/2,this.camera.top=500,this.camera.bottom=-500,this.camera.updateProjectionMatrix(),this.camera.lookAt(new three__WEBPACK_IMPORTED_MODULE_2__.Mb(0,0,0))}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],OrthographicCameraComponent.prototype,"zoom",void 0),OrthographicCameraComponent=OrthographicCameraComponent_1=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"atft-orthographic-camera",providers:[Object(_util__WEBPACK_IMPORTED_MODULE_4__.c)(OrthographicCameraComponent_1,_abstract_camera__WEBPACK_IMPORTED_MODULE_5__.a)],template:"<ng-content></ng-content>"}),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object])],OrthographicCameraComponent)},334:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftRendererModule}));var tslib_es6=__webpack_require__(1),core=__webpack_require__(0),renderer_canvas_component=__webpack_require__(173),common=__webpack_require__(9),renderer_service=__webpack_require__(8),three_module=__webpack_require__(2),RenderPass=__webpack_require__(231),UnrealBloomPass=__webpack_require__(420),EffectComposer=__webpack_require__(177),ShaderPass=__webpack_require__(76),SMAAPass=__webpack_require__(421),FXAAShader=__webpack_require__(414);let bloom_service_BloomService=class BloomService{constructor(){this.materials=[],this.darkMaterial=new three_module.X({color:"black"}),this.bloomLayer=new three_module.G,this.initialized=!1}init(renderer,scene,camera){if(renderer&&scene&&camera){this.scene=scene,this.bloomLayer.set(1);const renderScene=new RenderPass.a(scene,camera),bloomPass=new UnrealBloomPass.a(new three_module.Lb(window.innerWidth,window.innerHeight),2,.1,.1);bloomPass.clear=!0;const fxaaPass=new ShaderPass.a(FXAAShader.a),pixelRatio=renderer.getPixelRatio();fxaaPass.material.uniforms.resolution.value.x=1/(window.innerWidth*pixelRatio),fxaaPass.material.uniforms.resolution.value.y=1/(window.innerHeight*pixelRatio),this.bloomComposer=new EffectComposer.a(renderer),this.bloomComposer.renderToScreen=!1,this.bloomComposer.addPass(renderScene),this.bloomComposer.addPass(bloomPass);const finalPass=new ShaderPass.a(new three_module.wb({uniforms:{baseTexture:{value:null},bloomTexture:{value:this.bloomComposer.renderTarget2.texture}},vertexShader:"\n  varying vec2 vUv;\n  void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }",fragmentShader:"\n  uniform sampler2D baseTexture;\n  uniform sampler2D bloomTexture;\n  varying vec2 vUv;\n  void main() {\n    gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n  }",defines:{}}),"baseTexture");finalPass.needsSwap=!0;new SMAAPass.a(window.innerWidth,window.innerHeight);this.finalComposer=new EffectComposer.a(renderer),this.finalComposer.addPass(renderScene),this.finalComposer.addPass(finalPass),this.finalComposer.addPass(fxaaPass),this.initialized=!0}else console.warn("BloomService.init not all parameters settled")}render(){this.initialized&&(this.scene.traverse(i=>{this.darkenNonBloomed(i)}),this.bloomComposer.render(),this.scene.traverse(i=>{this.restoreMaterial(i)}),this.finalComposer.render())}darkenNonBloomed(obj){this.initialized&&obj.isMesh&&!1===this.bloomLayer.test(obj.layers)&&(this.materials[obj.uuid]=obj.material,obj.material=this.darkMaterial)}restoreMaterial(obj){this.initialized&&obj.isMesh&&this.materials[obj.uuid]&&(obj.material=this.materials[obj.uuid],delete this.materials[obj.uuid])}};bloom_service_BloomService=Object(tslib_es6.b)([Object(core.Injectable)(),Object(tslib_es6.c)("design:paramtypes",[])],bloom_service_BloomService);let AtftRendererModule=class AtftRendererModule{};AtftRendererModule=Object(tslib_es6.b)([Object(core.NgModule)({imports:[common.b],declarations:[renderer_canvas_component.a],providers:[renderer_service.a,bloom_service_BloomService],exports:[renderer_canvas_component.a]})],AtftRendererModule)},335:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return line_connector_component_LineConnectorComponent}));var _a,_b,tslib_es6=__webpack_require__(1),core=__webpack_require__(0),three_module=__webpack_require__(2),animation=__webpack_require__(45),renderer_service=__webpack_require__(8),util=__webpack_require__(12),abstract_object_3d=__webpack_require__(10);let abstract_connector_AbstractConnector=class AbstractConnector extends abstract_object_3d.a{newObject3DInstance(){const line=this.createLineMesh();return this.source&&this.target&&this.watchObjects(),line}watchObjects(){this.sourceSub=this.source.changed.subscribe(item=>{this.updateLineGeometry()}),this.targetSub=this.target.changed.subscribe(item=>{this.updateLineGeometry()})}ngOnDestroy(){var _a,_b;super.ngOnDestroy(),null===(_a=this.sourceSub)||void 0===_a||_a.unsubscribe(),null===(_b=this.targetSub)||void 0===_b||_b.unsubscribe()}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type","function"==typeof(_a=void 0!==abstract_object_3d.a&&abstract_object_3d.a)?_a:Object)],abstract_connector_AbstractConnector.prototype,"source",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type","function"==typeof(_b=void 0!==abstract_object_3d.a&&abstract_object_3d.a)?_b:Object)],abstract_connector_AbstractConnector.prototype,"target",void 0),abstract_connector_AbstractConnector=Object(tslib_es6.b)([Object(core.Directive)()],abstract_connector_AbstractConnector);var LineConnectorComponent_1,line_connector_component_a,line_connector_component_b,_c,LineType,Line2=__webpack_require__(419),LineGeometry=__webpack_require__(256),LineMaterial=__webpack_require__(197);!function(LineType){LineType.dashed="dash",LineType.solid="solid"}(LineType||(LineType={}));let line_connector_component_LineConnectorComponent=LineConnectorComponent_1=class LineConnectorComponent extends abstract_connector_AbstractConnector{constructor(rendererService,parent,animationService){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.animationService=animationService,this.materialColor=16777215,this.solid=!1,this.lineWidth=2,this.dashSize=3,this.gapSize=.5,this.opacity=1,this.lineType=LineType.dashed,this.animated=!0,this.time=0,this.timeScale=5,this.clock=new three_module.l}createLineMesh(){const positions=this.getPositions(),geometry=new LineGeometry.a;return geometry.setPositions(positions),this.matLine=new LineMaterial.a({color:this.materialColor,linewidth:this.lineWidth,vertexColors:!1,dashed:!this.solid,dashSize:this.dashSize,dashOffset:0,gapSize:this.gapSize,opacity:this.opacity,transparent:this.opacity<1,depthWrite:!0}),this.matLine.resolution.set(window.innerWidth,window.innerHeight),this.solid||(this.matLine.defines.USE_DASH=""),this.line=new Line2.a(geometry,this.matLine),this.line.computeLineDistances(),this.animated&&(this.animate=this.animate.bind(this),this.animation=this.animationService.animate.subscribe(this.animate)),this.line}updateLineGeometry(){const positions=this.getPositions();this.line.geometry.dispose(),this.line.geometry.setPositions(positions),this.line.computeLineDistances()}getPositions(){if(!this.source||!this.target)throw new Error("AbstractConnector: source or target inputs are missing!");const source=this.source.getObject().position,target=this.target.getObject().position,positions=[];return positions.push(source.x,source.y,source.z),positions.push(target.x,target.y,target.z),positions}ngOnDestroy(){super.ngOnDestroy(),this.animation&&this.animation.unsubscribe()}animate(){var _a,_b;const material=null===(_a=this.line)||void 0===_a?void 0:_a.material;(null===(_b=this.line)||void 0===_b?void 0:_b.material)&&(this.time+=this.clock.getDelta(),material.dashOffset=-1*this.time*this.timeScale,this.line.computeLineDistances())}ngOnChanges(changes){if(!this.object)return;super.ngOnChanges(changes);let modified=!1;["materialColor"].some(propName=>propName in changes)&&(console.log("Changed color to",this.materialColor),this.line.material.color=new three_module.m(this.materialColor),this.line.material.needsUpdate=!0,modified=!0),modified&&(this.changed.emit(),this.rendererService.render())}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],line_connector_component_LineConnectorComponent.prototype,"materialColor",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],line_connector_component_LineConnectorComponent.prototype,"solid",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],line_connector_component_LineConnectorComponent.prototype,"lineWidth",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],line_connector_component_LineConnectorComponent.prototype,"dashSize",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],line_connector_component_LineConnectorComponent.prototype,"gapSize",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],line_connector_component_LineConnectorComponent.prototype,"opacity",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],line_connector_component_LineConnectorComponent.prototype,"lineType",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],line_connector_component_LineConnectorComponent.prototype,"animated",void 0),line_connector_component_LineConnectorComponent=LineConnectorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-line-connector",providers:[Object(util.c)(LineConnectorComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(line_connector_component_a=void 0!==renderer_service.a&&renderer_service.a)?line_connector_component_a:Object,"function"==typeof(line_connector_component_b=void 0!==abstract_object_3d.a&&abstract_object_3d.a)?line_connector_component_b:Object,"function"==typeof(_c=void 0!==animation.a&&animation.a)?_c:Object])],line_connector_component_LineConnectorComponent)},38:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(334),__webpack_require__(173);var _renderer_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);__webpack_require__.d(__webpack_exports__,"a",(function(){return _renderer_service__WEBPACK_IMPORTED_MODULE_2__.a}))},386:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="<canvas #canvas>\n  <ng-content></ng-content>\n</canvas>\n"},387:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=":host {\n  display: flex;\n  flex: 1;\n  height: 100%;\n}\n\ncanvas {\n  flex: 1;\n  outline: none;\n}"},397:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return fixCenter}));var three__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);function fixCenter(group){const box=(new three__WEBPACK_IMPORTED_MODULE_0__.g).setFromObject(group);group.translateX(-(box.max.x-box.min.x)/2-box.min.x),group.translateY(-(box.max.y-box.min.y)/2-box.min.y),group.translateZ(-(box.max.z-box.min.z)/2-box.min.z)}},418:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return uxSceneWrapper}));const uxSceneWrapper=content=>`\n    <atft-renderer-canvas>\n      <atft-orthographic-camera [positionX]=0 [positionY]=0 [positionZ]="100" [zoom]="4">\n      </atft-orthographic-camera>\n\n      <atft-scene name="scene" background="0xFFFFFF">\n        <atft-ambient-light color="#FFFFFF" [intensity]="0.4"></atft-ambient-light>\n\n        <atft-point-light [intensity]="0.5" [distance]="1000" [translateX]=90 [translateY]=90\n                          [translateZ]=90></atft-point-light>\n        <atft-point-light [intensity]="0.8" [distance]="1000" [translateX]="-60" [translateY]="-60"\n                          [translateZ]="50"></atft-point-light>\n\n        ${content}\n\n      </atft-scene>\n    </atft-renderer-canvas>\n`},45:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(304);var _animation_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(50);__webpack_require__.d(__webpack_exports__,"a",(function(){return _animation_service__WEBPACK_IMPORTED_MODULE_1__.a}))},50:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AnimationService}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8);let AnimationService=class AnimationService{constructor(rendererService){this.rendererService=rendererService,this.animate=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.EventEmitter,this.enabled=!1,this.animationStep=this.animationStep.bind(this)}start(){this.enabled||(this.enabled=!0,this.animationStep())}stop(){this.enabled&&(this.enabled=!1)}animationStep(){this.enabled&&this.animate.observers&&(requestAnimationFrame(this.animationStep),this.animate.observers.length>0&&(this.animate.emit(),this.rendererService.render()))}};AnimationService=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__.a&&_renderer_renderer_service__WEBPACK_IMPORTED_MODULE_2__.a)?_a:Object])],AnimationService)},521:function(module,__webpack_exports__,__webpack_require__){"use strict";var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(715),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__)()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/* You can add global styles to this file, and also import other style files */\nhtml, body {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n}",""]),__webpack_exports__.a=___CSS_LOADER_EXPORT___},61:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return axesSceneWrapper}));const axesSceneWrapper=content=>`\n<atft-orbit-controls style="height:100%" rotateSpeed=1 zoomSpeed=1.2>\n  <atft-renderer-canvas>\n      <atft-perspective-camera [zAxisUp]="true" positionX=50 [positionY]=-20 [positionZ]=50></atft-perspective-camera>\n      <atft-scene atft-stats-auto-show>\n          <atft-axes-helper [size]=200></atft-axes-helper>\n          <atft-grid-helper [size]=100 [divisions]=10 [rotateX]="90 | deg2rad"></atft-grid-helper>\n          <atft-point-light [intensity]="0.5" [distance]="1000" [translateX]=90 [translateY]=90\n                            [translateZ]=90></atft-point-light>\n          <atft-point-light [intensity]="0.8" [distance]="1000" [translateX]="-60" [translateY]="-60"\n                            [translateZ]="50"></atft-point-light>\n          ${content}\n      </atft-scene>\n  </atft-renderer-canvas>\n</atft-orbit-controls>\n`},615:function(module,exports){function webpackEmptyAsyncContext(req){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}))}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,module.exports=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id=615},63:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return worldSceneWrapper}));const worldSceneWrapper=content=>`\n  <atft-map-controls style="height:100%" rotateSpeed=1 zoomSpeed=1.2 [enableDamping]="false" [autoRotate]="false">\n      <atft-renderer-canvas>\n          <atft-perspective-camera [zAxisUp]="true" positionX=40 [positionY]=-100\n                [positionZ]=50 atft-raycaster-camera atft-raycaster-enable>\n          </atft-perspective-camera>\n          <atft-scene name="scene" background="#a0a0a0">\n          <atft-fog color="#a0a0a0" [near]="80" [far]="500"></atft-fog>\n          <atft-plane-mesh name="ground" [height]="2000" [width]="2000" materialColor="#999999" [depthWrite]="true" [castShadow]="false"\n            [receiveShadow]="true" heightSegments="10" widthSegments="10" [translateZ]="-0.1">\n            </atft-plane-mesh>\n              \x3c!--atft-axes-helper-- [size]=1000></atft-axes-helper--\x3e\n              <atft-hemisphere-light name="hemi-light" skyColor="#ffffff" groundColor="#ffffff"  [intensity]="0.3"\n                [translateX]="-20" [translateY]="-20" [translateZ]="100">\n              </atft-hemisphere-light>\n              \x3c!--<atft-directional-light color="#ffffff" [intensity]="0.7" [translateX]="20" [translateY]="-50" [translateZ]="50">\n              </atft-directional-light>--\x3e\n              <atft-point-light name="point-light" [intensity]="1" [translateX]="60" [translateY]="-120" [translateZ]="50" [castShadow]="true"></atft-point-light>\n              ${content}\n          </atft-scene>\n      </atft-renderer-canvas>\n  </atft-map-controls>\n`},718:function(module,exports,__webpack_require__){__webpack_require__(719),__webpack_require__(874),__webpack_require__(875),__webpack_require__(1048),__webpack_require__(1251),__webpack_require__(1254),__webpack_require__(1266),__webpack_require__(1268),__webpack_require__(1273),__webpack_require__(1275),__webpack_require__(1280),__webpack_require__(1284),module.exports=__webpack_require__(1432)},786:function(module,exports){},8:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RendererService}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),three__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_stats_stats_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(200);let RendererService=class RendererService{constructor(statsService){this.statsService=statsService,this.init=!1}ngOnDestroy(){}setScene(scene){this.scene=scene}setCamera(camera){this.camera=camera,this.camera.updateAspectRatio(this.aspect)}render(){this.init&&this.scene&&this.scene.getObject()&&this.camera&&this.camera.camera&&(this.composer?(this.composer.render(),this.composer.renderToScreen||this.webGlRenderer.render(this.scene.getObject(),this.camera.camera)):this.webGlRenderer.render(this.scene.getObject(),this.camera.camera),this.statsService.update())}initialize(canvas,preserveDrawingBuffer){this.webGlRenderer=new three__WEBPACK_IMPORTED_MODULE_2__.Rb({canvas:canvas,antialias:!0,alpha:!0,preserveDrawingBuffer:preserveDrawingBuffer}),this.webGlRenderer.setPixelRatio(window.devicePixelRatio),this.webGlRenderer.setSize(canvas.clientWidth,canvas.clientHeight,!0),this.webGlRenderer.shadowMap.enabled=!1,this.webGlRenderer.shadowMap.autoUpdate=!1,this.webGlRenderer.shadowMap.type=three__WEBPACK_IMPORTED_MODULE_2__.gb,this.webGlRenderer.setClearColor(0,0),this.webGlRenderer.autoClear=!0,canvas.style.zIndex="2",this.updateChildCamerasAspectRatio(canvas),this.init=!0,this.render()}resize(canvas,size){canvas.style.width=size,canvas.style.height=size,canvas.style.border="none";const width=canvas.clientWidth,height=canvas.clientHeight;this.webGlRenderer.setSize(width,height,!0),this.updateChildCamerasAspectRatio(canvas),this.render()}calculateAspectRatio(canvas){if(0===canvas.clientHeight)return 0;this.aspect=canvas.clientWidth/canvas.clientHeight}updateChildCamerasAspectRatio(canvas){this.calculateAspectRatio(canvas),this.camera&&this.camera.updateAspectRatio(this.aspect)}getScene(){return this.scene}getCamera(){return this.camera}getWebGlRenderer(){return this.webGlRenderer}setComposer(composer){this.composer=composer}};RendererService=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:paramtypes",["function"==typeof(_a=void 0!==_stats_stats_service__WEBPACK_IMPORTED_MODULE_3__.a&&_stats_stats_service__WEBPACK_IMPORTED_MODULE_3__.a)?_a:Object])],RendererService)},83:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AtftDataCenterActorModule})),__webpack_require__.d(__webpack_exports__,"b",(function(){return server_stand_actor_component_ServerStandActorComponent}));var LayerActorComponent_1,tslib_es6=__webpack_require__(1),core=__webpack_require__(0),object=__webpack_require__(20),util=__webpack_require__(12);let layer_actor_component_LayerActorComponent=LayerActorComponent_1=class LayerActorComponent extends object.a{constructor(){super(...arguments),this.render=new core.EventEmitter,this.selected=new core.EventEmitter,this.deselected=new core.EventEmitter,this.color="#A0A0A0"}set width(width){this._width=width,this.translateLabelX=this._width/2-10}get width(){return this._width}onSelected(){this.color="#A4A4A4"}onDeselected(){this.color="#A0A0A0"}onClick(){this.color="#A0A0A0"}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],layer_actor_component_LayerActorComponent.prototype,"label",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Number),Object(tslib_es6.c)("design:paramtypes",[Number])],layer_actor_component_LayerActorComponent.prototype,"width",null),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Number)],layer_actor_component_LayerActorComponent.prototype,"height",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],layer_actor_component_LayerActorComponent.prototype,"render",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],layer_actor_component_LayerActorComponent.prototype,"selected",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],layer_actor_component_LayerActorComponent.prototype,"deselected",void 0),layer_actor_component_LayerActorComponent=LayerActorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-layer-actor",providers:[Object(util.c)(LayerActorComponent_1)],template:'\n    <atft-plane-mesh atft-raycaster-group [width]="width" [height]="height" [materialColor]="color" (mouseEnter)="onSelected()"\n                     (mouseExit)="onDeselected()">\n      <atft-text-mesh [centered]="true" [text]="label" [size]="5" [translateX]="translateLabelX" [rotateZ]="(90 | deg2rad)"\n                      materialColor="#E0E0E0">\n      </atft-text-mesh>\n    </atft-plane-mesh>\n  '})],layer_actor_component_LayerActorComponent);var common=__webpack_require__(9),atft_module=__webpack_require__(21);let abstract_server_actor_AbstractServerActor=class AbstractServerActor extends object.a{constructor(){super(...arguments),this.render=new core.EventEmitter,this.selected=new core.EventEmitter,this.deselected=new core.EventEmitter,this.actorClick=new core.EventEmitter,this.color="#ffffff",this.showFrame=!0}onSelected(){this.color="#fff0f0"}onDeselected(){this.color="#ffffff"}onClick(){console.log("ServerActorComponent.onClick"),this.color="#ffa0a0",this.actorClick.emit()}};var ServerBarrelActorComponent_1;Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],abstract_server_actor_AbstractServerActor.prototype,"label",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],abstract_server_actor_AbstractServerActor.prototype,"render",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],abstract_server_actor_AbstractServerActor.prototype,"selected",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],abstract_server_actor_AbstractServerActor.prototype,"deselected",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],abstract_server_actor_AbstractServerActor.prototype,"actorClick",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],abstract_server_actor_AbstractServerActor.prototype,"icon",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],abstract_server_actor_AbstractServerActor.prototype,"showFrame",void 0),abstract_server_actor_AbstractServerActor=Object(tslib_es6.b)([Object(core.Directive)()],abstract_server_actor_AbstractServerActor);let server_barrel_actor_component_ServerBarrelActorComponent=ServerBarrelActorComponent_1=class ServerBarrelActorComponent extends abstract_server_actor_AbstractServerActor{};var ServerStandActorComponent_1;server_barrel_actor_component_ServerBarrelActorComponent=ServerBarrelActorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-server-barrel-actor",providers:[Object(util.c)(ServerBarrelActorComponent_1)],template:'\n    <atft-empty name="server-box">\n\n      \x3c!-- TODO: template? --\x3e\n      <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n        <atft-svg-loader *ngIf="icon" [icon]="icon" overrideMaterialColor="#ffffff"\n                         material="basic" [maxX]="6" [maxY]="6" [translateZ]="13.1" [rotateZ]="(180 | deg2rad)" [rotateY]="(180 | deg2rad)">\n        </atft-svg-loader>\n\n        <atft-cylinder-mesh *ngFor="let z of [2, 6.5, 11]"\n                            [height]="4" [radiusTop]="6" [radiusBottom]="6" [radialSegments]="30" [openEnded]="false"\n                            material="phong" [materialColor]="color" [translateZ]="z" [rotateX]="(90 | deg2rad)">\n        </atft-cylinder-mesh>\n      </atft-empty>\n\n      <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                      [material]="\'basic\'" [materialColor]="\'0xDADADA\'" [translateY]="-11" [translateZ]="0.2">\n      </atft-text-mesh>\n      <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                       [materialColor]="color">\n      </atft-frame-mesh>\n    </atft-empty>\n  '})],server_barrel_actor_component_ServerBarrelActorComponent);let server_stand_actor_component_ServerStandActorComponent=ServerStandActorComponent_1=class ServerStandActorComponent extends abstract_server_actor_AbstractServerActor{};var ServerCompactActorComponent_1;server_stand_actor_component_ServerStandActorComponent=ServerStandActorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-server-stand-actor",providers:[Object(util.c)(ServerStandActorComponent_1)],template:'\n    <atft-empty name="server-box">\n\n      \x3c!-- TODO: template? --\x3e\n      <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n        <atft-box-mesh [height]="10" [width]="10" [depth]="14" material="phong" [materialColor]="color" [translateZ]="7"\n                       atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n          <atft-svg-loader *ngIf="icon" [icon]="icon" overrideMaterialColor="#ffffff"\n                           material="basic" [maxX]="8" [maxY]="8" [translateZ]="0"\n                           [translateY]="-5.1" [rotateX]="(90 | deg2rad)" [rotateZ]="(180 | deg2rad)" [rotateY]="(180 | deg2rad)">\n          </atft-svg-loader>\n        </atft-box-mesh>\n      </atft-empty>\n\n      <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                      material="basic" materialColor="#DADADA" [translateY]="-11" [translateZ]="0.1"\n      [depthWrite]="true">\n      </atft-text-mesh>\n      <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.2" material="basic"\n                       [depthWrite]="true" [materialColor]="color">\n      </atft-frame-mesh>\n    </atft-empty>\n  '})],server_stand_actor_component_ServerStandActorComponent);let server_compact_actor_component_ServerCompactActorComponent=ServerCompactActorComponent_1=class ServerCompactActorComponent extends abstract_server_actor_AbstractServerActor{};var ServerIconActorComponent_1;server_compact_actor_component_ServerCompactActorComponent=ServerCompactActorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-server-compact-actor",providers:[Object(util.c)(ServerCompactActorComponent_1)],template:'\n      <atft-empty name="server-box">\n\n          \x3c!-- TODO: template? --\x3e\n          <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n              <atft-box-mesh [height]="10" [width]="10" [depth]="3" material="phong" [materialColor]="color" [translateZ]="1.5"\n                             atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n                  <atft-svg-loader #svg *ngIf="icon" [icon]="icon" overrideMaterialColor="#ffffff"\n                                   material="basic" [maxX]="6" [maxY]="6" [translateZ]="1.6"\n                                   [translateY]="0" [rotateZ]="(180 | deg2rad)" [rotateY]="(180 | deg2rad)">\n                  </atft-svg-loader>\n              </atft-box-mesh>\n          </atft-empty>\n\n          <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                          material="basic" materialColor="#DADADA" [translateY]="-11" [translateZ]="0.2">\n          </atft-text-mesh>\n          <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                           [materialColor]="color">\n          </atft-frame-mesh>\n      </atft-empty>\n  '})],server_compact_actor_component_ServerCompactActorComponent);let server_icon_actor_component_ServerIconActorComponent=ServerIconActorComponent_1=class ServerIconActorComponent extends abstract_server_actor_AbstractServerActor{};var WorkstationActorComponent_1;server_icon_actor_component_ServerIconActorComponent=ServerIconActorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-server-icon-actor",providers:[Object(util.c)(ServerIconActorComponent_1)],template:'\n    <atft-empty name="server-box">\n\n      <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n        <atft-svg-loader #svg *ngIf="icon" [icon]="icon" overrideMaterialColor="#ffffff" [translateZ]="0.1"\n                         material="basic" [maxX]="13" [maxY]="13"\n                         [translateY]="0" [rotateZ]="(180 | deg2rad)" [rotateY]="(180 | deg2rad)">\n        </atft-svg-loader>\n      </atft-empty>\n\n      <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                      material="basic" materialColor="#DADADA" [translateY]="-11" [translateZ]="0.2">\n      </atft-text-mesh>\n      <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                       [materialColor]="color">\n      </atft-frame-mesh>\n\n    </atft-empty>\n  '})],server_icon_actor_component_ServerIconActorComponent);let workstation_actor_component_WorkstationActorComponent=WorkstationActorComponent_1=class WorkstationActorComponent extends abstract_server_actor_AbstractServerActor{constructor(){super(...arguments),this.videoSrc="https://raw.githubusercontent.com/makimenko/files/master/angular-template-for-threejs/videos/ui/retro_futuristic_ui_360p.mp4"}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],workstation_actor_component_WorkstationActorComponent.prototype,"videoSrc",void 0),workstation_actor_component_WorkstationActorComponent=WorkstationActorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-workstation-actor",providers:[Object(util.c)(WorkstationActorComponent_1)],template:'\n    <atft-empty name="server-box">\n\n      \x3c!-- TODO: template? --\x3e\n      <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n        <atft-box-mesh [height]="10" [width]="10" [depth]="0.5" material="phong" [materialColor]="color" [translateZ]="0.5">\n        </atft-box-mesh>\n        <atft-box-mesh [height]="12.25" [width]="21" [depth]="1" [materialColor]="color" material="phong"\n                       [rotateX]="(80 | deg2rad)" [translateZ]="7">\n\n          <atft-video-mesh *ngIf="videoSrc" [height]="11.25" [width]="20" [translateZ]="0.6" [videoSrc]="videoSrc">\n          </atft-video-mesh>\n          <atft-box-mesh *ngIf="!videoSrc" [height]="11.25" [width]="20" [depth]="0" [translateZ]="0.6" materialColor="#ffffff"\n                         [depthWrite]="false">\n          </atft-box-mesh>\n\n        </atft-box-mesh>\n      </atft-empty>\n\n      <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                      material="basic" materialColor="#DADADA" [translateY]="-11" [translateZ]="0.2">\n      </atft-text-mesh>\n      <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                       [materialColor]="color">\n      </atft-frame-mesh>\n    </atft-empty>\n  '})],workstation_actor_component_WorkstationActorComponent);var GridActorComponent_1,grid_actor_component_a,three_module=__webpack_require__(2);let grid_actor_component_GridActorComponent=GridActorComponent_1=class GridActorComponent extends object.a{constructor(){super(...arguments),this.size=5,this.iterationsX=20,this.iterationsY=20,this.offset=1.05,this.render=new core.EventEmitter,this.gridEnter=new core.EventEmitter,this.deselected=new core.EventEmitter,this.gridClick=new core.EventEmitter,this.color="#A0A0A0"}onMouseEnter(event){const pos=this.getLinePosition(event);pos&&this.gridEnter.emit(pos)}onMouseClick(event){const pos=this.getLinePosition(event);pos&&this.gridClick.emit(pos)}getLinePosition(event){if(event.face){const meshPosition=this.grid.getObject().geometry.attributes.position,geometry=new three_module.j;geometry.setAttribute("position",new three_module.i(new Float32Array(12),3));const linePosition=new three_module.H(geometry,new three_module.J({color:16777215,transparent:!0})).geometry.attributes.position;return linePosition.copyAt(0,meshPosition,event.face.a),linePosition.copyAt(1,meshPosition,event.face.b),linePosition.copyAt(2,meshPosition,event.face.c),linePosition.copyAt(3,meshPosition,event.face.a),linePosition}return null}onDeselected(){}};Object(tslib_es6.b)([Object(core.ViewChild)("grid",{static:!0}),Object(tslib_es6.c)("design:type","function"==typeof(grid_actor_component_a=void 0!==object.d&&object.d)?grid_actor_component_a:Object)],grid_actor_component_GridActorComponent.prototype,"grid",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],grid_actor_component_GridActorComponent.prototype,"size",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],grid_actor_component_GridActorComponent.prototype,"iterationsX",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],grid_actor_component_GridActorComponent.prototype,"iterationsY",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],grid_actor_component_GridActorComponent.prototype,"offset",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],grid_actor_component_GridActorComponent.prototype,"render",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],grid_actor_component_GridActorComponent.prototype,"gridEnter",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],grid_actor_component_GridActorComponent.prototype,"deselected",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],grid_actor_component_GridActorComponent.prototype,"gridClick",void 0),grid_actor_component_GridActorComponent=GridActorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-grid-actor",providers:[Object(util.c)(GridActorComponent_1)],template:'\n    <atft-grid-mesh #grid [size]="size" [iterationsX]="iterationsX" [iterationsY]="iterationsY" [offset]="offset"\n                    (click)="onMouseClick($event)"\n                    (mouseEnter)="onMouseEnter($event)"\n                    (mouseExit)="onDeselected()"\n                    [materialColor]="color"\n                    atft-raycaster-group\n    ></atft-grid-mesh>\n  '})],grid_actor_component_GridActorComponent);var DagreLayoutComponent_1,dagre_layout_component_a,dagre_layout_component_b,renderer=__webpack_require__(38),dagre=__webpack_require__(262);let dagre_layout_component_DagreLayoutComponent=DagreLayoutComponent_1=class DagreLayoutComponent extends object.a{constructor(rendererService,parent){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.align="DL",this.rankdir="BT",this.nodesep=15,this.edgesep=1,this.ranksep=15,this.marginx=0,this.marginy=0,this.ranker="network-simplex",this.centered=!0,this.updated=new core.EventEmitter,this.graphModel={layout:{},nodes:[],edges:[]}}ngAfterViewInit(){super.ngAfterViewInit()}ngAfterContentInit(){this.layout()}layout(){this.graphModel.layout={align:this.align,rankdir:this.rankdir,nodesep:this.nodesep,edgesep:this.edgesep,ranksep:this.ranksep,marginx:this.marginx,marginy:this.marginy,ranker:this.ranker},this.graph=class dagre_utils_DagreUtils{static modelToGraph(model){const g=new dagre.graphlib.Graph({compound:!0,multigraph:!0});return g.setGraph(this.getLayout(model)),g.setDefaultEdgeLabel((function(){return{}})),this.updateGraph(g,model),dagre.layout(g),g}static updateBaseInfo(g,baseInfo){baseInfo&&baseInfo.forEach(node=>{g.setNode(node.name,{label:node.label,width:18,height:18}),node.composition&&g.setParent(node.name,node.composition)})}static updateEdges(g,model){model.edges&&model.edges.forEach(edge=>{g.setEdge(edge.from,edge.to,{name:edge.name})})}static updateGraph(g,model){this.updateBaseInfo(g,model.compositions),this.updateBaseInfo(g,model.nodes),this.updateEdges(g,model)}static getLayout(model){return model.layout}}.modelToGraph(this.graphModel),this.syncGraphContainer(this.graph),this.updated.emit(),this.rendererService.render()}syncGraphContainer(g){this.object&&this.centered&&(this.translateX=-g.graph().width/2,this.translateY=-g.graph().height/2,this.applyTranslation())}ngOnChanges(changes){if(super.ngOnChanges(changes),!this.object)return;let modified=!1;["align","rankdir","ranksep","nodesep","edgesep","marginx","marginy","ranker"].some(propName=>propName in changes)&&(this.layout(),modified=!0),modified&&this.changed.emit()}ngOnDestroy(){super.ngOnDestroy(),this.graph=void 0,this.graphModel=void 0}getGraphModel(){return this.graphModel}refreshLayout(){this.graph&&this.layout()}getGraph(){return this.graph}};var DagreNodeComponent_1,dagre_node_component_a,dagre_node_component_b,dagre_node_component_c;Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_layout_component_DagreLayoutComponent.prototype,"align",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_layout_component_DagreLayoutComponent.prototype,"rankdir",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_layout_component_DagreLayoutComponent.prototype,"nodesep",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_layout_component_DagreLayoutComponent.prototype,"edgesep",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_layout_component_DagreLayoutComponent.prototype,"ranksep",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_layout_component_DagreLayoutComponent.prototype,"marginx",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_layout_component_DagreLayoutComponent.prototype,"marginy",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_layout_component_DagreLayoutComponent.prototype,"ranker",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_layout_component_DagreLayoutComponent.prototype,"centered",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],dagre_layout_component_DagreLayoutComponent.prototype,"updated",void 0),dagre_layout_component_DagreLayoutComponent=DagreLayoutComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-dagre-layout",providers:[Object(util.c)(DagreLayoutComponent_1)],template:"\n    <ng-content></ng-content>"}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(dagre_layout_component_a=void 0!==renderer.a&&renderer.a)?dagre_layout_component_a:Object,"function"==typeof(dagre_layout_component_b=void 0!==object.b&&object.b)?dagre_layout_component_b:Object])],dagre_layout_component_DagreLayoutComponent);let dagre_node_component_DagreNodeComponent=DagreNodeComponent_1=class DagreNodeComponent extends object.a{constructor(rendererService,parent,injector){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.injector=injector,this.translateZ=0,this.dagreLayout=this.injector.get(dagre_layout_component_DagreLayoutComponent),this.dagreLayout||console.warn("DagreNodeComponent.constructor: atft-dagre-layout not found!"),this.syncGraph=this.syncGraph.bind(this),this.graphUpdated=this.dagreLayout.updated.subscribe(this.syncGraph)}ngOnInit(){super.ngOnInit(),this.addNode()}addNode(){this.dagreLayout&&this.dagreLayout.getGraphModel()&&(this.dagreLayout.getChildren().push(this),this.dagreLayout.getGraphModel().nodes.push({name:this.name,label:this.name,composition:this.composition}),this.dagreLayout.refreshLayout())}ngOnDestroy(){super.ngOnDestroy(),this.removeNode()}removeNode(){var _a;this.dagreLayout&&this.dagreLayout.getGraphModel()&&(null===(_a=this.graphUpdated)||void 0===_a||_a.unsubscribe(),this.dagreLayout.removeChildByName(this.name),this.dagreLayout.getGraphModel().nodes=this.dagreLayout.getGraphModel().nodes.filter(i=>i.name!==this.name),this.dagreLayout.refreshLayout())}syncGraphNodes(g){g.nodes().forEach(name=>{if(name===this.name){const node=g.node(name);this.translateX=node.x,this.translateY=node.y,this.applyTranslation()}})}syncGraph(){this.object&&this.syncGraphNodes(this.dagreLayout.getGraph())}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],dagre_node_component_DagreNodeComponent.prototype,"composition",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_node_component_DagreNodeComponent.prototype,"translateZ",void 0),Object(tslib_es6.b)([Object(core.ViewChild)("container",{read:core.ViewContainerRef,static:!0}),Object(tslib_es6.c)("design:type",Object)],dagre_node_component_DagreNodeComponent.prototype,"container",void 0),dagre_node_component_DagreNodeComponent=DagreNodeComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-dagre-node",providers:[Object(util.c)(DagreNodeComponent_1)],template:"<template #container></template><ng-content></ng-content>"}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(dagre_node_component_a=void 0!==renderer.a&&renderer.a)?dagre_node_component_a:Object,"function"==typeof(dagre_node_component_b=void 0!==object.b&&object.b)?dagre_node_component_b:Object,"function"==typeof(dagre_node_component_c=void 0!==core.Injector&&core.Injector)?dagre_node_component_c:Object])],dagre_node_component_DagreNodeComponent);var DagreEdgeComponent_1,dagre_edge_component_a,dagre_edge_component_b,dagre_edge_component_c,_d,LineEndType,EdgeType,animation=__webpack_require__(45);!function(LineEndType){LineEndType.none="none",LineEndType.circle="circle",LineEndType.arrow="arrow"}(LineEndType||(LineEndType={})),function(EdgeType){EdgeType.sequence="sequence",EdgeType.association="association",EdgeType.message="message",EdgeType.line="line"}(EdgeType||(EdgeType={}));let dagre_edge_component_DagreEdgeComponent=DagreEdgeComponent_1=class DagreEdgeComponent extends object.e{constructor(rendererService,parent,animationService,injector){super(rendererService,parent,animationService),this.rendererService=rendererService,this.parent=parent,this.animationService=animationService,this.injector=injector,this.startType=LineEndType.circle,this.endType=LineEndType.arrow,this.dagreLayout=this.injector.get(dagre_layout_component_DagreLayoutComponent),this.dagreLayout||console.warn("DagreEdgeComponent.constructor: atft-dagre-layout not found!"),this.syncGraph=this.syncGraph.bind(this),this.graphUpdated=this.dagreLayout.updated.subscribe(this.syncGraph)}set type(val){switch(val){case EdgeType.association:this.animated=!1,this.solid=!1,this.startType=LineEndType.none,this.endType=LineEndType.arrow;break;case EdgeType.message:this.animated=!0,this.solid=!1,this.dashSize=1,this.startType=LineEndType.circle,this.endType=LineEndType.arrow;break;case EdgeType.line:this.animated=!1,this.solid=!0,this.startType=LineEndType.none,this.endType=LineEndType.none;break;case EdgeType.sequence:this.animated=!1,this.solid=!0,this.startType=LineEndType.none,this.endType=LineEndType.arrow;break;default:this.animated=!0,this.solid=!1,this.dashSize=4,this.startType=LineEndType.circle,this.endType=LineEndType.arrow}}newObject3DInstance(){const lineObject=super.newObject3DInstance();return this.appendLineEnds(lineObject),lineObject}appendLineEnds(lineObject){const material=new three_module.X({color:this.materialColor,opacity:this.opacity,transparent:this.opacity<1,depthWrite:!0}),startGeometry=this.getConnectorEndGeometry(this.startType);startGeometry&&(this.lineStart=new three_module.W(startGeometry,material),lineObject.add(this.lineStart));const endGeometry=this.getConnectorEndGeometry(this.endType);endGeometry&&(this.lineEnd=new three_module.W(endGeometry,material),lineObject.add(this.lineEnd))}getConnectorEndGeometry(type){switch(type){case LineEndType.circle:return new three_module.k(.7,16);case LineEndType.arrow:const shape=new three_module.xb;shape.moveTo(0,-.5),shape.lineTo(1,2),shape.lineTo(0,1.7),shape.lineTo(-1,2);return new three_module.yb(shape);default:return}}ngOnInit(){super.ngOnInit(),this.addEdge()}addEdge(){this.dagreLayout&&this.dagreLayout.getGraphModel()&&(this.dagreLayout.getChildren().push(this),this.from&&this.to?this.dagreLayout.getGraphModel().edges.push({name:this.name,from:this.from,to:this.to}):console.warn("DagreEdgeComponent.addChild: edge source/target is undefined"),this.dagreLayout.refreshLayout())}ngOnDestroy(){super.ngOnDestroy(),this.removeEdge()}removeEdge(){var _a;this.dagreLayout&&this.dagreLayout.getGraphModel()&&(null===(_a=this.graphUpdated)||void 0===_a||_a.unsubscribe(),this.dagreLayout.removeChildByName(this.name),this.dagreLayout.getGraphModel().edges=this.dagreLayout.getGraphModel().edges.filter(i=>i.name!==this.name),this.dagreLayout.refreshLayout())}syncGraph(){this.object&&this.syncGraphEdges(this.dagreLayout.getGraph())}syncGraphEdges(g){g.edges().forEach(e=>{const edge=g.edge(e);edge.name===this.name&&(this.positions=[],edge.points.forEach(p=>{Number.isNaN(p.x)||Number.isNaN(p.y)||this.positions.push(p.x,p.y,.1)}),this.updateEnds(this.positions),this.updateLineGeometry())})}updateEnds(positions){const p=this.positions;(null==p?void 0:p.length)>=9&&(this.updateEnd(this.lineStart,new three_module.Mb(p[3],p[4],p[5]),new three_module.Mb(p[0],p[1],p[2])),this.updateEnd(this.lineEnd,new three_module.Mb(p[p.length-6],p[p.length-5],p[p.length-4]),new three_module.Mb(p[p.length-3],p[p.length-2],p[p.length-1])))}updateEnd(lineSide,prevPoint,endPoint){if(lineSide){let angle=prevPoint.clone().sub(endPoint).angleTo(new three_module.Mb(0,1,0));angle=prevPoint.x<endPoint.x?angle:-angle,lineSide.rotation.set(0,0,angle),lineSide.position.set(endPoint.x||0,endPoint.y||0,endPoint.z||0)}}getPositions(){return this.positions?this.positions:[0,0,0,0,0,0]}};var DagreCompositionComponent_1,dagre_composition_component_a,dagre_composition_component_b,dagre_composition_component_c,dagre_composition_component_d;Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],dagre_edge_component_DagreEdgeComponent.prototype,"from",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],dagre_edge_component_DagreEdgeComponent.prototype,"to",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],dagre_edge_component_DagreEdgeComponent.prototype,"startType",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],dagre_edge_component_DagreEdgeComponent.prototype,"endType",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String),Object(tslib_es6.c)("design:paramtypes",[String])],dagre_edge_component_DagreEdgeComponent.prototype,"type",null),dagre_edge_component_DagreEdgeComponent=DagreEdgeComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-dagre-edge",providers:[Object(util.c)(DagreEdgeComponent_1)],template:"<ng-content></ng-content>"}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(dagre_edge_component_a=void 0!==renderer.a&&renderer.a)?dagre_edge_component_a:Object,"function"==typeof(dagre_edge_component_b=void 0!==object.b&&object.b)?dagre_edge_component_b:Object,"function"==typeof(dagre_edge_component_c=void 0!==animation.a&&animation.a)?dagre_edge_component_c:Object,"function"==typeof(_d=void 0!==core.Injector&&core.Injector)?_d:Object])],dagre_edge_component_DagreEdgeComponent);let dagre_composition_component_DagreCompositionComponent=DagreCompositionComponent_1=class DagreCompositionComponent extends object.a{constructor(rendererService,parent,injector,cdRef){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.injector=injector,this.cdRef=cdRef,this.border="plane",this.render=new core.EventEmitter,this.selected=new core.EventEmitter,this.deselected=new core.EventEmitter,this.color="#A0A0A0",this.dagreLayout=this.injector.get(dagre_layout_component_DagreLayoutComponent),this.dagreLayout||console.warn("DagreCompositionComponent.constructor: atft-dagre-layout not found!"),this.syncGraph=this.syncGraph.bind(this),this.graphUpdated=this.dagreLayout.updated.subscribe(this.syncGraph)}set height(height){this._height=height,this.translateLabelY=this._height/2-3,this.cdRef.destroyed||this.cdRef.detectChanges()}get height(){return this._height}onSelected(){this.color="#A4A4A4"}onDeselected(){this.color="#A0A0A0"}onClick(){this.color="#A0A0A0"}ngOnInit(){super.ngOnInit(),this.addNode()}addNode(){this.dagreLayout&&this.dagreLayout.getGraphModel()&&(this.dagreLayout.getChildren().push(this),this.dagreLayout.getGraphModel().nodes.push({name:this.name,label:this.label,composition:this.composition}),this.dagreLayout.refreshLayout())}ngOnDestroy(){super.ngOnDestroy(),this.removeNode()}removeNode(){var _a;this.dagreLayout&&this.dagreLayout.getGraphModel()&&(null===(_a=this.graphUpdated)||void 0===_a||_a.unsubscribe(),this.dagreLayout.removeChildByName(this.name),this.dagreLayout.getGraphModel().nodes=this.dagreLayout.getGraphModel().nodes.filter(i=>i.name!==this.name),this.dagreLayout.refreshLayout())}syncGraphNodes(g){g.nodes().forEach(name=>{if(name===this.name){const node=g.node(name);this.translateX=node.x,this.translateY=node.y,this.applyTranslation(),this.width=node.width,this.height=node.height}})}syncGraph(){this.object&&this.syncGraphNodes(this.dagreLayout.getGraph())}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],dagre_composition_component_DagreCompositionComponent.prototype,"label",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_composition_component_DagreCompositionComponent.prototype,"border",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Number),Object(tslib_es6.c)("design:paramtypes",[Number])],dagre_composition_component_DagreCompositionComponent.prototype,"height",null),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Number)],dagre_composition_component_DagreCompositionComponent.prototype,"width",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],dagre_composition_component_DagreCompositionComponent.prototype,"render",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],dagre_composition_component_DagreCompositionComponent.prototype,"selected",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],dagre_composition_component_DagreCompositionComponent.prototype,"deselected",void 0),Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String)],dagre_composition_component_DagreCompositionComponent.prototype,"composition",void 0),dagre_composition_component_DagreCompositionComponent=DagreCompositionComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-dagre-composition",providers:[Object(util.c)(DagreCompositionComponent_1)],template:'\n    <atft-plane-mesh *ngIf="border!=\'frame\'" atft-raycaster-group [width]="width" [height]="height" [materialColor]="color"\n                     [depthWrite]="true"\n                     (mouseEnter)="onSelected()"\n                     (mouseExit)="onDeselected()">\n      <atft-text-mesh [centered]="true" [text]="label" [size]="3" [translateY]="translateLabelY"\n                      materialColor="#E0E0E0">\n      </atft-text-mesh>\n    </atft-plane-mesh>\n\n    <atft-frame-mesh *ngIf="border==\'frame\'" [sizeX]="width" [sizeY]="height" [thickness]="2" [materialColor]="color"\n                     [depthWrite]="true"\n                     atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()">\n      <atft-text-mesh [centered]="true" [text]="label" [size]="3" [translateY]="translateLabelY"\n                      materialColor="#E0E0E0">\n      </atft-text-mesh>\n    </atft-frame-mesh>\n\n  '}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(dagre_composition_component_a=void 0!==renderer.a&&renderer.a)?dagre_composition_component_a:Object,"function"==typeof(dagre_composition_component_b=void 0!==object.b&&object.b)?dagre_composition_component_b:Object,"function"==typeof(dagre_composition_component_c=void 0!==core.Injector&&core.Injector)?dagre_composition_component_c:Object,"function"==typeof(dagre_composition_component_d=void 0!==core.ChangeDetectorRef&&core.ChangeDetectorRef)?dagre_composition_component_d:Object])],dagre_composition_component_DagreCompositionComponent);var ModelActorComponent_1,model_actor_component_a,model_actor_component_b,model_actor_component_c,browser=__webpack_require__(416);let model_actor_component_ModelActorComponent=ModelActorComponent_1=class ModelActorComponent extends abstract_server_actor_AbstractServerActor{constructor(rendererService,parent,modelService){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.modelService=modelService}set model(model){const iconProvider=this.modelService.getSource(model);this.modelPath=iconProvider.url}get model(){return this.model}};var actor_repository_service_a;Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",String),Object(tslib_es6.c)("design:paramtypes",[String])],model_actor_component_ModelActorComponent.prototype,"model",null),model_actor_component_ModelActorComponent=ModelActorComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-model-actor",providers:[Object(util.c)(ModelActorComponent_1)],template:'\n    <atft-empty>\n\n      <atft-empty atft-raycaster-group (mouseEnter)="onSelected()" (mouseExit)="onDeselected()" (click)="onClick()">\n        <atft-obj-loader *ngIf="modelPath" [model]="modelPath">\n        </atft-obj-loader>\n      </atft-empty>\n\n      <atft-text-mesh [text]="label" [size]="2" [bevelEnabled]="false" [height]="0" [centered]="true"\n                      material="basic" materialColor="#DADADA" [translateY]="-11" [translateZ]="0.2">\n      </atft-text-mesh>\n      <atft-frame-mesh *ngIf="showFrame" [thickness]="1" [sizeX]="15" [sizeY]="15" [translateZ]="0.1" material="basic"\n                       [materialColor]="color">\n      </atft-frame-mesh>\n\n    </atft-empty>\n  '}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(model_actor_component_a=void 0!==renderer.a&&renderer.a)?model_actor_component_a:Object,"function"==typeof(model_actor_component_b=void 0!==object.b&&object.b)?model_actor_component_b:Object,"function"==typeof(model_actor_component_c=void 0!==object.f&&object.f)?model_actor_component_c:Object])],model_actor_component_ModelActorComponent);let actor_repository_service_ActorRepositoryService=class ActorRepositoryService{constructor(resolver){this.resolver=resolver,this.list=new Map,this.register("stand",server_stand_actor_component_ServerStandActorComponent),this.register("compact",server_compact_actor_component_ServerCompactActorComponent),this.register("barrel",server_barrel_actor_component_ServerBarrelActorComponent),this.register("icon",server_icon_actor_component_ServerIconActorComponent),this.register("workstation",workstation_actor_component_WorkstationActorComponent),this.register("model",model_actor_component_ModelActorComponent)}register(id,component){this.defaultId||(this.defaultId=id),this.list.set(id,component)}getComponentFactory(id){const comp=this.list.get(null!=id?id:this.defaultId);return this.resolver.resolveComponentFactory(comp)}};var DagreYamlParserComponent_1,dagre_yaml_parser_component_a,dagre_yaml_parser_component_b,dagre_yaml_parser_component_c,dagre_yaml_parser_component_d;actor_repository_service_ActorRepositoryService=Object(tslib_es6.b)([Object(core.Injectable)(),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(actor_repository_service_a=void 0!==core.ComponentFactoryResolver&&core.ComponentFactoryResolver)?actor_repository_service_a:Object])],actor_repository_service_ActorRepositoryService);let dagre_yaml_parser_component_DagreYamlParserComponent=DagreYamlParserComponent_1=class DagreYamlParserComponent extends object.a{constructor(rendererService,parent,resolver,actorRepository){super(rendererService,parent),this.rendererService=rendererService,this.parent=parent,this.resolver=resolver,this.actorRepository=actorRepository,this.status=new core.EventEmitter,this.instances=[]}ngAfterViewInit(){super.ngAfterViewInit(),this.parseAndCreate()}ngOnChanges(changes){super.ngOnChanges(changes),this.object&&["yaml"].some(propName=>propName in changes)&&this.parseAndCreate()}parseAndCreate(){var _a,_b,_c;if(this.yaml)try{this.destroyAll();const model=browser.parse(this.yaml);model&&model.nodes&&model.nodes.length>0&&(null===(_a=model.compositions)||void 0===_a||_a.forEach(i=>this.createComposition(i)),null===(_b=model.nodes)||void 0===_b||_b.forEach(i=>this.createNode(i)),null===(_c=model.edges)||void 0===_c||_c.forEach(i=>this.createEdge(i))),this.status.emit(!0)}catch(e){throw console.warn("DagreYamlParserComponent.parseAndCreate failed",e),this.status.emit(!1),e}}getNodeComponent(id){return this.actorRepository.getComponentFactory(id)}createNode(node){const nodeFactory=this.resolver.resolveComponentFactory(dagre_node_component_DagreNodeComponent),nodeRef=this.container.createComponent(nodeFactory);nodeRef.instance.name=node.name,nodeRef.instance.composition=node.composition,this.instances.push(nodeRef);const serverFactory=this.getNodeComponent(node.model?"model":node.type),serverRef=nodeRef.instance.container.createComponent(serverFactory);serverRef.instance.name=node.name,serverRef.instance.label=node.label?node.label:node.name,serverRef.instance.icon=node.icon,serverRef.instance.model=node.model,this.instances.push(serverRef)}createEdge(edge){const factory=this.resolver.resolveComponentFactory(dagre_edge_component_DagreEdgeComponent),edgeRef=this.container.createComponent(factory);edgeRef.instance.from=edge.from,edgeRef.instance.to=edge.to,edge.type&&(edgeRef.instance.type=edge.type),edge.color&&(edgeRef.instance.materialColor=edge.color),this.instances.push(edgeRef)}destroyAll(){this.instances.forEach(i=>{i.destroy()}),this.instances=[]}createComposition(composition){const factory=this.resolver.resolveComponentFactory(dagre_composition_component_DagreCompositionComponent),compositionRef=this.container.createComponent(factory);compositionRef.instance.name=composition.name,compositionRef.instance.label=composition.label?composition.label:composition.name,compositionRef.instance.composition=composition.composition,compositionRef.instance.border=composition.border,this.instances.push(compositionRef)}};Object(tslib_es6.b)([Object(core.Input)(),Object(tslib_es6.c)("design:type",Object)],dagre_yaml_parser_component_DagreYamlParserComponent.prototype,"yaml",void 0),Object(tslib_es6.b)([Object(core.Output)(),Object(tslib_es6.c)("design:type",Object)],dagre_yaml_parser_component_DagreYamlParserComponent.prototype,"status",void 0),Object(tslib_es6.b)([Object(core.ViewChild)("container",{read:core.ViewContainerRef}),Object(tslib_es6.c)("design:type",Object)],dagre_yaml_parser_component_DagreYamlParserComponent.prototype,"container",void 0),dagre_yaml_parser_component_DagreYamlParserComponent=DagreYamlParserComponent_1=Object(tslib_es6.b)([Object(core.Component)({selector:"atft-dagre-yaml-parser",providers:[Object(util.c)(DagreYamlParserComponent_1)],template:"\n    <template #container></template>"}),Object(tslib_es6.d)(1,Object(core.SkipSelf)()),Object(tslib_es6.d)(1,Object(core.Optional)()),Object(tslib_es6.c)("design:paramtypes",["function"==typeof(dagre_yaml_parser_component_a=void 0!==renderer.a&&renderer.a)?dagre_yaml_parser_component_a:Object,"function"==typeof(dagre_yaml_parser_component_b=void 0!==object.b&&object.b)?dagre_yaml_parser_component_b:Object,"function"==typeof(dagre_yaml_parser_component_c=void 0!==core.ComponentFactoryResolver&&core.ComponentFactoryResolver)?dagre_yaml_parser_component_c:Object,"function"==typeof(dagre_yaml_parser_component_d=void 0!==actor_repository_service_ActorRepositoryService&&actor_repository_service_ActorRepositoryService)?dagre_yaml_parser_component_d:Object])],dagre_yaml_parser_component_DagreYamlParserComponent);let AtftDataCenterActorModule=class AtftDataCenterActorModule{};AtftDataCenterActorModule=Object(tslib_es6.b)([Object(core.NgModule)({imports:[common.b,atft_module.a],declarations:[layer_actor_component_LayerActorComponent,server_barrel_actor_component_ServerBarrelActorComponent,server_stand_actor_component_ServerStandActorComponent,server_compact_actor_component_ServerCompactActorComponent,server_icon_actor_component_ServerIconActorComponent,workstation_actor_component_WorkstationActorComponent,grid_actor_component_GridActorComponent,dagre_layout_component_DagreLayoutComponent,dagre_edge_component_DagreEdgeComponent,dagre_composition_component_DagreCompositionComponent,dagre_node_component_DagreNodeComponent,dagre_yaml_parser_component_DagreYamlParserComponent,model_actor_component_ModelActorComponent],exports:[layer_actor_component_LayerActorComponent,server_barrel_actor_component_ServerBarrelActorComponent,server_stand_actor_component_ServerStandActorComponent,server_compact_actor_component_ServerCompactActorComponent,server_icon_actor_component_ServerIconActorComponent,workstation_actor_component_WorkstationActorComponent,grid_actor_component_GridActorComponent,dagre_layout_component_DagreLayoutComponent,dagre_edge_component_DagreEdgeComponent,dagre_composition_component_DagreCompositionComponent,dagre_node_component_DagreNodeComponent,dagre_yaml_parser_component_DagreYamlParserComponent,model_actor_component_ModelActorComponent],entryComponents:[server_stand_actor_component_ServerStandActorComponent,server_barrel_actor_component_ServerBarrelActorComponent,server_compact_actor_component_ServerCompactActorComponent,server_icon_actor_component_ServerIconActorComponent,workstation_actor_component_WorkstationActorComponent,model_actor_component_ModelActorComponent,dagre_node_component_DagreNodeComponent,dagre_edge_component_DagreEdgeComponent,dagre_composition_component_DagreCompositionComponent],providers:[actor_repository_service_ActorRepositoryService]})],AtftDataCenterActorModule)},85:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractMesh}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_abstract_object_3d__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(10),_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12);let AbstractMesh=class AbstractMesh extends _abstract_object_3d__WEBPACK_IMPORTED_MODULE_2__.a{constructor(){super(...arguments),this.materialColor="#5DADE2",this.castShadow=!0,this.receiveShadow=!0,this.depthWrite=!0}getMaterial(){return Object(_util__WEBPACK_IMPORTED_MODULE_3__.a)(this.materialColor,this.material,this.depthWrite)}applyShadowProps(mesh){mesh.castShadow=this.castShadow,mesh.receiveShadow=this.receiveShadow}ngOnChanges(changes){if(super.ngOnChanges(changes),!this.getObject())return;let mustRerender=!1;["material","materialColor","depthWrite"].some(propName=>propName in changes)&&(this.applyMaterial(),mustRerender=!0),mustRerender&&this.rendererService.render()}applyMaterial(){this.getObject().material=this.getMaterial()}};Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",String)],AbstractMesh.prototype,"material",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AbstractMesh.prototype,"materialColor",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AbstractMesh.prototype,"castShadow",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AbstractMesh.prototype,"receiveShadow",void 0),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.c)("design:type",Object)],AbstractMesh.prototype,"depthWrite",void 0),AbstractMesh=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.b)([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Directive)()],AbstractMesh)},875:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(24)}},[[718,1,2]]]);
//# sourceMappingURL=main.f7e9811bc740cbd2e362.bundle.js.map